/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/spotify-web-api-node";
exports.ids = ["vendor-chunks/spotify-web-api-node"];
exports.modules = {

/***/ "(rsc)/./node_modules/spotify-web-api-node/src/authentication-request.js":
/*!*************************************************************************!*\
  !*** ./node_modules/spotify-web-api-node/src/authentication-request.js ***!
  \*************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\n\nvar Request = __webpack_require__(/*! ./base-request */ \"(rsc)/./node_modules/spotify-web-api-node/src/base-request.js\");\n\nvar DEFAULT_HOST = 'accounts.spotify.com',\n  DEFAULT_PORT = 443,\n  DEFAULT_SCHEME = 'https';\n\nmodule.exports.builder = function() {\n  return Request.builder()\n    .withHost(DEFAULT_HOST)\n    .withPort(DEFAULT_PORT)\n    .withScheme(DEFAULT_SCHEME);\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvc3BvdGlmeS13ZWItYXBpLW5vZGUvc3JjL2F1dGhlbnRpY2F0aW9uLXJlcXVlc3QuanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsY0FBYyxtQkFBTyxDQUFDLHFGQUFnQjs7QUFFdEM7QUFDQTtBQUNBOztBQUVBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc29uZy1ndWVzc2VyLy4vbm9kZV9tb2R1bGVzL3Nwb3RpZnktd2ViLWFwaS1ub2RlL3NyYy9hdXRoZW50aWNhdGlvbi1yZXF1ZXN0LmpzPzJmYTYiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVxdWVzdCA9IHJlcXVpcmUoJy4vYmFzZS1yZXF1ZXN0Jyk7XG5cbnZhciBERUZBVUxUX0hPU1QgPSAnYWNjb3VudHMuc3BvdGlmeS5jb20nLFxuICBERUZBVUxUX1BPUlQgPSA0NDMsXG4gIERFRkFVTFRfU0NIRU1FID0gJ2h0dHBzJztcblxubW9kdWxlLmV4cG9ydHMuYnVpbGRlciA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gUmVxdWVzdC5idWlsZGVyKClcbiAgICAud2l0aEhvc3QoREVGQVVMVF9IT1NUKVxuICAgIC53aXRoUG9ydChERUZBVUxUX1BPUlQpXG4gICAgLndpdGhTY2hlbWUoREVGQVVMVF9TQ0hFTUUpO1xufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/spotify-web-api-node/src/authentication-request.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/spotify-web-api-node/src/base-request.js":
/*!***************************************************************!*\
  !*** ./node_modules/spotify-web-api-node/src/base-request.js ***!
  \***************************************************************/
/***/ ((module) => {

"use strict";
eval("\n\nvar Request = function(builder) {\n  if (!builder) {\n    throw new Error('No builder supplied to constructor');\n  }\n\n  this.host = builder.host;\n  this.port = builder.port;\n  this.scheme = builder.scheme;\n  this.queryParameters = builder.queryParameters;\n  this.bodyParameters = builder.bodyParameters;\n  this.headers = builder.headers;\n  this.path = builder.path;\n};\n\nRequest.prototype._getter = function(key) {\n  return function() {\n    return this[key];\n  };\n};\n\nRequest.prototype.getHost = Request.prototype._getter('host');\n\nRequest.prototype.getPort = Request.prototype._getter('port');\n\nRequest.prototype.getScheme = Request.prototype._getter('scheme');\n\nRequest.prototype.getPath = Request.prototype._getter('path');\n\nRequest.prototype.getQueryParameters = Request.prototype._getter(\n  'queryParameters'\n);\n\nRequest.prototype.getBodyParameters = Request.prototype._getter(\n  'bodyParameters'\n);\n\nRequest.prototype.getHeaders = Request.prototype._getter('headers');\n\nRequest.prototype.getURI = function() {\n  if (!this.scheme || !this.host || !this.port) {\n    throw new Error('Missing components necessary to construct URI');\n  }\n  var uri = this.scheme + '://' + this.host;\n  if (\n    (this.scheme === 'http' && this.port !== 80) ||\n    (this.scheme === 'https' && this.port !== 443)\n  ) {\n    uri += ':' + this.port;\n  }\n  if (this.path) {\n    uri += this.path;\n  }\n  return uri;\n};\n\nRequest.prototype.getURL = function() {\n  var uri = this.getURI();\n  if (this.getQueryParameters()) {\n    return uri + this.getQueryParameterString(this.getQueryParameters());\n  } else {\n    return uri;\n  }\n};\n\nRequest.prototype.getQueryParameterString = function() {\n  var queryParameters = this.getQueryParameters();\n  if (queryParameters) {\n    return (\n      '?' +\n      Object.keys(queryParameters)\n        .filter(function(key) {\n          return queryParameters[key] !== undefined;\n        })\n        .map(function(key) {\n          return key + '=' + queryParameters[key];\n        })\n        .join('&')\n    );\n  }\n};\n\nRequest.prototype.execute = function(method, callback) {\n  if (callback) {\n    method(this, callback);\n    return;\n  }\n  var _self = this;\n\n  return new Promise(function(resolve, reject) {\n    method(_self, function(error, result) {\n      if (error) {\n        reject(error);\n      } else {\n        resolve(result);\n      }\n    });\n  });\n};\n\nvar Builder = function() {};\n\nBuilder.prototype._setter = function(key) {\n  return function(value) {\n    this[key] = value;\n    return this;\n  };\n};\n\nBuilder.prototype.withHost = Builder.prototype._setter('host');\n\nBuilder.prototype.withPort = Builder.prototype._setter('port');\n\nBuilder.prototype.withScheme = Builder.prototype._setter('scheme');\n\nBuilder.prototype.withPath = Builder.prototype._setter('path');\n\nBuilder.prototype._assigner = function(key) {\n  return function() {\n    for (var i = 0; i < arguments.length; i++) {\n      this[key] = this._assign(this[key], arguments[i]);\n    }\n    \n    return this;\n  };\n};\n\nBuilder.prototype.withQueryParameters = Builder.prototype._assigner(\n  'queryParameters'\n);\n\nBuilder.prototype.withBodyParameters = Builder.prototype._assigner(\n  'bodyParameters'\n);\n\nBuilder.prototype.withHeaders = Builder.prototype._assigner('headers');\n\nBuilder.prototype.withAuth = function(accessToken) {\n  if (accessToken) {\n    this.withHeaders({ Authorization: 'Bearer ' + accessToken });\n  }\n  return this;\n};\n\nBuilder.prototype._assign = function(src, obj) {\n  if (obj && Array.isArray(obj)) {\n    return obj;\n  }\n  if (obj && typeof obj === 'string') {\n    return obj;\n  }\n  if (obj && Object.keys(obj).length > 0) {\n    return Object.assign(src || {}, obj);\n  }\n  return src;\n};\n\nBuilder.prototype.build = function() {\n  return new Request(this);\n};\n\nmodule.exports.builder = function() {\n  return new Builder();\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvc3BvdGlmeS13ZWItYXBpLW5vZGUvc3JjL2Jhc2UtcmVxdWVzdC5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLG9CQUFvQixzQkFBc0I7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLHVCQUF1Qix3Q0FBd0M7QUFDL0Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxzQkFBc0I7QUFDdEI7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3NvbmctZ3Vlc3Nlci8uL25vZGVfbW9kdWxlcy9zcG90aWZ5LXdlYi1hcGktbm9kZS9zcmMvYmFzZS1yZXF1ZXN0LmpzP2RiODIiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVxdWVzdCA9IGZ1bmN0aW9uKGJ1aWxkZXIpIHtcbiAgaWYgKCFidWlsZGVyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdObyBidWlsZGVyIHN1cHBsaWVkIHRvIGNvbnN0cnVjdG9yJyk7XG4gIH1cblxuICB0aGlzLmhvc3QgPSBidWlsZGVyLmhvc3Q7XG4gIHRoaXMucG9ydCA9IGJ1aWxkZXIucG9ydDtcbiAgdGhpcy5zY2hlbWUgPSBidWlsZGVyLnNjaGVtZTtcbiAgdGhpcy5xdWVyeVBhcmFtZXRlcnMgPSBidWlsZGVyLnF1ZXJ5UGFyYW1ldGVycztcbiAgdGhpcy5ib2R5UGFyYW1ldGVycyA9IGJ1aWxkZXIuYm9keVBhcmFtZXRlcnM7XG4gIHRoaXMuaGVhZGVycyA9IGJ1aWxkZXIuaGVhZGVycztcbiAgdGhpcy5wYXRoID0gYnVpbGRlci5wYXRoO1xufTtcblxuUmVxdWVzdC5wcm90b3R5cGUuX2dldHRlciA9IGZ1bmN0aW9uKGtleSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXNba2V5XTtcbiAgfTtcbn07XG5cblJlcXVlc3QucHJvdG90eXBlLmdldEhvc3QgPSBSZXF1ZXN0LnByb3RvdHlwZS5fZ2V0dGVyKCdob3N0Jyk7XG5cblJlcXVlc3QucHJvdG90eXBlLmdldFBvcnQgPSBSZXF1ZXN0LnByb3RvdHlwZS5fZ2V0dGVyKCdwb3J0Jyk7XG5cblJlcXVlc3QucHJvdG90eXBlLmdldFNjaGVtZSA9IFJlcXVlc3QucHJvdG90eXBlLl9nZXR0ZXIoJ3NjaGVtZScpO1xuXG5SZXF1ZXN0LnByb3RvdHlwZS5nZXRQYXRoID0gUmVxdWVzdC5wcm90b3R5cGUuX2dldHRlcigncGF0aCcpO1xuXG5SZXF1ZXN0LnByb3RvdHlwZS5nZXRRdWVyeVBhcmFtZXRlcnMgPSBSZXF1ZXN0LnByb3RvdHlwZS5fZ2V0dGVyKFxuICAncXVlcnlQYXJhbWV0ZXJzJ1xuKTtcblxuUmVxdWVzdC5wcm90b3R5cGUuZ2V0Qm9keVBhcmFtZXRlcnMgPSBSZXF1ZXN0LnByb3RvdHlwZS5fZ2V0dGVyKFxuICAnYm9keVBhcmFtZXRlcnMnXG4pO1xuXG5SZXF1ZXN0LnByb3RvdHlwZS5nZXRIZWFkZXJzID0gUmVxdWVzdC5wcm90b3R5cGUuX2dldHRlcignaGVhZGVycycpO1xuXG5SZXF1ZXN0LnByb3RvdHlwZS5nZXRVUkkgPSBmdW5jdGlvbigpIHtcbiAgaWYgKCF0aGlzLnNjaGVtZSB8fCAhdGhpcy5ob3N0IHx8ICF0aGlzLnBvcnQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgY29tcG9uZW50cyBuZWNlc3NhcnkgdG8gY29uc3RydWN0IFVSSScpO1xuICB9XG4gIHZhciB1cmkgPSB0aGlzLnNjaGVtZSArICc6Ly8nICsgdGhpcy5ob3N0O1xuICBpZiAoXG4gICAgKHRoaXMuc2NoZW1lID09PSAnaHR0cCcgJiYgdGhpcy5wb3J0ICE9PSA4MCkgfHxcbiAgICAodGhpcy5zY2hlbWUgPT09ICdodHRwcycgJiYgdGhpcy5wb3J0ICE9PSA0NDMpXG4gICkge1xuICAgIHVyaSArPSAnOicgKyB0aGlzLnBvcnQ7XG4gIH1cbiAgaWYgKHRoaXMucGF0aCkge1xuICAgIHVyaSArPSB0aGlzLnBhdGg7XG4gIH1cbiAgcmV0dXJuIHVyaTtcbn07XG5cblJlcXVlc3QucHJvdG90eXBlLmdldFVSTCA9IGZ1bmN0aW9uKCkge1xuICB2YXIgdXJpID0gdGhpcy5nZXRVUkkoKTtcbiAgaWYgKHRoaXMuZ2V0UXVlcnlQYXJhbWV0ZXJzKCkpIHtcbiAgICByZXR1cm4gdXJpICsgdGhpcy5nZXRRdWVyeVBhcmFtZXRlclN0cmluZyh0aGlzLmdldFF1ZXJ5UGFyYW1ldGVycygpKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdXJpO1xuICB9XG59O1xuXG5SZXF1ZXN0LnByb3RvdHlwZS5nZXRRdWVyeVBhcmFtZXRlclN0cmluZyA9IGZ1bmN0aW9uKCkge1xuICB2YXIgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5nZXRRdWVyeVBhcmFtZXRlcnMoKTtcbiAgaWYgKHF1ZXJ5UGFyYW1ldGVycykge1xuICAgIHJldHVybiAoXG4gICAgICAnPycgK1xuICAgICAgT2JqZWN0LmtleXMocXVlcnlQYXJhbWV0ZXJzKVxuICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uKGtleSkge1xuICAgICAgICAgIHJldHVybiBxdWVyeVBhcmFtZXRlcnNba2V5XSAhPT0gdW5kZWZpbmVkO1xuICAgICAgICB9KVxuICAgICAgICAubWFwKGZ1bmN0aW9uKGtleSkge1xuICAgICAgICAgIHJldHVybiBrZXkgKyAnPScgKyBxdWVyeVBhcmFtZXRlcnNba2V5XTtcbiAgICAgICAgfSlcbiAgICAgICAgLmpvaW4oJyYnKVxuICAgICk7XG4gIH1cbn07XG5cblJlcXVlc3QucHJvdG90eXBlLmV4ZWN1dGUgPSBmdW5jdGlvbihtZXRob2QsIGNhbGxiYWNrKSB7XG4gIGlmIChjYWxsYmFjaykge1xuICAgIG1ldGhvZCh0aGlzLCBjYWxsYmFjayk7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBfc2VsZiA9IHRoaXM7XG5cbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgIG1ldGhvZChfc2VsZiwgZnVuY3Rpb24oZXJyb3IsIHJlc3VsdCkge1xuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXNvbHZlKHJlc3VsdCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xufTtcblxudmFyIEJ1aWxkZXIgPSBmdW5jdGlvbigpIHt9O1xuXG5CdWlsZGVyLnByb3RvdHlwZS5fc2V0dGVyID0gZnVuY3Rpb24oa2V5KSB7XG4gIHJldHVybiBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHRoaXNba2V5XSA9IHZhbHVlO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xufTtcblxuQnVpbGRlci5wcm90b3R5cGUud2l0aEhvc3QgPSBCdWlsZGVyLnByb3RvdHlwZS5fc2V0dGVyKCdob3N0Jyk7XG5cbkJ1aWxkZXIucHJvdG90eXBlLndpdGhQb3J0ID0gQnVpbGRlci5wcm90b3R5cGUuX3NldHRlcigncG9ydCcpO1xuXG5CdWlsZGVyLnByb3RvdHlwZS53aXRoU2NoZW1lID0gQnVpbGRlci5wcm90b3R5cGUuX3NldHRlcignc2NoZW1lJyk7XG5cbkJ1aWxkZXIucHJvdG90eXBlLndpdGhQYXRoID0gQnVpbGRlci5wcm90b3R5cGUuX3NldHRlcigncGF0aCcpO1xuXG5CdWlsZGVyLnByb3RvdHlwZS5fYXNzaWduZXIgPSBmdW5jdGlvbihrZXkpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzW2tleV0gPSB0aGlzLl9hc3NpZ24odGhpc1trZXldLCBhcmd1bWVudHNbaV0pO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcbn07XG5cbkJ1aWxkZXIucHJvdG90eXBlLndpdGhRdWVyeVBhcmFtZXRlcnMgPSBCdWlsZGVyLnByb3RvdHlwZS5fYXNzaWduZXIoXG4gICdxdWVyeVBhcmFtZXRlcnMnXG4pO1xuXG5CdWlsZGVyLnByb3RvdHlwZS53aXRoQm9keVBhcmFtZXRlcnMgPSBCdWlsZGVyLnByb3RvdHlwZS5fYXNzaWduZXIoXG4gICdib2R5UGFyYW1ldGVycydcbik7XG5cbkJ1aWxkZXIucHJvdG90eXBlLndpdGhIZWFkZXJzID0gQnVpbGRlci5wcm90b3R5cGUuX2Fzc2lnbmVyKCdoZWFkZXJzJyk7XG5cbkJ1aWxkZXIucHJvdG90eXBlLndpdGhBdXRoID0gZnVuY3Rpb24oYWNjZXNzVG9rZW4pIHtcbiAgaWYgKGFjY2Vzc1Rva2VuKSB7XG4gICAgdGhpcy53aXRoSGVhZGVycyh7IEF1dGhvcml6YXRpb246ICdCZWFyZXIgJyArIGFjY2Vzc1Rva2VuIH0pO1xuICB9XG4gIHJldHVybiB0aGlzO1xufTtcblxuQnVpbGRlci5wcm90b3R5cGUuX2Fzc2lnbiA9IGZ1bmN0aW9uKHNyYywgb2JqKSB7XG4gIGlmIChvYmogJiYgQXJyYXkuaXNBcnJheShvYmopKSB7XG4gICAgcmV0dXJuIG9iajtcbiAgfVxuICBpZiAob2JqICYmIHR5cGVvZiBvYmogPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIG9iajtcbiAgfVxuICBpZiAob2JqICYmIE9iamVjdC5rZXlzKG9iaikubGVuZ3RoID4gMCkge1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKHNyYyB8fCB7fSwgb2JqKTtcbiAgfVxuICByZXR1cm4gc3JjO1xufTtcblxuQnVpbGRlci5wcm90b3R5cGUuYnVpbGQgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIG5ldyBSZXF1ZXN0KHRoaXMpO1xufTtcblxubW9kdWxlLmV4cG9ydHMuYnVpbGRlciA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gbmV3IEJ1aWxkZXIoKTtcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/spotify-web-api-node/src/base-request.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/spotify-web-api-node/src/http-manager.js":
/*!***************************************************************!*\
  !*** ./node_modules/spotify-web-api-node/src/http-manager.js ***!
  \***************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\n\nvar superagent = __webpack_require__(/*! superagent */ \"(rsc)/./node_modules/superagent/lib/node/index.js\"),\n  { TimeoutError, \n    WebapiError, \n    WebapiRegularError, \n    WebapiAuthenticationError,\n    WebapiPlayerError \n  } =  __webpack_require__(/*! ./response-error */ \"(rsc)/./node_modules/spotify-web-api-node/src/response-error.js\");\n\nvar HttpManager = {};\n\n/* Create superagent options from the base request */\nvar _getParametersFromRequest = function(request) {\n  var options = {};\n\n  if (request.getQueryParameters()) {\n    options.query = request.getQueryParameters();\n  }\n\n  if (request.getHeaders() && request.getHeaders()['Content-Type'] === 'application/json') {\n    options.data = JSON.stringify(request.getBodyParameters());\n  } else if (request.getBodyParameters()) {\n    options.data = request.getBodyParameters();\n  }\n\n  if (request.getHeaders()) {\n    options.headers = request.getHeaders();\n  }\n  return options;\n};\n\nvar _toError = function(response) {\n  if (typeof response.body === 'object' && response.body.error && typeof response.body.error === 'object' && response.body.error.reason) {\n    return new WebapiPlayerError(response.body, response.headers, response.statusCode);\n  }\n\n  if (typeof response.body === 'object' && response.body.error && typeof response.body.error === 'object') {\n    return new WebapiRegularError(response.body, response.headers, response.statusCode);\n  }\n\n  if (typeof response.body === 'object' && response.body.error && typeof response.body.error === 'string') {\n    return new WebapiAuthenticationError(response.body, response.headers, response.statusCode);\n  }\n  \n  /* Other type of error, or unhandled Web API error format */\n  return new WebapiError(response.body, response.headers, response.statusCode, response.body);\n};\n\n/* Make the request to the Web API */\nHttpManager._makeRequest = function(method, options, uri, callback) {\n  var req = method.bind(superagent)(uri);\n\n  if (options.query) {\n    req.query(options.query);\n  }\n\n  if (options.headers) {\n    req.set(options.headers);\n  }\n\n  if (options.data) {\n    req.send(options.data);\n  }\n\n  req.end(function(err, response) {\n    if (err) {\n      if (err.timeout) {\n        return callback(new TimeoutError());\n      } else if (err.response) {\n        return callback(_toError(err.response));\n      } else {\n        return callback(err);\n      }\n    }\n\n    return callback(null, {\n      body: response.body,\n      headers: response.headers,\n      statusCode: response.statusCode\n    });\n  });\n};\n\n/**\n * Make a HTTP GET request.\n * @param {BaseRequest} The request.\n * @param {Function} The callback function.\n */\nHttpManager.get = function(request, callback) {\n  var options = _getParametersFromRequest(request);\n  var method = superagent.get;\n\n  HttpManager._makeRequest(method, options, request.getURI(), callback);\n};\n\n/**\n * Make a HTTP POST request.\n * @param {BaseRequest} The request.\n * @param {Function} The callback function.\n */\nHttpManager.post = function(request, callback) {\n  var options = _getParametersFromRequest(request);\n  var method = superagent.post;\n\n  HttpManager._makeRequest(method, options, request.getURI(), callback);\n};\n\n/**\n * Make a HTTP DELETE request.\n * @param {BaseRequest} The request.\n * @param {Function} The callback function.\n */\nHttpManager.del = function(request, callback) {\n  var options = _getParametersFromRequest(request);\n  var method = superagent.del;\n\n  HttpManager._makeRequest(method, options, request.getURI(), callback);\n};\n\n/**\n * Make a HTTP PUT request.\n * @param {BaseRequest} The request.\n * @param {Function} The callback function.\n */\nHttpManager.put = function(request, callback) {\n  var options = _getParametersFromRequest(request);\n  var method = superagent.put;\n\n  HttpManager._makeRequest(method, options, request.getURI(), callback);\n};\n\nmodule.exports = HttpManager;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvc3BvdGlmeS13ZWItYXBpLW5vZGUvc3JjL2h0dHAtbWFuYWdlci5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYixpQkFBaUIsbUJBQU8sQ0FBQyxxRUFBWTtBQUNyQyxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLEdBQUcsbUJBQU8sQ0FBQyx5RkFBa0I7O0FBRWpDOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQSxXQUFXLGFBQWE7QUFDeEIsV0FBVyxVQUFVO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFdBQVcsYUFBYTtBQUN4QixXQUFXLFVBQVU7QUFDckI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsV0FBVyxhQUFhO0FBQ3hCLFdBQVcsVUFBVTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxXQUFXLGFBQWE7QUFDeEIsV0FBVyxVQUFVO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zb25nLWd1ZXNzZXIvLi9ub2RlX21vZHVsZXMvc3BvdGlmeS13ZWItYXBpLW5vZGUvc3JjL2h0dHAtbWFuYWdlci5qcz83MTY3Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxudmFyIHN1cGVyYWdlbnQgPSByZXF1aXJlKCdzdXBlcmFnZW50JyksXG4gIHsgVGltZW91dEVycm9yLCBcbiAgICBXZWJhcGlFcnJvciwgXG4gICAgV2ViYXBpUmVndWxhckVycm9yLCBcbiAgICBXZWJhcGlBdXRoZW50aWNhdGlvbkVycm9yLFxuICAgIFdlYmFwaVBsYXllckVycm9yIFxuICB9ID0gIHJlcXVpcmUoJy4vcmVzcG9uc2UtZXJyb3InKTtcblxudmFyIEh0dHBNYW5hZ2VyID0ge307XG5cbi8qIENyZWF0ZSBzdXBlcmFnZW50IG9wdGlvbnMgZnJvbSB0aGUgYmFzZSByZXF1ZXN0ICovXG52YXIgX2dldFBhcmFtZXRlcnNGcm9tUmVxdWVzdCA9IGZ1bmN0aW9uKHJlcXVlc3QpIHtcbiAgdmFyIG9wdGlvbnMgPSB7fTtcblxuICBpZiAocmVxdWVzdC5nZXRRdWVyeVBhcmFtZXRlcnMoKSkge1xuICAgIG9wdGlvbnMucXVlcnkgPSByZXF1ZXN0LmdldFF1ZXJ5UGFyYW1ldGVycygpO1xuICB9XG5cbiAgaWYgKHJlcXVlc3QuZ2V0SGVhZGVycygpICYmIHJlcXVlc3QuZ2V0SGVhZGVycygpWydDb250ZW50LVR5cGUnXSA9PT0gJ2FwcGxpY2F0aW9uL2pzb24nKSB7XG4gICAgb3B0aW9ucy5kYXRhID0gSlNPTi5zdHJpbmdpZnkocmVxdWVzdC5nZXRCb2R5UGFyYW1ldGVycygpKTtcbiAgfSBlbHNlIGlmIChyZXF1ZXN0LmdldEJvZHlQYXJhbWV0ZXJzKCkpIHtcbiAgICBvcHRpb25zLmRhdGEgPSByZXF1ZXN0LmdldEJvZHlQYXJhbWV0ZXJzKCk7XG4gIH1cblxuICBpZiAocmVxdWVzdC5nZXRIZWFkZXJzKCkpIHtcbiAgICBvcHRpb25zLmhlYWRlcnMgPSByZXF1ZXN0LmdldEhlYWRlcnMoKTtcbiAgfVxuICByZXR1cm4gb3B0aW9ucztcbn07XG5cbnZhciBfdG9FcnJvciA9IGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gIGlmICh0eXBlb2YgcmVzcG9uc2UuYm9keSA9PT0gJ29iamVjdCcgJiYgcmVzcG9uc2UuYm9keS5lcnJvciAmJiB0eXBlb2YgcmVzcG9uc2UuYm9keS5lcnJvciA9PT0gJ29iamVjdCcgJiYgcmVzcG9uc2UuYm9keS5lcnJvci5yZWFzb24pIHtcbiAgICByZXR1cm4gbmV3IFdlYmFwaVBsYXllckVycm9yKHJlc3BvbnNlLmJvZHksIHJlc3BvbnNlLmhlYWRlcnMsIHJlc3BvbnNlLnN0YXR1c0NvZGUpO1xuICB9XG5cbiAgaWYgKHR5cGVvZiByZXNwb25zZS5ib2R5ID09PSAnb2JqZWN0JyAmJiByZXNwb25zZS5ib2R5LmVycm9yICYmIHR5cGVvZiByZXNwb25zZS5ib2R5LmVycm9yID09PSAnb2JqZWN0Jykge1xuICAgIHJldHVybiBuZXcgV2ViYXBpUmVndWxhckVycm9yKHJlc3BvbnNlLmJvZHksIHJlc3BvbnNlLmhlYWRlcnMsIHJlc3BvbnNlLnN0YXR1c0NvZGUpO1xuICB9XG5cbiAgaWYgKHR5cGVvZiByZXNwb25zZS5ib2R5ID09PSAnb2JqZWN0JyAmJiByZXNwb25zZS5ib2R5LmVycm9yICYmIHR5cGVvZiByZXNwb25zZS5ib2R5LmVycm9yID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBuZXcgV2ViYXBpQXV0aGVudGljYXRpb25FcnJvcihyZXNwb25zZS5ib2R5LCByZXNwb25zZS5oZWFkZXJzLCByZXNwb25zZS5zdGF0dXNDb2RlKTtcbiAgfVxuICBcbiAgLyogT3RoZXIgdHlwZSBvZiBlcnJvciwgb3IgdW5oYW5kbGVkIFdlYiBBUEkgZXJyb3IgZm9ybWF0ICovXG4gIHJldHVybiBuZXcgV2ViYXBpRXJyb3IocmVzcG9uc2UuYm9keSwgcmVzcG9uc2UuaGVhZGVycywgcmVzcG9uc2Uuc3RhdHVzQ29kZSwgcmVzcG9uc2UuYm9keSk7XG59O1xuXG4vKiBNYWtlIHRoZSByZXF1ZXN0IHRvIHRoZSBXZWIgQVBJICovXG5IdHRwTWFuYWdlci5fbWFrZVJlcXVlc3QgPSBmdW5jdGlvbihtZXRob2QsIG9wdGlvbnMsIHVyaSwgY2FsbGJhY2spIHtcbiAgdmFyIHJlcSA9IG1ldGhvZC5iaW5kKHN1cGVyYWdlbnQpKHVyaSk7XG5cbiAgaWYgKG9wdGlvbnMucXVlcnkpIHtcbiAgICByZXEucXVlcnkob3B0aW9ucy5xdWVyeSk7XG4gIH1cblxuICBpZiAob3B0aW9ucy5oZWFkZXJzKSB7XG4gICAgcmVxLnNldChvcHRpb25zLmhlYWRlcnMpO1xuICB9XG5cbiAgaWYgKG9wdGlvbnMuZGF0YSkge1xuICAgIHJlcS5zZW5kKG9wdGlvbnMuZGF0YSk7XG4gIH1cblxuICByZXEuZW5kKGZ1bmN0aW9uKGVyciwgcmVzcG9uc2UpIHtcbiAgICBpZiAoZXJyKSB7XG4gICAgICBpZiAoZXJyLnRpbWVvdXQpIHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG5ldyBUaW1lb3V0RXJyb3IoKSk7XG4gICAgICB9IGVsc2UgaWYgKGVyci5yZXNwb25zZSkge1xuICAgICAgICByZXR1cm4gY2FsbGJhY2soX3RvRXJyb3IoZXJyLnJlc3BvbnNlKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gY2FsbGJhY2soZXJyKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwge1xuICAgICAgYm9keTogcmVzcG9uc2UuYm9keSxcbiAgICAgIGhlYWRlcnM6IHJlc3BvbnNlLmhlYWRlcnMsXG4gICAgICBzdGF0dXNDb2RlOiByZXNwb25zZS5zdGF0dXNDb2RlXG4gICAgfSk7XG4gIH0pO1xufTtcblxuLyoqXG4gKiBNYWtlIGEgSFRUUCBHRVQgcmVxdWVzdC5cbiAqIEBwYXJhbSB7QmFzZVJlcXVlc3R9IFRoZSByZXF1ZXN0LlxuICogQHBhcmFtIHtGdW5jdGlvbn0gVGhlIGNhbGxiYWNrIGZ1bmN0aW9uLlxuICovXG5IdHRwTWFuYWdlci5nZXQgPSBmdW5jdGlvbihyZXF1ZXN0LCBjYWxsYmFjaykge1xuICB2YXIgb3B0aW9ucyA9IF9nZXRQYXJhbWV0ZXJzRnJvbVJlcXVlc3QocmVxdWVzdCk7XG4gIHZhciBtZXRob2QgPSBzdXBlcmFnZW50LmdldDtcblxuICBIdHRwTWFuYWdlci5fbWFrZVJlcXVlc3QobWV0aG9kLCBvcHRpb25zLCByZXF1ZXN0LmdldFVSSSgpLCBjYWxsYmFjayk7XG59O1xuXG4vKipcbiAqIE1ha2UgYSBIVFRQIFBPU1QgcmVxdWVzdC5cbiAqIEBwYXJhbSB7QmFzZVJlcXVlc3R9IFRoZSByZXF1ZXN0LlxuICogQHBhcmFtIHtGdW5jdGlvbn0gVGhlIGNhbGxiYWNrIGZ1bmN0aW9uLlxuICovXG5IdHRwTWFuYWdlci5wb3N0ID0gZnVuY3Rpb24ocmVxdWVzdCwgY2FsbGJhY2spIHtcbiAgdmFyIG9wdGlvbnMgPSBfZ2V0UGFyYW1ldGVyc0Zyb21SZXF1ZXN0KHJlcXVlc3QpO1xuICB2YXIgbWV0aG9kID0gc3VwZXJhZ2VudC5wb3N0O1xuXG4gIEh0dHBNYW5hZ2VyLl9tYWtlUmVxdWVzdChtZXRob2QsIG9wdGlvbnMsIHJlcXVlc3QuZ2V0VVJJKCksIGNhbGxiYWNrKTtcbn07XG5cbi8qKlxuICogTWFrZSBhIEhUVFAgREVMRVRFIHJlcXVlc3QuXG4gKiBAcGFyYW0ge0Jhc2VSZXF1ZXN0fSBUaGUgcmVxdWVzdC5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFRoZSBjYWxsYmFjayBmdW5jdGlvbi5cbiAqL1xuSHR0cE1hbmFnZXIuZGVsID0gZnVuY3Rpb24ocmVxdWVzdCwgY2FsbGJhY2spIHtcbiAgdmFyIG9wdGlvbnMgPSBfZ2V0UGFyYW1ldGVyc0Zyb21SZXF1ZXN0KHJlcXVlc3QpO1xuICB2YXIgbWV0aG9kID0gc3VwZXJhZ2VudC5kZWw7XG5cbiAgSHR0cE1hbmFnZXIuX21ha2VSZXF1ZXN0KG1ldGhvZCwgb3B0aW9ucywgcmVxdWVzdC5nZXRVUkkoKSwgY2FsbGJhY2spO1xufTtcblxuLyoqXG4gKiBNYWtlIGEgSFRUUCBQVVQgcmVxdWVzdC5cbiAqIEBwYXJhbSB7QmFzZVJlcXVlc3R9IFRoZSByZXF1ZXN0LlxuICogQHBhcmFtIHtGdW5jdGlvbn0gVGhlIGNhbGxiYWNrIGZ1bmN0aW9uLlxuICovXG5IdHRwTWFuYWdlci5wdXQgPSBmdW5jdGlvbihyZXF1ZXN0LCBjYWxsYmFjaykge1xuICB2YXIgb3B0aW9ucyA9IF9nZXRQYXJhbWV0ZXJzRnJvbVJlcXVlc3QocmVxdWVzdCk7XG4gIHZhciBtZXRob2QgPSBzdXBlcmFnZW50LnB1dDtcblxuICBIdHRwTWFuYWdlci5fbWFrZVJlcXVlc3QobWV0aG9kLCBvcHRpb25zLCByZXF1ZXN0LmdldFVSSSgpLCBjYWxsYmFjayk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEh0dHBNYW5hZ2VyOyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/spotify-web-api-node/src/http-manager.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/spotify-web-api-node/src/response-error.js":
/*!*****************************************************************!*\
  !*** ./node_modules/spotify-web-api-node/src/response-error.js ***!
  \*****************************************************************/
/***/ ((module) => {

eval("/* Timeout */\nclass NamedError extends Error {\n  get name() {\n    return this.constructor.name;\n  }  \n}\n\nclass TimeoutError extends NamedError {\n  constructor() {\n    const message = 'A timeout occurred while communicating with Spotify\\'s Web API.';\n    super(message);\n  }\n\n}\n\n/* Web API Parent and fallback error */\nclass WebapiError extends NamedError {\n  constructor(body, headers, statusCode, message) {\n    super(message);\n    this.body = body;\n    this.headers = headers;\n    this.statusCode = statusCode;\n  }\n\n}\n\n/** \n * Regular Error\n * { status : <integer>, message : <string> }\n */\nclass WebapiRegularError extends WebapiError {\n  constructor(body, headers, statusCode) {\n    const message = 'An error occurred while communicating with Spotify\\'s Web API.\\n' +\n    'Details: ' + body.error.message + '.';\n\n    super(body, headers, statusCode, message);\n  }\n}\n\n/**\n * Authentication Error \n * { error : <string>, error_description : <string> }\n */\nclass WebapiAuthenticationError extends WebapiError {\n  constructor(body, headers, statusCode) {\n    const message = 'An authentication error occurred while communicating with Spotify\\'s Web API.\\n' +\n    'Details: ' + body.error + (body.error_description ? ' ' + body.error_description + '.' : '.');\n\n    super(body, headers, statusCode, message);\n  }\n}\n\n/**\n * Player Error \n * { status : <integer>, message : <string>, reason : <string> }\n */\nclass WebapiPlayerError extends WebapiError {\n  constructor(body, headers, statusCode) {\n    const message = 'An error occurred while communicating with Spotify\\'s Web API.\\n' +\n    'Details: ' + body.error.message + (body.error.reason ? ' ' + body.error.reason + '.' : '.');\n\n    super(body, headers, statusCode, message);\n  }\n}\n\nmodule.exports = { WebapiError, TimeoutError, WebapiRegularError, WebapiAuthenticationError, WebapiPlayerError };//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvc3BvdGlmeS13ZWItYXBpLW5vZGUvc3JjL3Jlc3BvbnNlLWVycm9yLmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsbUJBQW1CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc29uZy1ndWVzc2VyLy4vbm9kZV9tb2R1bGVzL3Nwb3RpZnktd2ViLWFwaS1ub2RlL3NyYy9yZXNwb25zZS1lcnJvci5qcz9kOTQ2Il0sInNvdXJjZXNDb250ZW50IjpbIi8qIFRpbWVvdXQgKi9cbmNsYXNzIE5hbWVkRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gIGdldCBuYW1lKCkge1xuICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLm5hbWU7XG4gIH0gIFxufVxuXG5jbGFzcyBUaW1lb3V0RXJyb3IgZXh0ZW5kcyBOYW1lZEVycm9yIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9ICdBIHRpbWVvdXQgb2NjdXJyZWQgd2hpbGUgY29tbXVuaWNhdGluZyB3aXRoIFNwb3RpZnlcXCdzIFdlYiBBUEkuJztcbiAgICBzdXBlcihtZXNzYWdlKTtcbiAgfVxuXG59XG5cbi8qIFdlYiBBUEkgUGFyZW50IGFuZCBmYWxsYmFjayBlcnJvciAqL1xuY2xhc3MgV2ViYXBpRXJyb3IgZXh0ZW5kcyBOYW1lZEVycm9yIHtcbiAgY29uc3RydWN0b3IoYm9keSwgaGVhZGVycywgc3RhdHVzQ29kZSwgbWVzc2FnZSkge1xuICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgIHRoaXMuYm9keSA9IGJvZHk7XG4gICAgdGhpcy5oZWFkZXJzID0gaGVhZGVycztcbiAgICB0aGlzLnN0YXR1c0NvZGUgPSBzdGF0dXNDb2RlO1xuICB9XG5cbn1cblxuLyoqIFxuICogUmVndWxhciBFcnJvclxuICogeyBzdGF0dXMgOiA8aW50ZWdlcj4sIG1lc3NhZ2UgOiA8c3RyaW5nPiB9XG4gKi9cbmNsYXNzIFdlYmFwaVJlZ3VsYXJFcnJvciBleHRlbmRzIFdlYmFwaUVycm9yIHtcbiAgY29uc3RydWN0b3IoYm9keSwgaGVhZGVycywgc3RhdHVzQ29kZSkge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSAnQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgY29tbXVuaWNhdGluZyB3aXRoIFNwb3RpZnlcXCdzIFdlYiBBUEkuXFxuJyArXG4gICAgJ0RldGFpbHM6ICcgKyBib2R5LmVycm9yLm1lc3NhZ2UgKyAnLic7XG5cbiAgICBzdXBlcihib2R5LCBoZWFkZXJzLCBzdGF0dXNDb2RlLCBtZXNzYWdlKTtcbiAgfVxufVxuXG4vKipcbiAqIEF1dGhlbnRpY2F0aW9uIEVycm9yIFxuICogeyBlcnJvciA6IDxzdHJpbmc+LCBlcnJvcl9kZXNjcmlwdGlvbiA6IDxzdHJpbmc+IH1cbiAqL1xuY2xhc3MgV2ViYXBpQXV0aGVudGljYXRpb25FcnJvciBleHRlbmRzIFdlYmFwaUVycm9yIHtcbiAgY29uc3RydWN0b3IoYm9keSwgaGVhZGVycywgc3RhdHVzQ29kZSkge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSAnQW4gYXV0aGVudGljYXRpb24gZXJyb3Igb2NjdXJyZWQgd2hpbGUgY29tbXVuaWNhdGluZyB3aXRoIFNwb3RpZnlcXCdzIFdlYiBBUEkuXFxuJyArXG4gICAgJ0RldGFpbHM6ICcgKyBib2R5LmVycm9yICsgKGJvZHkuZXJyb3JfZGVzY3JpcHRpb24gPyAnICcgKyBib2R5LmVycm9yX2Rlc2NyaXB0aW9uICsgJy4nIDogJy4nKTtcblxuICAgIHN1cGVyKGJvZHksIGhlYWRlcnMsIHN0YXR1c0NvZGUsIG1lc3NhZ2UpO1xuICB9XG59XG5cbi8qKlxuICogUGxheWVyIEVycm9yIFxuICogeyBzdGF0dXMgOiA8aW50ZWdlcj4sIG1lc3NhZ2UgOiA8c3RyaW5nPiwgcmVhc29uIDogPHN0cmluZz4gfVxuICovXG5jbGFzcyBXZWJhcGlQbGF5ZXJFcnJvciBleHRlbmRzIFdlYmFwaUVycm9yIHtcbiAgY29uc3RydWN0b3IoYm9keSwgaGVhZGVycywgc3RhdHVzQ29kZSkge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSAnQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgY29tbXVuaWNhdGluZyB3aXRoIFNwb3RpZnlcXCdzIFdlYiBBUEkuXFxuJyArXG4gICAgJ0RldGFpbHM6ICcgKyBib2R5LmVycm9yLm1lc3NhZ2UgKyAoYm9keS5lcnJvci5yZWFzb24gPyAnICcgKyBib2R5LmVycm9yLnJlYXNvbiArICcuJyA6ICcuJyk7XG5cbiAgICBzdXBlcihib2R5LCBoZWFkZXJzLCBzdGF0dXNDb2RlLCBtZXNzYWdlKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHsgV2ViYXBpRXJyb3IsIFRpbWVvdXRFcnJvciwgV2ViYXBpUmVndWxhckVycm9yLCBXZWJhcGlBdXRoZW50aWNhdGlvbkVycm9yLCBXZWJhcGlQbGF5ZXJFcnJvciB9OyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/spotify-web-api-node/src/response-error.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/spotify-web-api-node/src/server-methods.js":
/*!*****************************************************************!*\
  !*** ./node_modules/spotify-web-api-node/src/server-methods.js ***!
  \*****************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\n\nvar AuthenticationRequest = __webpack_require__(/*! ./authentication-request */ \"(rsc)/./node_modules/spotify-web-api-node/src/authentication-request.js\");\nvar HttpManager = __webpack_require__(/*! ./http-manager */ \"(rsc)/./node_modules/spotify-web-api-node/src/http-manager.js\");\n\nmodule.exports = {\n\n  /**\n   * Retrieve a URL where the user can give the application permissions.\n   * @param {string[]} scopes The scopes corresponding to the permissions the application needs.\n   * @param {string} state A parameter that you can use to maintain a value between the request and the callback to redirect_uri.It is useful to prevent CSRF exploits.\n   * @param {boolean} showDialog A parameter that you can use to force the user to approve the app on each login rather than being automatically redirected.\n   * @param {string} responseType An optional parameter that you can use to specify the code response based on the authentication type - can be set to 'code' or 'token'. Default 'code' to ensure backwards compatability.\n   * @returns {string} The URL where the user can give application permissions.\n   */\n  createAuthorizeURL: function(scopes, state, showDialog, responseType = 'code') {\n    return AuthenticationRequest.builder()\n      .withPath('/authorize')\n      .withQueryParameters({\n        client_id: this.getClientId(),\n        response_type: responseType,\n        redirect_uri: this.getRedirectURI(),\n        scope: scopes.join('%20'),\n        state: state,\n        show_dialog: showDialog && !!showDialog\n      })\n      .build()\n      .getURL();\n  },\n\n  /**\n   * Request an access token using the Client Credentials flow.\n   * Requires that client ID and client secret has been set previous to the call.\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @returns {Promise|undefined} A promise that if successful, resolves into an object containing the access token,\n   *          token type and time to expiration. If rejected, it contains an error object. Not returned if a callback is given.\n   */\n  clientCredentialsGrant: function(callback) {\n    return AuthenticationRequest.builder()\n      .withPath('/api/token')\n      .withBodyParameters({\n        grant_type: 'client_credentials'\n      })\n      .withHeaders({\n        Authorization:\n          'Basic ' +\n          new Buffer(\n            this.getClientId() + ':' + this.getClientSecret()\n          ).toString('base64'),\n        'Content-Type' : 'application/x-www-form-urlencoded'        \n      })\n      .build()\n      .execute(HttpManager.post, callback);\n  },\n\n  /**\n   * Request an access token using the Authorization Code flow.\n   * Requires that client ID, client secret, and redirect URI has been set previous to the call.\n   * @param {string} code The authorization code returned in the callback in the Authorization Code flow.\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @returns {Promise|undefined} A promise that if successful, resolves into an object containing the access token,\n   *          refresh token, token type and time to expiration. If rejected, it contains an error object.\n   *          Not returned if a callback is given.\n   */\n  authorizationCodeGrant: function(code, callback) {\n    return AuthenticationRequest.builder()\n      .withPath('/api/token')\n      .withBodyParameters({\n        grant_type: 'authorization_code',\n        redirect_uri: this.getRedirectURI(),\n        code: code,\n        client_id: this.getClientId(),\n        client_secret: this.getClientSecret()\n      })\n      .withHeaders({ 'Content-Type' : 'application/x-www-form-urlencoded' })\n      .build()\n      .execute(HttpManager.post, callback);\n  },\n\n  /**\n   * Refresh the access token given that it hasn't expired.\n   * Requires that client ID, client secret and refresh token has been set previous to the call.\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @returns {Promise|undefined} A promise that if successful, resolves to an object containing the\n   *          access token, time to expiration and token type. If rejected, it contains an error object.\n   *          Not returned if a callback is given.\n   */\n  refreshAccessToken: function(callback) {\n    return AuthenticationRequest.builder()\n      .withPath('/api/token')\n      .withBodyParameters({\n        grant_type: 'refresh_token',\n        refresh_token: this.getRefreshToken()\n      })\n      .withHeaders({\n        Authorization:\n          'Basic ' +\n          new Buffer(\n            this.getClientId() + ':' + this.getClientSecret()\n          ).toString('base64'),\n          'Content-Type' : 'application/x-www-form-urlencoded'\n      })\n      .build()\n      .execute(HttpManager.post, callback);\n  }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvc3BvdGlmeS13ZWItYXBpLW5vZGUvc3JjL3NlcnZlci1tZXRob2RzLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViLDRCQUE0QixtQkFBTyxDQUFDLHlHQUEwQjtBQUM5RCxrQkFBa0IsbUJBQU8sQ0FBQyxxRkFBZ0I7O0FBRTFDOztBQUVBO0FBQ0E7QUFDQSxhQUFhLFVBQVU7QUFDdkIsYUFBYSxRQUFRO0FBQ3JCLGFBQWEsU0FBUztBQUN0QixhQUFhLFFBQVE7QUFDckIsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsYUFBYSxpQkFBaUI7QUFDOUIsZUFBZSxtQkFBbUI7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCLGFBQWEsaUJBQWlCO0FBQzlCLGVBQWUsbUJBQW1CO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxxQkFBcUIsc0RBQXNEO0FBQzNFO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLGFBQWEsaUJBQWlCO0FBQzlCLGVBQWUsbUJBQW1CO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3NvbmctZ3Vlc3Nlci8uL25vZGVfbW9kdWxlcy9zcG90aWZ5LXdlYi1hcGktbm9kZS9zcmMvc2VydmVyLW1ldGhvZHMuanM/Yzc2YyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnZhciBBdXRoZW50aWNhdGlvblJlcXVlc3QgPSByZXF1aXJlKCcuL2F1dGhlbnRpY2F0aW9uLXJlcXVlc3QnKTtcbnZhciBIdHRwTWFuYWdlciA9IHJlcXVpcmUoJy4vaHR0cC1tYW5hZ2VyJyk7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZSBhIFVSTCB3aGVyZSB0aGUgdXNlciBjYW4gZ2l2ZSB0aGUgYXBwbGljYXRpb24gcGVybWlzc2lvbnMuXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IHNjb3BlcyBUaGUgc2NvcGVzIGNvcnJlc3BvbmRpbmcgdG8gdGhlIHBlcm1pc3Npb25zIHRoZSBhcHBsaWNhdGlvbiBuZWVkcy5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHN0YXRlIEEgcGFyYW1ldGVyIHRoYXQgeW91IGNhbiB1c2UgdG8gbWFpbnRhaW4gYSB2YWx1ZSBiZXR3ZWVuIHRoZSByZXF1ZXN0IGFuZCB0aGUgY2FsbGJhY2sgdG8gcmVkaXJlY3RfdXJpLkl0IGlzIHVzZWZ1bCB0byBwcmV2ZW50IENTUkYgZXhwbG9pdHMuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gc2hvd0RpYWxvZyBBIHBhcmFtZXRlciB0aGF0IHlvdSBjYW4gdXNlIHRvIGZvcmNlIHRoZSB1c2VyIHRvIGFwcHJvdmUgdGhlIGFwcCBvbiBlYWNoIGxvZ2luIHJhdGhlciB0aGFuIGJlaW5nIGF1dG9tYXRpY2FsbHkgcmVkaXJlY3RlZC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHJlc3BvbnNlVHlwZSBBbiBvcHRpb25hbCBwYXJhbWV0ZXIgdGhhdCB5b3UgY2FuIHVzZSB0byBzcGVjaWZ5IHRoZSBjb2RlIHJlc3BvbnNlIGJhc2VkIG9uIHRoZSBhdXRoZW50aWNhdGlvbiB0eXBlIC0gY2FuIGJlIHNldCB0byAnY29kZScgb3IgJ3Rva2VuJy4gRGVmYXVsdCAnY29kZScgdG8gZW5zdXJlIGJhY2t3YXJkcyBjb21wYXRhYmlsaXR5LlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgVVJMIHdoZXJlIHRoZSB1c2VyIGNhbiBnaXZlIGFwcGxpY2F0aW9uIHBlcm1pc3Npb25zLlxuICAgKi9cbiAgY3JlYXRlQXV0aG9yaXplVVJMOiBmdW5jdGlvbihzY29wZXMsIHN0YXRlLCBzaG93RGlhbG9nLCByZXNwb25zZVR5cGUgPSAnY29kZScpIHtcbiAgICByZXR1cm4gQXV0aGVudGljYXRpb25SZXF1ZXN0LmJ1aWxkZXIoKVxuICAgICAgLndpdGhQYXRoKCcvYXV0aG9yaXplJylcbiAgICAgIC53aXRoUXVlcnlQYXJhbWV0ZXJzKHtcbiAgICAgICAgY2xpZW50X2lkOiB0aGlzLmdldENsaWVudElkKCksXG4gICAgICAgIHJlc3BvbnNlX3R5cGU6IHJlc3BvbnNlVHlwZSxcbiAgICAgICAgcmVkaXJlY3RfdXJpOiB0aGlzLmdldFJlZGlyZWN0VVJJKCksXG4gICAgICAgIHNjb3BlOiBzY29wZXMuam9pbignJTIwJyksXG4gICAgICAgIHN0YXRlOiBzdGF0ZSxcbiAgICAgICAgc2hvd19kaWFsb2c6IHNob3dEaWFsb2cgJiYgISFzaG93RGlhbG9nXG4gICAgICB9KVxuICAgICAgLmJ1aWxkKClcbiAgICAgIC5nZXRVUkwoKTtcbiAgfSxcblxuICAvKipcbiAgICogUmVxdWVzdCBhbiBhY2Nlc3MgdG9rZW4gdXNpbmcgdGhlIENsaWVudCBDcmVkZW50aWFscyBmbG93LlxuICAgKiBSZXF1aXJlcyB0aGF0IGNsaWVudCBJRCBhbmQgY2xpZW50IHNlY3JldCBoYXMgYmVlbiBzZXQgcHJldmlvdXMgdG8gdGhlIGNhbGwuXG4gICAqIEBwYXJhbSB7cmVxdWVzdENhbGxiYWNrfSBbY2FsbGJhY2tdIE9wdGlvbmFsIGNhbGxiYWNrIG1ldGhvZCB0byBiZSBjYWxsZWQgaW5zdGVhZCBvZiB0aGUgcHJvbWlzZS5cbiAgICogQHJldHVybnMge1Byb21pc2V8dW5kZWZpbmVkfSBBIHByb21pc2UgdGhhdCBpZiBzdWNjZXNzZnVsLCByZXNvbHZlcyBpbnRvIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBhY2Nlc3MgdG9rZW4sXG4gICAqICAgICAgICAgIHRva2VuIHR5cGUgYW5kIHRpbWUgdG8gZXhwaXJhdGlvbi4gSWYgcmVqZWN0ZWQsIGl0IGNvbnRhaW5zIGFuIGVycm9yIG9iamVjdC4gTm90IHJldHVybmVkIGlmIGEgY2FsbGJhY2sgaXMgZ2l2ZW4uXG4gICAqL1xuICBjbGllbnRDcmVkZW50aWFsc0dyYW50OiBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgIHJldHVybiBBdXRoZW50aWNhdGlvblJlcXVlc3QuYnVpbGRlcigpXG4gICAgICAud2l0aFBhdGgoJy9hcGkvdG9rZW4nKVxuICAgICAgLndpdGhCb2R5UGFyYW1ldGVycyh7XG4gICAgICAgIGdyYW50X3R5cGU6ICdjbGllbnRfY3JlZGVudGlhbHMnXG4gICAgICB9KVxuICAgICAgLndpdGhIZWFkZXJzKHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjpcbiAgICAgICAgICAnQmFzaWMgJyArXG4gICAgICAgICAgbmV3IEJ1ZmZlcihcbiAgICAgICAgICAgIHRoaXMuZ2V0Q2xpZW50SWQoKSArICc6JyArIHRoaXMuZ2V0Q2xpZW50U2VjcmV0KClcbiAgICAgICAgICApLnRvU3RyaW5nKCdiYXNlNjQnKSxcbiAgICAgICAgJ0NvbnRlbnQtVHlwZScgOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyAgICAgICAgXG4gICAgICB9KVxuICAgICAgLmJ1aWxkKClcbiAgICAgIC5leGVjdXRlKEh0dHBNYW5hZ2VyLnBvc3QsIGNhbGxiYWNrKTtcbiAgfSxcblxuICAvKipcbiAgICogUmVxdWVzdCBhbiBhY2Nlc3MgdG9rZW4gdXNpbmcgdGhlIEF1dGhvcml6YXRpb24gQ29kZSBmbG93LlxuICAgKiBSZXF1aXJlcyB0aGF0IGNsaWVudCBJRCwgY2xpZW50IHNlY3JldCwgYW5kIHJlZGlyZWN0IFVSSSBoYXMgYmVlbiBzZXQgcHJldmlvdXMgdG8gdGhlIGNhbGwuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjb2RlIFRoZSBhdXRob3JpemF0aW9uIGNvZGUgcmV0dXJuZWQgaW4gdGhlIGNhbGxiYWNrIGluIHRoZSBBdXRob3JpemF0aW9uIENvZGUgZmxvdy5cbiAgICogQHBhcmFtIHtyZXF1ZXN0Q2FsbGJhY2t9IFtjYWxsYmFja10gT3B0aW9uYWwgY2FsbGJhY2sgbWV0aG9kIHRvIGJlIGNhbGxlZCBpbnN0ZWFkIG9mIHRoZSBwcm9taXNlLlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZXx1bmRlZmluZWR9IEEgcHJvbWlzZSB0aGF0IGlmIHN1Y2Nlc3NmdWwsIHJlc29sdmVzIGludG8gYW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIGFjY2VzcyB0b2tlbixcbiAgICogICAgICAgICAgcmVmcmVzaCB0b2tlbiwgdG9rZW4gdHlwZSBhbmQgdGltZSB0byBleHBpcmF0aW9uLiBJZiByZWplY3RlZCwgaXQgY29udGFpbnMgYW4gZXJyb3Igb2JqZWN0LlxuICAgKiAgICAgICAgICBOb3QgcmV0dXJuZWQgaWYgYSBjYWxsYmFjayBpcyBnaXZlbi5cbiAgICovXG4gIGF1dGhvcml6YXRpb25Db2RlR3JhbnQ6IGZ1bmN0aW9uKGNvZGUsIGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIEF1dGhlbnRpY2F0aW9uUmVxdWVzdC5idWlsZGVyKClcbiAgICAgIC53aXRoUGF0aCgnL2FwaS90b2tlbicpXG4gICAgICAud2l0aEJvZHlQYXJhbWV0ZXJzKHtcbiAgICAgICAgZ3JhbnRfdHlwZTogJ2F1dGhvcml6YXRpb25fY29kZScsXG4gICAgICAgIHJlZGlyZWN0X3VyaTogdGhpcy5nZXRSZWRpcmVjdFVSSSgpLFxuICAgICAgICBjb2RlOiBjb2RlLFxuICAgICAgICBjbGllbnRfaWQ6IHRoaXMuZ2V0Q2xpZW50SWQoKSxcbiAgICAgICAgY2xpZW50X3NlY3JldDogdGhpcy5nZXRDbGllbnRTZWNyZXQoKVxuICAgICAgfSlcbiAgICAgIC53aXRoSGVhZGVycyh7ICdDb250ZW50LVR5cGUnIDogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcgfSlcbiAgICAgIC5idWlsZCgpXG4gICAgICAuZXhlY3V0ZShIdHRwTWFuYWdlci5wb3N0LCBjYWxsYmFjayk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlZnJlc2ggdGhlIGFjY2VzcyB0b2tlbiBnaXZlbiB0aGF0IGl0IGhhc24ndCBleHBpcmVkLlxuICAgKiBSZXF1aXJlcyB0aGF0IGNsaWVudCBJRCwgY2xpZW50IHNlY3JldCBhbmQgcmVmcmVzaCB0b2tlbiBoYXMgYmVlbiBzZXQgcHJldmlvdXMgdG8gdGhlIGNhbGwuXG4gICAqIEBwYXJhbSB7cmVxdWVzdENhbGxiYWNrfSBbY2FsbGJhY2tdIE9wdGlvbmFsIGNhbGxiYWNrIG1ldGhvZCB0byBiZSBjYWxsZWQgaW5zdGVhZCBvZiB0aGUgcHJvbWlzZS5cbiAgICogQHJldHVybnMge1Byb21pc2V8dW5kZWZpbmVkfSBBIHByb21pc2UgdGhhdCBpZiBzdWNjZXNzZnVsLCByZXNvbHZlcyB0byBhbiBvYmplY3QgY29udGFpbmluZyB0aGVcbiAgICogICAgICAgICAgYWNjZXNzIHRva2VuLCB0aW1lIHRvIGV4cGlyYXRpb24gYW5kIHRva2VuIHR5cGUuIElmIHJlamVjdGVkLCBpdCBjb250YWlucyBhbiBlcnJvciBvYmplY3QuXG4gICAqICAgICAgICAgIE5vdCByZXR1cm5lZCBpZiBhIGNhbGxiYWNrIGlzIGdpdmVuLlxuICAgKi9cbiAgcmVmcmVzaEFjY2Vzc1Rva2VuOiBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgIHJldHVybiBBdXRoZW50aWNhdGlvblJlcXVlc3QuYnVpbGRlcigpXG4gICAgICAud2l0aFBhdGgoJy9hcGkvdG9rZW4nKVxuICAgICAgLndpdGhCb2R5UGFyYW1ldGVycyh7XG4gICAgICAgIGdyYW50X3R5cGU6ICdyZWZyZXNoX3Rva2VuJyxcbiAgICAgICAgcmVmcmVzaF90b2tlbjogdGhpcy5nZXRSZWZyZXNoVG9rZW4oKVxuICAgICAgfSlcbiAgICAgIC53aXRoSGVhZGVycyh7XG4gICAgICAgIEF1dGhvcml6YXRpb246XG4gICAgICAgICAgJ0Jhc2ljICcgK1xuICAgICAgICAgIG5ldyBCdWZmZXIoXG4gICAgICAgICAgICB0aGlzLmdldENsaWVudElkKCkgKyAnOicgKyB0aGlzLmdldENsaWVudFNlY3JldCgpXG4gICAgICAgICAgKS50b1N0cmluZygnYmFzZTY0JyksXG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZScgOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJ1xuICAgICAgfSlcbiAgICAgIC5idWlsZCgpXG4gICAgICAuZXhlY3V0ZShIdHRwTWFuYWdlci5wb3N0LCBjYWxsYmFjayk7XG4gIH1cbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/spotify-web-api-node/src/server-methods.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/spotify-web-api-node/src/server.js":
/*!*********************************************************!*\
  !*** ./node_modules/spotify-web-api-node/src/server.js ***!
  \*********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var SpotifyWebApi = __webpack_require__(/*! ./spotify-web-api */ \"(rsc)/./node_modules/spotify-web-api-node/src/spotify-web-api.js\");\nvar ServerMethods = __webpack_require__(/*! ./server-methods */ \"(rsc)/./node_modules/spotify-web-api-node/src/server-methods.js\");\nSpotifyWebApi._addMethods(ServerMethods);\nmodule.exports = SpotifyWebApi;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvc3BvdGlmeS13ZWItYXBpLW5vZGUvc3JjL3NlcnZlci5qcyIsIm1hcHBpbmdzIjoiQUFBQSxvQkFBb0IsbUJBQU8sQ0FBQywyRkFBbUI7QUFDL0Msb0JBQW9CLG1CQUFPLENBQUMseUZBQWtCO0FBQzlDO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zb25nLWd1ZXNzZXIvLi9ub2RlX21vZHVsZXMvc3BvdGlmeS13ZWItYXBpLW5vZGUvc3JjL3NlcnZlci5qcz84ZDkxIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBTcG90aWZ5V2ViQXBpID0gcmVxdWlyZSgnLi9zcG90aWZ5LXdlYi1hcGknKTtcbnZhciBTZXJ2ZXJNZXRob2RzID0gcmVxdWlyZSgnLi9zZXJ2ZXItbWV0aG9kcycpO1xuU3BvdGlmeVdlYkFwaS5fYWRkTWV0aG9kcyhTZXJ2ZXJNZXRob2RzKTtcbm1vZHVsZS5leHBvcnRzID0gU3BvdGlmeVdlYkFwaTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/spotify-web-api-node/src/server.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/spotify-web-api-node/src/spotify-web-api.js":
/*!******************************************************************!*\
  !*** ./node_modules/spotify-web-api-node/src/spotify-web-api.js ***!
  \******************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\n\nvar AuthenticationRequest = __webpack_require__(/*! ./authentication-request */ \"(rsc)/./node_modules/spotify-web-api-node/src/authentication-request.js\"),\n  WebApiRequest = __webpack_require__(/*! ./webapi-request */ \"(rsc)/./node_modules/spotify-web-api-node/src/webapi-request.js\"),\n  HttpManager = __webpack_require__(/*! ./http-manager */ \"(rsc)/./node_modules/spotify-web-api-node/src/http-manager.js\");\n\nfunction SpotifyWebApi(credentials) {\n  this._credentials = credentials || {};\n}\n\nSpotifyWebApi.prototype = {\n  setCredentials: function(credentials) {\n    for (var key in credentials) {\n      if (credentials.hasOwnProperty(key)) {\n        this._credentials[key] = credentials[key];\n      }\n    }\n  },\n\n  getCredentials: function() {\n    return this._credentials;\n  },\n\n  resetCredentials: function() {\n    this._credentials = null;\n  },\n\n  setClientId: function(clientId) {\n    this._setCredential('clientId', clientId);\n  },\n\n  setClientSecret: function(clientSecret) {\n    this._setCredential('clientSecret', clientSecret);\n  },\n\n  setAccessToken: function(accessToken) {\n    this._setCredential('accessToken', accessToken);\n  },\n\n  setRefreshToken: function(refreshToken) {\n    this._setCredential('refreshToken', refreshToken);\n  },\n\n  setRedirectURI: function(redirectUri) {\n    this._setCredential('redirectUri', redirectUri);\n  },\n\n  getRedirectURI: function() {\n    return this._getCredential('redirectUri');\n  },\n\n  getClientId: function() {\n    return this._getCredential('clientId');\n  },\n\n  getClientSecret: function() {\n    return this._getCredential('clientSecret');\n  },\n\n  getAccessToken: function() {\n    return this._getCredential('accessToken');\n  },\n\n  getRefreshToken: function() {\n    return this._getCredential('refreshToken');\n  },\n\n  resetClientId: function() {\n    this._resetCredential('clientId');\n  },\n\n  resetClientSecret: function() {\n    this._resetCredential('clientSecret');\n  },\n\n  resetAccessToken: function() {\n    this._resetCredential('accessToken');\n  },\n\n  resetRefreshToken: function() {\n    this._resetCredential('refreshToken');\n  },\n\n  resetRedirectURI: function() {\n    this._resetCredential('redirectUri');\n  },\n\n  _setCredential: function(credentialKey, value) {\n    this._credentials = this._credentials || {};\n    this._credentials[credentialKey] = value;\n  },\n\n  _getCredential: function(credentialKey) {\n    if (!this._credentials) {\n      return;\n    } else {\n      return this._credentials[credentialKey];\n    }\n  },\n\n  _resetCredential: function(credentialKey) {\n    if (!this._credentials) {\n      return;\n    } else {\n      this._credentials[credentialKey] = null;\n    }\n  },\n\n  /**\n   * Look up a track.\n   * @param {string} trackId The track's ID.\n   * @param {Object} [options] The possible options, currently only market.\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @example getTrack('3Qm86XLflmIXVm1wcwkgDK').then(...)\n   * @returns {Promise|undefined} A promise that if successful, returns an object containing information\n   *          about the track. Not returned if a callback is given.\n   */\n  getTrack: function(trackId, options, callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/tracks/' + trackId)\n      .withQueryParameters(options)\n      .build()\n      .execute(HttpManager.get, callback);\n  },\n\n  /**\n   * Look up several tracks.\n   * @param {string[]} trackIds The IDs of the artists.\n   * @param {Object} [options] The possible options, currently only market.\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @example getArtists(['0oSGxfWSnnOXhD2fKuz2Gy', '3dBVyJ7JuOMt4GE9607Qin']).then(...)\n   * @returns {Promise|undefined} A promise that if successful, returns an object containing information\n   *          about the artists. Not returned if a callback is given.\n   */\n  getTracks: function(trackIds, options, callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/tracks')\n      .withQueryParameters(\n        {\n          ids: trackIds.join(',')\n        },\n        options\n      )\n      .build()\n      .execute(HttpManager.get, callback);\n  },\n\n  /**\n   * Look up an album.\n   * @param {string} albumId The album's ID.\n   * @param {Object} [options] The possible options, currently only market.\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @example getAlbum('0sNOF9WDwhWunNAHPD3Baj').then(...)\n   * @returns {Promise|undefined} A promise that if successful, returns an object containing information\n   *          about the album. Not returned if a callback is given.\n   */\n  getAlbum: function(albumId, options, callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/albums/' + albumId)\n      .withQueryParameters(options)\n      .build()\n      .execute(HttpManager.get, callback);\n  },\n\n  /**\n   * Look up several albums.\n   * @param {string[]} albumIds The IDs of the albums.\n   * @param {Object} [options] The possible options, currently only market.\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @example getAlbums(['0oSGxfWSnnOXhD2fKuz2Gy', '3dBVyJ7JuOMt4GE9607Qin']).then(...)\n   * @returns {Promise|undefined} A promise that if successful, returns an object containing information\n   *          about the albums. Not returned if a callback is given.\n   */\n  getAlbums: function(albumIds, options, callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/albums')\n      .withQueryParameters(\n        {\n          ids: albumIds.join(',')\n        },\n        options\n      )\n      .build()\n      .execute(HttpManager.get, callback);\n  },\n\n  /**\n   * Look up an artist.\n   * @param {string} artistId The artist's ID.\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @example api.getArtist('1u7kkVrr14iBvrpYnZILJR').then(...)\n   * @returns {Promise|undefined} A promise that if successful, returns an object containing information\n   *          about the artist. Not returned if a callback is given.\n   */\n  getArtist: function(artistId, callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/artists/' + artistId)\n      .build()\n      .execute(HttpManager.get, callback);\n  },\n\n  /**\n   * Look up several artists.\n   * @param {string[]} artistIds The IDs of the artists.\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @example getArtists(['0oSGxfWSnnOXhD2fKuz2Gy', '3dBVyJ7JuOMt4GE9607Qin']).then(...)\n   * @returns {Promise|undefined} A promise that if successful, returns an object containing information\n   *          about the artists. Not returned if a callback is given.\n   */\n  getArtists: function(artistIds, callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/artists')\n      .withQueryParameters({\n        ids: artistIds.join(',')\n      })\n      .build()\n      .execute(HttpManager.get, callback);\n  },\n\n  /**\n   * Search for music entities of certain types.\n   * @param {string} query The search query.\n   * @param {string[]} types An array of item types to search across.\n   * Valid types are: 'album', 'artist', 'playlist', 'track', 'show', and 'episode'.\n   * @param {Object} [options] The possible options, e.g. limit, offset.\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @example search('Abba', ['track', 'playlist'], { limit : 5, offset : 1 }).then(...)\n   * @returns {Promise|undefined} A promise that if successful, returns an object containing the\n   *          search results. The result is paginated. If the promise is rejected,\n   *          it contains an error object. Not returned if a callback is given.\n   */\n  search: function(query, types, options, callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/search/')\n      .withQueryParameters(\n        {\n          type: types.join(','),\n          q: query\n        },\n        options\n      )\n      .build()\n      .execute(HttpManager.get, callback);\n  },\n\n  /**\n   * Search for an album.\n   * @param {string} query The search query.\n   * @param {Object} [options] The possible options, e.g. limit, offset.\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @example searchAlbums('Space Oddity', { limit : 5, offset : 1 }).then(...)\n   * @returns {Promise|undefined} A promise that if successful, returns an object containing the\n   *          search results. The result is paginated. If the promise is rejected,\n   *          it contains an error object. Not returned if a callback is given.\n   */\n  searchAlbums: function(query, options, callback) {\n    return this.search(query, ['album'], options, callback);\n  },\n\n  /**\n   * Search for an artist.\n   * @param {string} query The search query.\n   * @param {Object} [options] The possible options, e.g. limit, offset.\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @example searchArtists('David Bowie', { limit : 5, offset : 1 }).then(...)\n   * @returns {Promise|undefined} A promise that if successful, returns an object containing the\n   *          search results. The result is paginated. If the promise is rejected,\n   *          it contains an error object. Not returned if a callback is given.\n   */\n  searchArtists: function(query, options, callback) {\n    return this.search(query, ['artist'], options, callback);\n  },\n\n  /**\n   * Search for a track.\n   * @param {string} query The search query.\n   * @param {Object} [options] The possible options, e.g. limit, offset.\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @example searchTracks('Mr. Brightside', { limit : 3, offset : 2 }).then(...)\n   * @returns {Promise|undefined} A promise that if successful, returns an object containing the\n   *          search results. The result is paginated. If the promise is rejected,\n   *          it contains an error object. Not returned if a callback is given.\n   */\n  searchTracks: function(query, options, callback) {\n    return this.search(query, ['track'], options, callback);\n  },\n\n  /**\n   * Search for playlists.\n   * @param {string} query The search query.\n   * @param {Object} options The possible options.\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @example searchPlaylists('workout', { limit : 1, offset : 0 }).then(...)\n   * @returns {Promise|undefined} A promise that if successful, returns an object containing the\n   *          search results. The result is paginated. If the promise is rejected,\n   *          it contains an error object. Not returned if a callback is given.\n   */\n  searchPlaylists: function(query, options, callback) {\n    return this.search(query, ['playlist'], options, callback);\n  },\n\n  /**\n   * Get an artist's albums.\n   * @param {string} artistId The artist's ID.\n   * @options {Object} [options] The possible options, e.g. limit, offset.\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @example getArtistAlbums('0oSGxfWSnnOXhD2fKuz2Gy', { album_type : 'album', country : 'GB', limit : 2, offset : 5 }).then(...)\n   * @returns {Promise|undefined} A promise that if successful, returns an object containing the albums\n   *          for the given artist. The result is paginated. If the promise is rejected,\n   *          it contains an error object. Not returned if a callback is given.\n   */\n  getArtistAlbums: function(artistId, options, callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/artists/' + artistId + '/albums')\n      .withQueryParameters(options)\n      .build()\n      .execute(HttpManager.get, callback);\n  },\n\n  /**\n   * Get the tracks of an album.\n   * @param albumId the album's ID.\n   * @options {Object} [options] The possible options, e.g. limit.\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @example getAlbumTracks('41MnTivkwTO3UUJ8DrqEJJ', { limit : 5, offset : 1 }).then(...)\n   * @returns {Promise|undefined} A promise that if successful, returns an object containing the\n   *                    tracks in the album. The result is paginated. If the promise is rejected.\n   *                    it contains an error object. Not returned if a callback is given.\n   */\n  getAlbumTracks: function(albumId, options, callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/albums/' + albumId + '/tracks')\n      .withQueryParameters(options)\n      .build()\n      .execute(HttpManager.get, callback);\n  },\n\n  /**\n   * Get an artist's top tracks.\n   * @param {string} artistId The artist's ID.\n   * @param {string} country The country/territory where the tracks are most popular. (format: ISO 3166-1 alpha-2)\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @example getArtistTopTracks('0oSGxfWSnnOXhD2fKuz2Gy', 'GB').then(...)\n   * @returns {Promise|undefined} A promise that if successful, returns an object containing the\n   *          artist's top tracks in the given country. If the promise is rejected,\n   *          it contains an error object. Not returned if a callback is given.\n   */\n  getArtistTopTracks: function(artistId, country, callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/artists/' + artistId + '/top-tracks')\n      .withQueryParameters({\n        country: country\n      })\n      .build()\n      .execute(HttpManager.get, callback);\n  },\n\n  /**\n   * Get related artists.\n   * @param {string} artistId The artist's ID.\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @example getArtistRelatedArtists('0oSGxfWSnnOXhD2fKuz2Gy').then(...)\n   * @returns {Promise|undefined} A promise that if successful, returns an object containing the\n   *          related artists. If the promise is rejected, it contains an error object. Not returned if a callback is given.\n   */\n  getArtistRelatedArtists: function(artistId, callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/artists/' + artistId + '/related-artists')\n      .build()\n      .execute(HttpManager.get, callback);\n  },\n\n  /**\n   * Get information about a user.\n   * @param userId The user ID.\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @example getUser('thelinmichael').then(...)\n   * @returns {Promise|undefined} A promise that if successful, resolves to an object\n   *          containing information about the user. If the promise is\n   *          rejected, it contains an error object. Not returned if a callback is given.\n   */\n  getUser: function(userId, callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/users/' + encodeURIComponent(userId))\n      .build()\n      .execute(HttpManager.get, callback);\n  },\n\n  /**\n   * Get information about the user that has signed in (the current user).\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @example getMe().then(...)\n   * @returns {Promise|undefined} A promise that if successful, resolves to an object\n   *          containing information about the user. The amount of information\n   *          depends on the permissions given by the user. If the promise is\n   *          rejected, it contains an error object. Not returned if a callback is given.\n   */\n  getMe: function(callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/me')\n      .build()\n      .execute(HttpManager.get, callback);\n  },\n\n  /**\n   * Get a user's playlists.\n   * @param {string} userId An optional id of the user. If you know the Spotify URI it is easy\n   * to find the id (e.g. spotify:user:<here_is_the_id>). If not provided, the id of the user that granted\n   * the permissions will be used.\n   * @param {Object} [options] The options supplied to this request.\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @example getUserPlaylists('thelinmichael').then(...)\n   * @returns {Promise|undefined} A promise that if successful, resolves to an object containing\n   *          a list of playlists. If rejected, it contains an error object. Not returned if a callback is given.\n   */\n  getUserPlaylists: function(userId, options, callback) {\n    var path;\n    if (typeof userId === 'string') {\n      path = '/v1/users/' + encodeURIComponent(userId) + '/playlists';\n    } else if (typeof userId === 'object') {\n      callback = options;\n      options = userId;\n      path = '/v1/me/playlists';\n    } /* undefined */ else {\n      path = '/v1/me/playlists';\n    }\n\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath(path)\n      .withQueryParameters(options)\n      .build()\n      .execute(HttpManager.get, callback);\n  },\n\n  /**\n   * Get a playlist.\n   * @param {string} playlistId The playlist's ID.\n   * @param {Object} [options] The options supplied to this request.\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @example getPlaylist('3EsfV6XzCHU8SPNdbnFogK').then(...)\n   * @returns {Promise|undefined} A promise that if successful, resolves to an object containing\n   *          the playlist. If rejected, it contains an error object. Not returned if a callback is given.\n   */\n  getPlaylist: function(playlistId, options, callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/playlists/' + playlistId)\n      .withQueryParameters(options)\n      .build()\n      .execute(HttpManager.get, callback);\n  },\n\n  /**\n   * Get tracks in a playlist.\n   * @param {string} playlistId The playlist's ID.\n   * @param {Object} [options] Optional options, such as fields.\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @example getPlaylistTracks('3ktAYNcRHpazJ9qecm3ptn').then(...)\n   * @returns {Promise|undefined} A promise that if successful, resolves to an object that containing\n   * the tracks in the playlist. If rejected, it contains an error object. Not returned if a callback is given.\n   */\n  getPlaylistTracks: function(playlistId, options, callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/playlists/' + playlistId + '/tracks')\n      .withQueryParameters(options)\n      .build()\n      .execute(HttpManager.get, callback);\n  },\n\n  /**\n   * Create a playlist.\n   * @param {string} [name] The name of the playlist.\n   * @param {Object} [options] The possible options, being description, collaborative and public.\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @example createPlaylist('My playlist', {''description': 'My description', 'collaborative' : false, 'public': true}).then(...)\n   * @returns {Promise|undefined} A promise that if successful, resolves to an object containing information about the\n   *          created playlist. If rejected, it contains an error object. Not returned if a callback is given.\n   */\n  createPlaylist: function(name, options, callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/me/playlists')\n      .withHeaders({ 'Content-Type': 'application/json' })\n      .withBodyParameters({\n        name : name,\n      }, options)\n      .build()\n      .execute(HttpManager.post, callback);\n  },\n\n  /**\n   * Follow a playlist.\n   * @param {string} playlistId The playlist's ID\n   * @param {Object} [options] The possible options, currently only public.\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @returns {Promise|undefined} A promise that if successful, simply resolves to an empty object. If rejected,\n   * it contains an error object. Not returned if a callback is given.\n   */\n  followPlaylist: function(playlistId, options, callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/playlists/' + playlistId + '/followers')\n      .withHeaders({ 'Content-Type': 'application/json' })\n      .withBodyParameters(options)\n      .build()\n      .execute(HttpManager.put, callback);\n  },\n\n  /**\n   * Unfollow a playlist.\n   * @param {string} playlistId The playlist's ID\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @returns {Promise|undefined} A promise that if successful, simply resolves to an empty object. If rejected,\n   * it contains an error object. Not returned if a callback is given.\n   */\n  unfollowPlaylist: function(playlistId, callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/playlists/' + playlistId + '/followers')\n      .build()\n      .execute(HttpManager.del, callback);\n  },\n\n  /**\n   * Change playlist details.\n   * @param {string} playlistId The playlist's ID\n   * @param {Object} [options] The possible options, e.g. name, public.\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @example changePlaylistDetails('3EsfV6XzCHU8SPNdbnFogK', {name: 'New name', public: true}).then(...)\n   * @returns {Promise|undefined} A promise that if successful, simply resolves to an empty object. If rejected,\n   * it contains an error object. Not returned if a callback is given.\n   */\n  changePlaylistDetails: function(playlistId, options, callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/playlists/' + playlistId)\n      .withHeaders({ 'Content-Type': 'application/json' })\n      .withBodyParameters(options)\n      .build()\n      .execute(HttpManager.put, callback);\n  },\n\n  /**\n   * Replace the image used to represent a specific playlist.\n   * @param {string} playlistId The playlist's ID\n   * @param {string} base64URI Base64 encoded JPEG image data, maximum payload size is 256 KB\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @example uploadCustomPlaylistCoverImage('3EsfV6XzCHU8SPNdbnFogK', 'longbase64uri').then(...)\n   * @returns {Promise|undefined} A promise that if successful, simply resolves to an empty object. If rejected,\n   * it contains an error object. Not returned if a callback is given.\n   */\n  uploadCustomPlaylistCoverImage: function(playlistId, base64URI, callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/playlists/' + playlistId + '/images')\n      .withHeaders({ 'Content-Type': 'image/jpeg' })\n      .withBodyParameters(base64URI)\n      .build()\n      .execute(HttpManager.put, callback);\n  },\n\n  /**\n   * Add tracks to a playlist.\n   * @param {string} playlistId The playlist's ID\n   * @param {string[]} tracks URIs of the tracks to add to the playlist.\n   * @param {Object} [options] Options, position being the only one.\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @example addTracksToPlaylist('3EsfV6XzCHU8SPNdbnFogK',\n              '[\"spotify:track:4iV5W9uYEdYUVa79Axb7Rh\", \"spotify:track:1301WleyT98MSxVHPZCA6M\"]').then(...)\n   * @returns {Promise|undefined} A promise that if successful returns an object containing a snapshot_id. If rejected,\n   * it contains an error object. Not returned if a callback is given.\n   */\n  addTracksToPlaylist: function(playlistId, tracks, options, callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/playlists/' + playlistId + '/tracks')\n      .withHeaders({ 'Content-Type': 'application/json' })\n      .withQueryParameters(options)\n      .withBodyParameters({\n        uris: tracks\n      })\n      .build()\n      .execute(HttpManager.post, callback);\n  },\n\n  /**\n   * Remove tracks from a playlist.\n   * @param {string} playlistId The playlist's ID\n   * @param {Object[]} tracks An array of objects containing a property called uri with the track URI (String), and\n   * an optional property called positions (int[]), e.g. { uri : \"spotify:track:491rM2JN8KvmV6p0oDDuJT\", positions : [0, 15] }\n   * @param {Object} options Options, snapshot_id being the only one.\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @returns {Promise|undefined} A promise that if successful returns an object containing a snapshot_id. If rejected,\n   * it contains an error object. Not returned if a callback is given.\n   */\n  removeTracksFromPlaylist: function(playlistId, tracks, options, callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/playlists/' + playlistId + '/tracks')\n      .withHeaders({ 'Content-Type': 'application/json' })\n      .withBodyParameters(\n        {\n          tracks: tracks\n        }, \n        options\n      )\n      .build()\n      .execute(HttpManager.del, callback);\n  },\n\n  /**\n   * Remove tracks from a playlist by position instead of specifying the tracks' URIs.\n   * @param {string} playlistId The playlist's ID\n   * @param {int[]} positions The positions of the tracks in the playlist that should be removed\n   * @param {string} snapshot_id The snapshot ID, or version, of the playlist. Required\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @returns {Promise|undefined} A promise that if successful returns an object containing a snapshot_id. If rejected,\n   * it contains an error object. Not returned if a callback is given.\n   */\n  removeTracksFromPlaylistByPosition: function(\n    playlistId,\n    positions,\n    snapshotId,\n    callback\n  ) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/playlists/' + playlistId + '/tracks')\n      .withHeaders({ 'Content-Type': 'application/json' })\n      .withBodyParameters({\n        positions: positions,\n        snapshot_id: snapshotId\n      })\n      .build()\n      .execute(HttpManager.del, callback);\n  },\n\n  /**\n   * Replace tracks in a playlist.\n   * @param {string} playlistId The playlist's ID\n   * @param {Object[]} uris An array of track URIs (strings)\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @returns {Promise|undefined} A promise that if successful returns an empty object. If rejected,\n   * it contains an error object. Not returned if a callback is given.\n   */\n  replaceTracksInPlaylist: function(playlistId, uris, callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/playlists/' + playlistId + '/tracks')\n      .withHeaders({ 'Content-Type': 'application/json' })\n      .withBodyParameters({\n        uris: uris\n      })\n      .build()\n      .execute(HttpManager.put, callback);\n  },\n\n  /**\n   * Reorder tracks in a playlist.\n   * @param {string} playlistId The playlist's ID\n   * @param {int} rangeStart The position of the first track to be reordered.\n   * @param {int} insertBefore The position where the tracks should be inserted.\n   * @param {Object} options Optional parameters, i.e. range_length and snapshot_id.\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @returns {Promise|undefined} A promise that if successful returns an object containing a snapshot_id. If rejected,\n   * it contains an error object. Not returned if a callback is given.\n   */\n  reorderTracksInPlaylist: function(\n    playlistId,\n    rangeStart,\n    insertBefore,\n    options,\n    callback\n  ) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/playlists/' + playlistId + '/tracks')\n      .withHeaders({ 'Content-Type': 'application/json' })\n      .withBodyParameters(\n        {\n          range_start: rangeStart,\n          insert_before: insertBefore\n        },\n        options\n      )\n      .build()\n      .execute(HttpManager.put, callback);\n  },\n\n  /**\n   * Get audio features for a single track identified by its unique Spotify ID.\n   * @param {string} trackId The track ID\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @example getAudioFeaturesForTrack('38P3Q4QcdjQALGF2Z92BmR').then(...)\n   * @returns {Promise|undefined} A promise that if successful, resolves to an object\n   *          containing information about the audio features. If the promise is\n   *          rejected, it contains an error object. Not returned if a callback is given.\n   */\n  getAudioFeaturesForTrack: function(trackId, callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/audio-features/' + trackId)\n      .build()\n      .execute(HttpManager.get, callback);\n  },\n\n  /**\n   * Get audio analysis for a single track identified by its unique Spotify ID.\n   * @param {string} trackId The track ID\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @example getAudioAnalysisForTrack('38P3Q4QcdjQALGF2Z92BmR').then(...)\n   * @returns {Promise|undefined} A promise that if successful, resolves to an object\n   *          containing information about the audio analysis. If the promise is\n   *          rejected, it contains an error object. Not returned if a callback is given.\n   */\n  getAudioAnalysisForTrack: function(trackId, callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/audio-analysis/' + trackId)\n      .build()\n      .execute(HttpManager.get, callback);\n  },\n\n  /**\n   * Get audio features for multiple tracks identified by their unique Spotify ID.\n   * @param {string[]} trackIds The track IDs\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @example getAudioFeaturesForTracks(['38P3Q4QcdjQALGF2Z92BmR', '2HO2bnoMrpnZUbUqiilLHi']).then(...)\n   * @returns {Promise|undefined} A promise that if successful, resolves to an object\n   *          containing information about the audio features for the tracks. If the promise is\n   *          rejected, it contains an error object. Not returned if a callback is given.\n   */\n  getAudioFeaturesForTracks: function(trackIds, callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/audio-features')\n      .withQueryParameters({\n        ids: trackIds.join(',')\n      })\n      .build()\n      .execute(HttpManager.get, callback);\n  },\n\n  /**\n   * Create a playlist-style listening experience based on seed artists, tracks and genres.\n   * @param {Object} [options] The options supplied to this request.\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @example getRecommendations({ min_energy: 0.4, seed_artists: ['6mfK6Q2tzLMEchAr0e9Uzu', '4DYFVNKZ1uixa6SQTvzQwJ'], min_popularity: 50 }).then(...)\n   * @returns {Promise|undefined} A promise that if successful, resolves to an object containing\n   *          a list of tracks and a list of seeds. If rejected, it contains an error object. Not returned if a callback is given.\n   */\n  getRecommendations: function(options, callback) {\n    var _opts = {};\n    var optionsOfTypeArray = ['seed_artists', 'seed_genres', 'seed_tracks'];\n    for (var option in options) {\n      if (options.hasOwnProperty(option)) {\n        if (\n          optionsOfTypeArray.indexOf(option) !== -1 &&\n          Object.prototype.toString.call(options[option]) === '[object Array]'\n        ) {\n          _opts[option] = options[option].join(',');\n        } else {\n          _opts[option] = options[option];\n        }\n      }\n    }\n\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/recommendations')\n      .withQueryParameters(_opts)\n      .build()\n      .execute(HttpManager.get, callback);\n  },\n\n  /**\n   * Retrieve a list of available genres seed parameter values for recommendations.\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @example getAvailableGenreSeeds().then(...)\n   * @returns {Promise|undefined} A promise that if successful, resolves to an object containing\n   *          a list of available genres to be used as seeds for recommendations.\n   *          If rejected, it contains an error object. Not returned if a callback is given.\n   */\n  getAvailableGenreSeeds: function(callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/recommendations/available-genre-seeds')\n      .build()\n      .execute(HttpManager.get, callback);\n  },\n\n  /**\n   * Retrieve the tracks that are saved to the authenticated users Your Music library.\n   * @param {Object} [options] Options, being market, limit, and/or offset.\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @returns {Promise|undefined} A promise that if successful, resolves to an object containing a paging object which in turn contains\n   *          playlist track objects. Not returned if a callback is given.\n   */\n  getMySavedTracks: function(options, callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/me/tracks')\n      .withQueryParameters(options)\n      .build()\n      .execute(HttpManager.get, callback);\n  },\n\n  /**\n   * Check if one or more tracks is already saved in the current Spotify users Your Music library.\n   * @param {string[]} trackIds The track IDs\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @returns {Promise|undefined} A promise that if successful, resolves into an array of booleans. The order\n   * of the returned array's elements correspond to the track ID in the request.\n   * The boolean value of true indicates that the track is part of the user's library, otherwise false.\n   * Not returned if a callback is given.\n   */\n  containsMySavedTracks: function(trackIds, callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/me/tracks/contains')\n      .withQueryParameters({\n        ids: trackIds.join(',')\n      })\n      .build()\n      .execute(HttpManager.get, callback);\n  },\n\n  /**\n   * Remove a track from the authenticated user's Your Music library.\n   * @param {string[]} trackIds The track IDs\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @returns {Promise|undefined} A promise that if successful returns null, otherwise an error.\n   * Not returned if a callback is given.\n   */\n  removeFromMySavedTracks: function(trackIds, callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/me/tracks')\n      .withHeaders({ 'Content-Type': 'application/json' })\n      .withBodyParameters({ ids: trackIds })\n      .build()\n      .execute(HttpManager.del, callback);\n  },\n\n  /**\n   * Add a track from the authenticated user's Your Music library.\n   * @param {string[]} trackIds The track IDs\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @returns {Promise|undefined} A promise that if successful returns null, otherwise an error. Not returned if a callback is given.\n   */\n  addToMySavedTracks: function(trackIds, callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/me/tracks')\n      .withHeaders({ 'Content-Type': 'application/json' })\n      .withBodyParameters({ ids: trackIds })\n      .build()\n      .execute(HttpManager.put, callback);\n  },\n\n  /**\n   * Remove an album from the authenticated user's Your Music library.\n   * @param {string[]} albumIds The album IDs\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @returns {Promise|undefined} A promise that if successful returns null, otherwise an error.\n   * Not returned if a callback is given.\n   */\n  removeFromMySavedAlbums: function(albumIds, callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/me/albums')\n      .withHeaders({ 'Content-Type': 'application/json' })\n      .withBodyParameters(albumIds)\n      .build()\n      .execute(HttpManager.del, callback);\n  },\n\n  /**\n   * Add an album from the authenticated user's Your Music library.\n   * @param {string[]} albumIds The track IDs\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @returns {Promise|undefined} A promise that if successful returns null, otherwise an error. Not returned if a callback is given.\n   */\n  addToMySavedAlbums: function(albumIds, callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/me/albums')\n      .withHeaders({ 'Content-Type': 'application/json' })\n      .withBodyParameters(albumIds)\n      .build()\n      .execute(HttpManager.put, callback);\n  },\n\n  /**\n   * Retrieve the albums that are saved to the authenticated users Your Music library.\n   * @param {Object} [options] Options, being market, limit, and/or offset.\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @returns {Promise|undefined} A promise that if successful, resolves to an object containing a paging object which in turn contains\n   *          playlist album objects. Not returned if a callback is given.\n   */\n  getMySavedAlbums: function(options, callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/me/albums')\n      .withQueryParameters(options)\n      .build()\n      .execute(HttpManager.get, callback);\n  },\n\n  /**\n   * Check if one or more albums is already saved in the current Spotify users Your Music library.\n   * @param {string[]} albumIds The album IDs\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @returns {Promise|undefined} A promise that if successful, resolves into an array of booleans. The order\n   * of the returned array's elements correspond to the album ID in the request.\n   * The boolean value of true indicates that the album is part of the user's library, otherwise false.\n   * Not returned if a callback is given.\n   */\n  containsMySavedAlbums: function(albumIds, callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/me/albums/contains')\n      .withQueryParameters({\n        ids: albumIds.join(',')\n      })\n      .build()\n      .execute(HttpManager.get, callback);\n  },\n\n  /**\n   * Get the current user's top artists based on calculated affinity.\n   * @param {Object} [options] Options, being time_range, limit, offset.\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @returns {Promise|undefined} A promise that if successful, resolves into a paging object of artists,\n   *          otherwise an error. Not returned if a callback is given.\n   */\n  getMyTopArtists: function(options, callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/me/top/artists')\n      .withQueryParameters(options)\n      .build()\n      .execute(HttpManager.get, callback);\n  },\n\n  /**\n   * Get the current user's top tracks based on calculated affinity.\n   * @param {Object} [options] Options, being time_range, limit, offset.\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @returns {Promise|undefined} A promise that if successful, resolves into a paging object of tracks,\n   *          otherwise an error. Not returned if a callback is given.\n   */\n  getMyTopTracks: function(options, callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/me/top/tracks')\n      .withQueryParameters(options)\n      .build()\n      .execute(HttpManager.get, callback);\n  },\n\n  /**\n   * Get the Current User's Recently Played Tracks\n   * @param {Object} [options] Options, being type, after, limit, before.\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @returns {Promise|undefined} A promise that if successful, resolves into a paging object of play history objects,\n   *          otherwise an error. Not returned if a callback is given. Note that the response will be empty\n   *          in case the user has enabled private session.\n   */\n  getMyRecentlyPlayedTracks: function(options, callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/me/player/recently-played')\n      .withQueryParameters(options)\n      .build()\n      .execute(HttpManager.get, callback);\n  },\n\n  /**\n   * Add track or episode to device queue\n   * @param {string} [uri] uri of the track or episode to add\n   * @param {Object} [options] Options, being device_id.\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @returns {Promise|undefined} A promise that if successful, resolves into a paging object of tracks,\n   *          otherwise an error. Not returned if a callback is given.\n   */\n  addToQueue: function(uri, options, callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/me/player/queue')\n      .withQueryParameters(\n        {\n          uri: uri\n        },\n        options\n      )\n      .build()\n      .execute(HttpManager.post, callback);\n  },\n\n\n  /** \n   * Get the Current User's Available Devices\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @returns {Promise|undefined} A promise that if successful, resolves into an array of device objects,\n   *          otherwise an error. Not returned if a callback is given.\n   */\n  getMyDevices: function(callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/me/player/devices')\n      .build()\n      .execute(HttpManager.get, callback);\n  },\n\n  /**\n   * Get the Current User's Currently Playing Track.\n   * @param {Object} [options] Options, being market.\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @returns {Promise|undefined} A promise that if successful, resolves into a paging object of tracks,\n   *          otherwise an error. Not returned if a callback is given.\n   */\n  getMyCurrentPlayingTrack: function(options, callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/me/player/currently-playing')\n      .withQueryParameters(options)\n      .build()\n      .execute(HttpManager.get, callback);\n  },\n\n  /**\n   * Get Information About The User's Current Playback State\n   * @param {Object} [options] Options, being market and additional_types.\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @returns {Promise|undefined} A promise that if successful, resolves into a paging object of tracks,\n   *          otherwise an error. Not returned if a callback is given.\n   */\n  getMyCurrentPlaybackState: function(options, callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/me/player')\n      .withQueryParameters(options)\n      .build()\n      .execute(HttpManager.get, callback);\n  },\n\n  /**\n   * Transfer a User's Playback\n   * @param {string[]} [deviceIds] An _array_ containing a device ID on which playback should be started/transferred. \n   * (NOTE: The API is currently only supporting a single device ID.)\n   * @param {Object} [options] Options, the only one being 'play'.\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @returns {Promise|undefined} A promise that if successful, resolves into an empty response,\n   *          otherwise an error. Not returned if a callback is given.\n   */\n  transferMyPlayback: function(deviceIds, options, callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/me/player')\n      .withHeaders({ 'Content-Type': 'application/json' })\n      .withBodyParameters(\n        {\n          device_ids: deviceIds,\n        },\n        options\n      )\n      .build()\n      .execute(HttpManager.put, callback);\n  },\n\n  /**\n   * Starts o Resumes the Current User's Playback\n   * @param {Object} [options] Options, being device_id, context_uri, offset, uris, position_ms.\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @example play({context_uri: 'spotify:album:5ht7ItJgpBH7W6vJ5BqpPr'}).then(...)\n   * @returns {Promise|undefined} A promise that if successful, resolves into an empty response,\n   *          otherwise an error. Not returned if a callback is given.\n   */\n  play: function(options, callback) {\n    /*jshint camelcase: false */\n    var _options = options || {};\n    var queryParams = _options.device_id\n      ? { device_id: _options.device_id }\n      : null;\n    var postData = {};\n    ['context_uri', 'uris', 'offset', 'position_ms'].forEach(function(field) {\n      if (field in _options) {\n        postData[field] = _options[field];\n      }\n    });\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/me/player/play')\n      .withQueryParameters(queryParams)\n      .withHeaders({ 'Content-Type': 'application/json' })\n      .withBodyParameters(postData)\n      .build()\n      .execute(HttpManager.put, callback);\n  },\n\n  /**\n   * Pauses the Current User's Playback\n   * @param {Object} [options] Options, being device_id. If left empty will target the user's currently active device.\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @example pause().then(...)\n   * @returns {Promise|undefined} A promise that if successful, resolves into an empty response,\n   *          otherwise an error. Not returned if a callback is given.\n   */\n  pause: function(options, callback) {\n    return (\n      WebApiRequest.builder(this.getAccessToken())\n        .withPath('/v1/me/player/pause')\n        /*jshint camelcase: false */\n        .withQueryParameters(\n          options && options.device_id ? { device_id: options.device_id } : null\n        )\n        .withHeaders({ 'Content-Type': 'application/json' })\n        .build()\n        .execute(HttpManager.put, callback)\n    );\n  },\n\n  /**\n   * Skip the Current User's Playback To Previous Track\n   * @param {Object} [options] Options, being device_id. If left empty will target the user's currently active device.\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @example skipToPrevious().then(...)\n   * @returns {Promise|undefined} A promise that if successful, resolves into an empty response,\n   *          otherwise an error. Not returned if a callback is given.\n   */\n  skipToPrevious: function(options, callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/me/player/previous')\n      .withQueryParameters(\n        options && options.device_id ? { device_id: options.device_id } : null\n      )\n      .build()\n      .execute(HttpManager.post, callback);\n  },\n\n  /**\n   * Skip the Current User's Playback To Next Track\n   * @param {Object} [options] Options, being device_id. If left empty will target the user's currently active device.\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @example skipToNext().then(...)\n   * @returns {Promise|undefined} A promise that if successful, resolves into an empty response,\n   *          otherwise an error. Not returned if a callback is given.\n   */\n  skipToNext: function(options, callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/me/player/next')\n      .withQueryParameters(\n        options && options.device_id ? { device_id: options.device_id } : null\n      )\n      .build()\n      .execute(HttpManager.post, callback);\n  },\n\n  /**\n   * Seeks to the given position in the users currently playing track.\n   *\n   * @param {number} positionMs The position in milliseconds to seek to. Must be a positive number.\n   * @param {Object} options Options, being device_id. If left empty will target the user's currently active device.\n   * @param {function(Object,Object)} callback An optional callback that receives 2 parameters. The first\n   * one is the error object (null if no error), and the second is the value if the request succeeded.\n   * @return {Object} Null if a callback is provided, a `Promise` object otherwise\n   */\n  seek: function(positionMs, options, callback) {\n    var params = {\n      /* jshint camelcase: false */\n      position_ms: positionMs\n    };\n    if (options && 'device_id' in options) {\n      /* jshint camelcase: false */\n      params.device_id = options.device_id;\n    }\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/me/player/seek')\n      .withQueryParameters(params)\n      .build()\n      .execute(HttpManager.put, callback);\n  },\n\n  /**\n   * Set Repeat Mode On The Current User's Playback\n   * @param {string} [state] State (track, context, or off)\n   * @param {Object} [options] Options, being device_id. If left empty will target the user's currently active device.\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @example setRepeat('context', {}).then(...)\n   * @returns {Promise|undefined} A promise that if successful, resolves into an empty response,\n   *          otherwise an error. Not returned if a callback is given.\n   */\n  setRepeat: function(state, options, callback) {\n    var params = {\n      state: state\n    };\n    if (options && 'device_id' in options) {\n      /* jshint camelcase: false */\n      params.device_id = options.device_id;\n    }\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/me/player/repeat')\n      .withQueryParameters(params)\n      .build()\n      .execute(HttpManager.put, callback);\n  },\n\n  /**\n   * Set Shuffle Mode On The Current User's Playback\n   * @param {boolean} [state] State \n   * @param {Object} [options] Options, being device_id. If left empty will target the user's currently active device.\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @example setShuffle({state: 'false'}).then(...)\n   * @returns {Promise|undefined} A promise that if successful, resolves into an empty response,\n   *          otherwise an error. Not returned if a callback is given.\n   */\n  setShuffle: function(state, options, callback) {\n    var params = {\n      state: state\n    };\n    if (options && 'device_id' in options) {\n      /* jshint camelcase: false */\n      params.device_id = options.device_id;\n    }\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/me/player/shuffle')\n      .withQueryParameters(params)\n      .build()\n      .execute(HttpManager.put, callback);\n  },\n\n  /**\n   * Set the volume for the users current playback device.\n   * @param {number} volumePercent The volume to set. Must be a value from 0 to 100.\n   * @param {Object} options Options, being device_id. If left empty will target the user's currently active device.\n   * @param {function(Object,Object)} callback An optional callback that receives 2 parameters. The first\n   * one is the error object (null if no error), and the second is the value if the request succeeded.\n   * @return {Object} Null if a callback is provided, a `Promise` object otherwise\n   */\n  setVolume: function(volumePercent, options, callback) {\n    var params = {\n      /* jshint camelcase: false */\n      volume_percent: volumePercent\n    };\n    if (options && 'device_id' in options) {\n      /* jshint camelcase: false */\n      params.device_id = options.device_id;\n    }\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/me/player/volume')\n      .withQueryParameters(params)\n      .build()\n      .execute(HttpManager.put, callback);\n  },\n\n  /**\n   * Add the current user as a follower of one or more other Spotify users.\n   * @param {string[]} userIds The IDs of the users to be followed.\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @example followUsers(['thelinmichael', 'wizzler']).then(...)\n   * @returns {Promise|undefined} A promise that if successful, simply resolves to an empty object. If rejected,\n   *          it contains an error object. Not returned if a callback is given.\n   */\n  followUsers: function(userIds, callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/me/following')\n      .withQueryParameters({\n        ids: userIds.join(','),\n        type: 'user'\n      })\n      .build()\n      .execute(HttpManager.put, callback);\n  },\n\n  /**\n   * Add the current user as a follower of one or more artists.\n   * @param {string[]} artistIds The IDs of the artists to be followed.\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @example followArtists(['0LcJLqbBmaGUft1e9Mm8HV', '3gqv1kgivAc92KnUm4elKv']).then(...)\n   * @returns {Promise|undefined} A promise that if successful, simply resolves to an empty object. If rejected,\n   *          it contains an error object. Not returned if a callback is given.\n   */\n  followArtists: function(artistIds, callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/me/following')\n      .withQueryParameters({\n        ids: artistIds.join(','),\n        type: 'artist'\n      })\n      .build()\n      .execute(HttpManager.put, callback);\n  },\n\n  /**\n   * Remove the current user as a follower of one or more other Spotify users.\n   * @param {string[]} userIds The IDs of the users to be unfollowed.\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @example unfollowUsers(['thelinmichael', 'wizzler']).then(...)\n   * @returns {Promise|undefined} A promise that if successful, simply resolves to an empty object. If rejected,\n   *          it contains an error object. Not returned if a callback is given.\n   */\n  unfollowUsers: function(userIds, callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/me/following')\n      .withQueryParameters({\n        ids: userIds.join(','),\n        type: 'user'\n      })\n      .build()\n      .execute(HttpManager.del, callback);\n  },\n\n  /**\n   * Remove the current user as a follower of one or more artists.\n   * @param {string[]} artistIds The IDs of the artists to be unfollowed.\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @example unfollowArtists(['0LcJLqbBmaGUft1e9Mm8HV', '3gqv1kgivAc92KnUm4elKv']).then(...)\n   * @returns {Promise|undefined} A promise that if successful, simply resolves to an empty object. If rejected,\n   *          it contains an error object. Not returned if a callback is given.\n   */\n  unfollowArtists: function(artistIds, callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/me/following')\n      .withQueryParameters({\n        ids: artistIds.join(','),\n        type: 'artist'\n      })\n      .build()\n      .execute(HttpManager.del, callback);\n  },\n\n  /**\n   * Check to see if the current user is following one or more other Spotify users.\n   * @param {string[]} userIds The IDs of the users to check if are followed by the current user.\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @example isFollowingUsers(['thelinmichael', 'wizzler']).then(...)\n   * @returns {Promise|undefined} A promise that if successful, resolves into an array of booleans. The order\n   *          of the returned array's elements correspond to the users IDs in the request.\n   *          The boolean value of true indicates that the user is following that user, otherwise is not.\n   *          Not returned if a callback is given.\n   */\n  isFollowingUsers: function(userIds, callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/me/following/contains')\n      .withQueryParameters({\n        ids: userIds.join(','),\n        type: 'user'\n      })\n      .build()\n      .execute(HttpManager.get, callback);\n  },\n\n  /**\n   * Get the current user's followed artists.\n   * @param {Object} [options] Options, being after and limit.\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @returns {Promise|undefined} A promise that if successful, resolves to an object containing a paging object which contains\n   * album objects. Not returned if a callback is given.\n   */\n  getFollowedArtists: function(options, callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/me/following')\n      .withQueryParameters(\n        {\n          type: 'artist'\n        },\n        options\n      )\n      .build()\n      .execute(HttpManager.get, callback);\n  },\n\n  /**\n   * Check if users are following a playlist.\n   * @param {string} userId The playlist's owner's user ID\n   * @param {string} playlistId The playlist's ID\n   * @param {String[]} User IDs of the following users\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @returns {Promise|undefined} A promise that if successful returns an array of booleans. If rejected,\n   * it contains an error object. Not returned if a callback is given.\n   */\n  areFollowingPlaylist: function(userId, playlistId, followerIds, callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath(\n        '/v1/users/' +\n          encodeURIComponent(userId) +\n          '/playlists/' +\n          playlistId +\n          '/followers/contains'\n      )\n      .withQueryParameters({\n        ids: followerIds.join(',')\n      })\n      .build()\n      .execute(HttpManager.get, callback);\n  },\n\n  /**\n   * Check to see if the current user is following one or more artists.\n   * @param {string[]} artistIds The IDs of the artists to check if are followed by the current user.\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @example isFollowingArtists(['0LcJLqbBmaGUft1e9Mm8HV', '3gqv1kgivAc92KnUm4elKv']).then(...)\n   * @returns {Promise|undefined} A promise that if successful, resolves into an array of booleans. The order\n   *          of the returned array's elements correspond to the artists IDs in the request.\n   *          The boolean value of true indicates that the user is following that artist, otherwise is not.\n   *          Not returned if a callback is given.\n   */\n  isFollowingArtists: function(artistIds, callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/me/following/contains')\n      .withQueryParameters({\n        ids: artistIds.join(','),\n        type: 'artist'\n      })\n      .build()\n      .execute(HttpManager.get, callback);\n  },\n\n  /**\n   * Retrieve new releases\n   * @param {Object} [options] Options, being country, limit and/or offset.\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @returns {Promise|undefined} A promise that if successful, resolves to an object containing a paging object which contains\n   * album objects. Not returned if a callback is given.\n   */\n  getNewReleases: function(options, callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/browse/new-releases')\n      .withQueryParameters(options)\n      .build()\n      .execute(HttpManager.get, callback);\n  },\n\n  /**\n   * Retrieve featured playlists\n   * @param {Object} [options] Options, being country, locale, timestamp, limit, offset.\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @returns {Promise|undefined} A promise that if successful, resolves to an object containing a paging object which contains\n   * featured playlists. Not returned if a callback is given.\n   */\n  getFeaturedPlaylists: function(options, callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/browse/featured-playlists')\n      .withQueryParameters(options)\n      .build()\n      .execute(HttpManager.get, callback);\n  },\n\n  /**\n   * Retrieve a list of categories used to tag items in Spotify (e.g. in the 'Browse' tab)\n   * @param {Object} [options] Options, being country, locale, limit, offset.\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @returns {Promise|undefined} A promise that if successful, resolves to an object containing a paging object of categories.\n   * Not returned if a callback is given.\n   */\n  getCategories: function(options, callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/browse/categories')\n      .withQueryParameters(options)\n      .build()\n      .execute(HttpManager.get, callback);\n  },\n\n  /**\n   * Retrieve a category.\n   * @param {string} categoryId The id of the category to retrieve.\n   * @param {Object} [options] Options, being country, locale.\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @returns {Promise|undefined} A promise that if successful, resolves to an object containing a category object.\n   * Not returned if a callback is given.\n   */\n  getCategory: function(categoryId, options, callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/browse/categories/' + categoryId)\n      .withQueryParameters(options)\n      .build()\n      .execute(HttpManager.get, callback);\n  },\n\n  /**\n   * Retrieve playlists for a category.\n   * @param {string} categoryId The id of the category to retrieve playlists for.\n   * @param {Object} [options] Options, being country, limit, offset.\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @returns {Promise|undefined} A promise that if successful, resolves to a paging object containing simple playlists.\n   * Not returned if a callback is given.\n   */\n  getPlaylistsForCategory: function(categoryId, options, callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/browse/categories/' + categoryId + '/playlists')\n      .withQueryParameters(options)\n      .build()\n      .execute(HttpManager.get, callback);\n  },\n\n  /**\n   * Get a show.\n   * @param {string} showId The show's ID.\n   * @param {Object} [options] The possible options, currently only market.\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @example getShow('3Qm86XLflmIXVm1wcwkgDK').then(...)\n   * @returns {Promise|undefined} A promise that if successful, returns an object containing information\n   *          about the show. Not returned if a callback is given.\n   */\n  getShow: function(showId, options, callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n    .withPath('/v1/shows/' + showId)\n    .withQueryParameters(options)\n    .build()\n    .execute(HttpManager.get, callback);\n  },\n\n  /**\n   * Look up several shows.\n   * @param {string[]} showIds The IDs of the shows.\n   * @param {Object} [options] The possible options, currently only market.\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @example getShows(['0oSGxfWSnnOXhD2fKuz2Gy', '3dBVyJ7JuOMt4GE9607Qin']).then(...)\n   * @returns {Promise|undefined} A promise that if successful, returns an object containing information\n   *          about the shows. Not returned if a callback is given.\n   */\n  getShows: function(showIds, options, callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/shows')\n      .withQueryParameters(\n        {\n          ids: showIds.join(',')\n        },\n        options\n      )\n      .build()\n      .execute(HttpManager.get, callback);\n  },\n\n  /**\n   * Check if one or more shows is already saved in the current Spotify users Your Music library.\n   * @param {string[]} showIds The show IDs\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @returns {Promise|undefined} A promise that if successful, resolves into an array of booleans. The order\n   * of the returned array's elements correspond to the show ID in the request.\n   * The boolean value of true indicates that the show is part of the user's library, otherwise false.\n   * Not returned if a callback is given.\n   */\n  containsMySavedShows: function(showIds, callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/me/shows/contains')\n      .withQueryParameters({\n        ids: showIds.join(',')\n      })\n      .build()\n      .execute(HttpManager.get, callback);\n  },\n\n  /**\n   * Remove an show from the authenticated user's Your Music library.\n   * @param {string[]} showIds The show IDs\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @returns {Promise|undefined} A promise that if successful returns null, otherwise an error.\n   * Not returned if a callback is given.\n   */\n  removeFromMySavedShows: function(showIds, callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/me/shows')\n      .withHeaders({ 'Content-Type': 'application/json' })\n      .withBodyParameters(showIds)\n      .build()\n      .execute(HttpManager.del, callback);\n  },\n\n  /**\n   * Add a show from the authenticated user's Your Music library.\n   * @param {string[]} showIds The show IDs\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @returns {Promise|undefined} A promise that if successful returns null, otherwise an error. Not returned if a callback is given.\n   */\n  addToMySavedShows: function(showIds, callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/me/shows')\n      .withHeaders({ 'Content-Type': 'application/json' })\n      .withBodyParameters(showIds)\n      .build()\n      .execute(HttpManager.put, callback);\n  },\n\n  /**\n   * Retrieve the shows that are saved to the authenticated users Your Music library.\n   * @param {Object} [options] Options, being market, limit, and/or offset.\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @returns {Promise|undefined} A promise that if successful, resolves to an object containing a paging object which in turn contains\n   *          playlist show objects. Not returned if a callback is given.\n   */\n  getMySavedShows: function(options, callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/me/shows')\n      .withQueryParameters(options)\n      .build()\n      .execute(HttpManager.get, callback);\n  },\n\n  /**\n   * Get the episodes of an show.\n   * @param showId the show's ID.\n   * @options {Object} [options] The possible options, being limit, offset, and market.\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @example getShowEpisodes('41MnTivkwTO3UUJ8DrqEJJ', { limit : 5, offset : 1 }).then(...)\n   * @returns {Promise|undefined} A promise that if successful, returns an object containing the\n   *                    episodes in the album. The result is paginated. If the promise is rejected.\n   *                    it contains an error object. Not returned if a callback is given.\n   */\n  getShowEpisodes: function(showId, options, callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/shows/' + showId + '/episodes')\n      .withQueryParameters(options)\n      .build()\n      .execute(HttpManager.get, callback);\n  },\n\n  /**\n   * Search for a show.\n   * @param {string} query The search query.\n   * @param {Object} [options] The possible options, e.g. limit, offset.\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @example searchShows('Space Oddity', { limit : 5, offset : 1 }).then(...)\n   * @returns {Promise|undefined} A promise that if successful, returns an object containing the\n   *          search results. The result is paginated. If the promise is rejected,\n   *          it contains an error object. Not returned if a callback is given.\n   */\n  searchShows: function(query, options, callback) {\n    return this.search(query, ['show'], options, callback);\n  },\n\n  /**\n   * Search for an episode.\n   * @param {string} query The search query.\n   * @param {Object} [options] The possible options, e.g. limit, offset.\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @example searchEpisodes('Space Oddity', { limit : 5, offset : 1 }).then(...)\n   * @returns {Promise|undefined} A promise that if successful, returns an object containing the\n   *          search results. The result is paginated. If the promise is rejected,\n   *          it contains an error object. Not returned if a callback is given.\n   */\n  searchEpisodes: function(query, options, callback) {\n    return this.search(query, ['episode'], options, callback);\n  },\n\n /**\n   * Look up an episode.\n   * @param {string} episodeId The episode's ID.\n   * @param {Object} [options] The possible options, currently only market.\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @example getEpisode('3Qm86XLflmIXVm1wcwkgDK').then(...)\n   * @returns {Promise|undefined} A promise that if successful, returns an object containing information\n   *          about the episode. Not returned if a callback is given.\n   */\n  getEpisode: function(episodeId, options, callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/episodes/' + episodeId)\n      .withQueryParameters(options)\n      .build()\n      .execute(HttpManager.get, callback);\n  },\n\n  /**\n   * Look up several episodes.\n   * @param {string[]} episodeIds The IDs of the episodes.\n   * @param {Object} [options] The possible options, currently only market.\n   * @param {requestCallback} [callback] Optional callback method to be called instead of the promise.\n   * @example getEpisodes(['0oSGxfWSnnOXhD2fKuz2Gy', '3dBVyJ7JuOMt4GE9607Qin']).then(...)\n   * @returns {Promise|undefined} A promise that if successful, returns an object containing information\n   *          about the episodes. Not returned if a callback is given.\n   */\n  getEpisodes: function(episodeIds, options, callback) {\n    return WebApiRequest.builder(this.getAccessToken())\n      .withPath('/v1/episodes')\n      .withQueryParameters(\n        {\n          ids: episodeIds.join(',')\n        },\n        options\n      )\n      .build()\n      .execute(HttpManager.get, callback);\n  },\n};\n\nSpotifyWebApi._addMethods = function(methods) {\n  for (var i in methods) {\n    if (methods.hasOwnProperty(i)) {\n      this.prototype[i] = methods[i];\n    }\n  }\n};\n\nmodule.exports = SpotifyWebApi;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvc3BvdGlmeS13ZWItYXBpLW5vZGUvc3JjL3Nwb3RpZnktd2ViLWFwaS5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYiw0QkFBNEIsbUJBQU8sQ0FBQyx5R0FBMEI7QUFDOUQsa0JBQWtCLG1CQUFPLENBQUMseUZBQWtCO0FBQzVDLGdCQUFnQixtQkFBTyxDQUFDLHFGQUFnQjs7QUFFeEM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQixhQUFhLFFBQVE7QUFDckIsYUFBYSxpQkFBaUI7QUFDOUI7QUFDQSxlQUFlLG1CQUFtQjtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsYUFBYSxVQUFVO0FBQ3ZC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QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsYUFBYSxVQUFVO0FBQ3ZCLGFBQWEsUUFBUTtBQUNyQixhQUFhLGlCQUFpQjtBQUM5QjtBQUNBLGVBQWUsbUJBQW1CO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zb25nLWd1ZXNzZXIvLi9ub2RlX21vZHVsZXMvc3BvdGlmeS13ZWItYXBpLW5vZGUvc3JjL3Nwb3RpZnktd2ViLWFwaS5qcz83MjI4Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxudmFyIEF1dGhlbnRpY2F0aW9uUmVxdWVzdCA9IHJlcXVpcmUoJy4vYXV0aGVudGljYXRpb24tcmVxdWVzdCcpLFxuICBXZWJBcGlSZXF1ZXN0ID0gcmVxdWlyZSgnLi93ZWJhcGktcmVxdWVzdCcpLFxuICBIdHRwTWFuYWdlciA9IHJlcXVpcmUoJy4vaHR0cC1tYW5hZ2VyJyk7XG5cbmZ1bmN0aW9uIFNwb3RpZnlXZWJBcGkoY3JlZGVudGlhbHMpIHtcbiAgdGhpcy5fY3JlZGVudGlhbHMgPSBjcmVkZW50aWFscyB8fCB7fTtcbn1cblxuU3BvdGlmeVdlYkFwaS5wcm90b3R5cGUgPSB7XG4gIHNldENyZWRlbnRpYWxzOiBmdW5jdGlvbihjcmVkZW50aWFscykge1xuICAgIGZvciAodmFyIGtleSBpbiBjcmVkZW50aWFscykge1xuICAgICAgaWYgKGNyZWRlbnRpYWxzLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgdGhpcy5fY3JlZGVudGlhbHNba2V5XSA9IGNyZWRlbnRpYWxzW2tleV07XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIGdldENyZWRlbnRpYWxzOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fY3JlZGVudGlhbHM7XG4gIH0sXG5cbiAgcmVzZXRDcmVkZW50aWFsczogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5fY3JlZGVudGlhbHMgPSBudWxsO1xuICB9LFxuXG4gIHNldENsaWVudElkOiBmdW5jdGlvbihjbGllbnRJZCkge1xuICAgIHRoaXMuX3NldENyZWRlbnRpYWwoJ2NsaWVudElkJywgY2xpZW50SWQpO1xuICB9LFxuXG4gIHNldENsaWVudFNlY3JldDogZnVuY3Rpb24oY2xpZW50U2VjcmV0KSB7XG4gICAgdGhpcy5fc2V0Q3JlZGVudGlhbCgnY2xpZW50U2VjcmV0JywgY2xpZW50U2VjcmV0KTtcbiAgfSxcblxuICBzZXRBY2Nlc3NUb2tlbjogZnVuY3Rpb24oYWNjZXNzVG9rZW4pIHtcbiAgICB0aGlzLl9zZXRDcmVkZW50aWFsKCdhY2Nlc3NUb2tlbicsIGFjY2Vzc1Rva2VuKTtcbiAgfSxcblxuICBzZXRSZWZyZXNoVG9rZW46IGZ1bmN0aW9uKHJlZnJlc2hUb2tlbikge1xuICAgIHRoaXMuX3NldENyZWRlbnRpYWwoJ3JlZnJlc2hUb2tlbicsIHJlZnJlc2hUb2tlbik7XG4gIH0sXG5cbiAgc2V0UmVkaXJlY3RVUkk6IGZ1bmN0aW9uKHJlZGlyZWN0VXJpKSB7XG4gICAgdGhpcy5fc2V0Q3JlZGVudGlhbCgncmVkaXJlY3RVcmknLCByZWRpcmVjdFVyaSk7XG4gIH0sXG5cbiAgZ2V0UmVkaXJlY3RVUkk6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl9nZXRDcmVkZW50aWFsKCdyZWRpcmVjdFVyaScpO1xuICB9LFxuXG4gIGdldENsaWVudElkOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fZ2V0Q3JlZGVudGlhbCgnY2xpZW50SWQnKTtcbiAgfSxcblxuICBnZXRDbGllbnRTZWNyZXQ6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl9nZXRDcmVkZW50aWFsKCdjbGllbnRTZWNyZXQnKTtcbiAgfSxcblxuICBnZXRBY2Nlc3NUb2tlbjogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2dldENyZWRlbnRpYWwoJ2FjY2Vzc1Rva2VuJyk7XG4gIH0sXG5cbiAgZ2V0UmVmcmVzaFRva2VuOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fZ2V0Q3JlZGVudGlhbCgncmVmcmVzaFRva2VuJyk7XG4gIH0sXG5cbiAgcmVzZXRDbGllbnRJZDogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5fcmVzZXRDcmVkZW50aWFsKCdjbGllbnRJZCcpO1xuICB9LFxuXG4gIHJlc2V0Q2xpZW50U2VjcmV0OiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl9yZXNldENyZWRlbnRpYWwoJ2NsaWVudFNlY3JldCcpO1xuICB9LFxuXG4gIHJlc2V0QWNjZXNzVG9rZW46IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuX3Jlc2V0Q3JlZGVudGlhbCgnYWNjZXNzVG9rZW4nKTtcbiAgfSxcblxuICByZXNldFJlZnJlc2hUb2tlbjogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5fcmVzZXRDcmVkZW50aWFsKCdyZWZyZXNoVG9rZW4nKTtcbiAgfSxcblxuICByZXNldFJlZGlyZWN0VVJJOiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl9yZXNldENyZWRlbnRpYWwoJ3JlZGlyZWN0VXJpJyk7XG4gIH0sXG5cbiAgX3NldENyZWRlbnRpYWw6IGZ1bmN0aW9uKGNyZWRlbnRpYWxLZXksIHZhbHVlKSB7XG4gICAgdGhpcy5fY3JlZGVudGlhbHMgPSB0aGlzLl9jcmVkZW50aWFscyB8fCB7fTtcbiAgICB0aGlzLl9jcmVkZW50aWFsc1tjcmVkZW50aWFsS2V5XSA9IHZhbHVlO1xuICB9LFxuXG4gIF9nZXRDcmVkZW50aWFsOiBmdW5jdGlvbihjcmVkZW50aWFsS2V5KSB7XG4gICAgaWYgKCF0aGlzLl9jcmVkZW50aWFscykge1xuICAgICAgcmV0dXJuO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5fY3JlZGVudGlhbHNbY3JlZGVudGlhbEtleV07XG4gICAgfVxuICB9LFxuXG4gIF9yZXNldENyZWRlbnRpYWw6IGZ1bmN0aW9uKGNyZWRlbnRpYWxLZXkpIHtcbiAgICBpZiAoIXRoaXMuX2NyZWRlbnRpYWxzKSB7XG4gICAgICByZXR1cm47XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2NyZWRlbnRpYWxzW2NyZWRlbnRpYWxLZXldID0gbnVsbDtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIExvb2sgdXAgYSB0cmFjay5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHRyYWNrSWQgVGhlIHRyYWNrJ3MgSUQuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gVGhlIHBvc3NpYmxlIG9wdGlvbnMsIGN1cnJlbnRseSBvbmx5IG1hcmtldC5cbiAgICogQHBhcmFtIHtyZXF1ZXN0Q2FsbGJhY2t9IFtjYWxsYmFja10gT3B0aW9uYWwgY2FsbGJhY2sgbWV0aG9kIHRvIGJlIGNhbGxlZCBpbnN0ZWFkIG9mIHRoZSBwcm9taXNlLlxuICAgKiBAZXhhbXBsZSBnZXRUcmFjaygnM1FtODZYTGZsbUlYVm0xd2N3a2dESycpLnRoZW4oLi4uKVxuICAgKiBAcmV0dXJucyB7UHJvbWlzZXx1bmRlZmluZWR9IEEgcHJvbWlzZSB0aGF0IGlmIHN1Y2Nlc3NmdWwsIHJldHVybnMgYW4gb2JqZWN0IGNvbnRhaW5pbmcgaW5mb3JtYXRpb25cbiAgICogICAgICAgICAgYWJvdXQgdGhlIHRyYWNrLiBOb3QgcmV0dXJuZWQgaWYgYSBjYWxsYmFjayBpcyBnaXZlbi5cbiAgICovXG4gIGdldFRyYWNrOiBmdW5jdGlvbih0cmFja0lkLCBvcHRpb25zLCBjYWxsYmFjaykge1xuICAgIHJldHVybiBXZWJBcGlSZXF1ZXN0LmJ1aWxkZXIodGhpcy5nZXRBY2Nlc3NUb2tlbigpKVxuICAgICAgLndpdGhQYXRoKCcvdjEvdHJhY2tzLycgKyB0cmFja0lkKVxuICAgICAgLndpdGhRdWVyeVBhcmFtZXRlcnMob3B0aW9ucylcbiAgICAgIC5idWlsZCgpXG4gICAgICAuZXhlY3V0ZShIdHRwTWFuYWdlci5nZXQsIGNhbGxiYWNrKTtcbiAgfSxcblxuICAvKipcbiAgICogTG9vayB1cCBzZXZlcmFsIHRyYWNrcy5cbiAgICogQHBhcmFtIHtzdHJpbmdbXX0gdHJhY2tJZHMgVGhlIElEcyBvZiB0aGUgYXJ0aXN0cy5cbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBUaGUgcG9zc2libGUgb3B0aW9ucywgY3VycmVudGx5IG9ubHkgbWFya2V0LlxuICAgKiBAcGFyYW0ge3JlcXVlc3RDYWxsYmFja30gW2NhbGxiYWNrXSBPcHRpb25hbCBjYWxsYmFjayBtZXRob2QgdG8gYmUgY2FsbGVkIGluc3RlYWQgb2YgdGhlIHByb21pc2UuXG4gICAqIEBleGFtcGxlIGdldEFydGlzdHMoWycwb1NHeGZXU25uT1hoRDJmS3V6Mkd5JywgJzNkQlZ5SjdKdU9NdDRHRTk2MDdRaW4nXSkudGhlbiguLi4pXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfHVuZGVmaW5lZH0gQSBwcm9taXNlIHRoYXQgaWYgc3VjY2Vzc2Z1bCwgcmV0dXJucyBhbiBvYmplY3QgY29udGFpbmluZyBpbmZvcm1hdGlvblxuICAgKiAgICAgICAgICBhYm91dCB0aGUgYXJ0aXN0cy4gTm90IHJldHVybmVkIGlmIGEgY2FsbGJhY2sgaXMgZ2l2ZW4uXG4gICAqL1xuICBnZXRUcmFja3M6IGZ1bmN0aW9uKHRyYWNrSWRzLCBvcHRpb25zLCBjYWxsYmFjaykge1xuICAgIHJldHVybiBXZWJBcGlSZXF1ZXN0LmJ1aWxkZXIodGhpcy5nZXRBY2Nlc3NUb2tlbigpKVxuICAgICAgLndpdGhQYXRoKCcvdjEvdHJhY2tzJylcbiAgICAgIC53aXRoUXVlcnlQYXJhbWV0ZXJzKFxuICAgICAgICB7XG4gICAgICAgICAgaWRzOiB0cmFja0lkcy5qb2luKCcsJylcbiAgICAgICAgfSxcbiAgICAgICAgb3B0aW9uc1xuICAgICAgKVxuICAgICAgLmJ1aWxkKClcbiAgICAgIC5leGVjdXRlKEh0dHBNYW5hZ2VyLmdldCwgY2FsbGJhY2spO1xuICB9LFxuXG4gIC8qKlxuICAgKiBMb29rIHVwIGFuIGFsYnVtLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gYWxidW1JZCBUaGUgYWxidW0ncyBJRC5cbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBUaGUgcG9zc2libGUgb3B0aW9ucywgY3VycmVudGx5IG9ubHkgbWFya2V0LlxuICAgKiBAcGFyYW0ge3JlcXVlc3RDYWxsYmFja30gW2NhbGxiYWNrXSBPcHRpb25hbCBjYWxsYmFjayBtZXRob2QgdG8gYmUgY2FsbGVkIGluc3RlYWQgb2YgdGhlIHByb21pc2UuXG4gICAqIEBleGFtcGxlIGdldEFsYnVtKCcwc05PRjlXRHdoV3VuTkFIUEQzQmFqJykudGhlbiguLi4pXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfHVuZGVmaW5lZH0gQSBwcm9taXNlIHRoYXQgaWYgc3VjY2Vzc2Z1bCwgcmV0dXJucyBhbiBvYmplY3QgY29udGFpbmluZyBpbmZvcm1hdGlvblxuICAgKiAgICAgICAgICBhYm91dCB0aGUgYWxidW0uIE5vdCByZXR1cm5lZCBpZiBhIGNhbGxiYWNrIGlzIGdpdmVuLlxuICAgKi9cbiAgZ2V0QWxidW06IGZ1bmN0aW9uKGFsYnVtSWQsIG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIFdlYkFwaVJlcXVlc3QuYnVpbGRlcih0aGlzLmdldEFjY2Vzc1Rva2VuKCkpXG4gICAgICAud2l0aFBhdGgoJy92MS9hbGJ1bXMvJyArIGFsYnVtSWQpXG4gICAgICAud2l0aFF1ZXJ5UGFyYW1ldGVycyhvcHRpb25zKVxuICAgICAgLmJ1aWxkKClcbiAgICAgIC5leGVjdXRlKEh0dHBNYW5hZ2VyLmdldCwgY2FsbGJhY2spO1xuICB9LFxuXG4gIC8qKlxuICAgKiBMb29rIHVwIHNldmVyYWwgYWxidW1zLlxuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSBhbGJ1bUlkcyBUaGUgSURzIG9mIHRoZSBhbGJ1bXMuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gVGhlIHBvc3NpYmxlIG9wdGlvbnMsIGN1cnJlbnRseSBvbmx5IG1hcmtldC5cbiAgICogQHBhcmFtIHtyZXF1ZXN0Q2FsbGJhY2t9IFtjYWxsYmFja10gT3B0aW9uYWwgY2FsbGJhY2sgbWV0aG9kIHRvIGJlIGNhbGxlZCBpbnN0ZWFkIG9mIHRoZSBwcm9taXNlLlxuICAgKiBAZXhhbXBsZSBnZXRBbGJ1bXMoWycwb1NHeGZXU25uT1hoRDJmS3V6Mkd5JywgJzNkQlZ5SjdKdU9NdDRHRTk2MDdRaW4nXSkudGhlbiguLi4pXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfHVuZGVmaW5lZH0gQSBwcm9taXNlIHRoYXQgaWYgc3VjY2Vzc2Z1bCwgcmV0dXJucyBhbiBvYmplY3QgY29udGFpbmluZyBpbmZvcm1hdGlvblxuICAgKiAgICAgICAgICBhYm91dCB0aGUgYWxidW1zLiBOb3QgcmV0dXJuZWQgaWYgYSBjYWxsYmFjayBpcyBnaXZlbi5cbiAgICovXG4gIGdldEFsYnVtczogZnVuY3Rpb24oYWxidW1JZHMsIG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIFdlYkFwaVJlcXVlc3QuYnVpbGRlcih0aGlzLmdldEFjY2Vzc1Rva2VuKCkpXG4gICAgICAud2l0aFBhdGgoJy92MS9hbGJ1bXMnKVxuICAgICAgLndpdGhRdWVyeVBhcmFtZXRlcnMoXG4gICAgICAgIHtcbiAgICAgICAgICBpZHM6IGFsYnVtSWRzLmpvaW4oJywnKVxuICAgICAgICB9LFxuICAgICAgICBvcHRpb25zXG4gICAgICApXG4gICAgICAuYnVpbGQoKVxuICAgICAgLmV4ZWN1dGUoSHR0cE1hbmFnZXIuZ2V0LCBjYWxsYmFjayk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIExvb2sgdXAgYW4gYXJ0aXN0LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gYXJ0aXN0SWQgVGhlIGFydGlzdCdzIElELlxuICAgKiBAcGFyYW0ge3JlcXVlc3RDYWxsYmFja30gW2NhbGxiYWNrXSBPcHRpb25hbCBjYWxsYmFjayBtZXRob2QgdG8gYmUgY2FsbGVkIGluc3RlYWQgb2YgdGhlIHByb21pc2UuXG4gICAqIEBleGFtcGxlIGFwaS5nZXRBcnRpc3QoJzF1N2trVnJyMTRpQnZycFluWklMSlInKS50aGVuKC4uLilcbiAgICogQHJldHVybnMge1Byb21pc2V8dW5kZWZpbmVkfSBBIHByb21pc2UgdGhhdCBpZiBzdWNjZXNzZnVsLCByZXR1cm5zIGFuIG9iamVjdCBjb250YWluaW5nIGluZm9ybWF0aW9uXG4gICAqICAgICAgICAgIGFib3V0IHRoZSBhcnRpc3QuIE5vdCByZXR1cm5lZCBpZiBhIGNhbGxiYWNrIGlzIGdpdmVuLlxuICAgKi9cbiAgZ2V0QXJ0aXN0OiBmdW5jdGlvbihhcnRpc3RJZCwgY2FsbGJhY2spIHtcbiAgICByZXR1cm4gV2ViQXBpUmVxdWVzdC5idWlsZGVyKHRoaXMuZ2V0QWNjZXNzVG9rZW4oKSlcbiAgICAgIC53aXRoUGF0aCgnL3YxL2FydGlzdHMvJyArIGFydGlzdElkKVxuICAgICAgLmJ1aWxkKClcbiAgICAgIC5leGVjdXRlKEh0dHBNYW5hZ2VyLmdldCwgY2FsbGJhY2spO1xuICB9LFxuXG4gIC8qKlxuICAgKiBMb29rIHVwIHNldmVyYWwgYXJ0aXN0cy5cbiAgICogQHBhcmFtIHtzdHJpbmdbXX0gYXJ0aXN0SWRzIFRoZSBJRHMgb2YgdGhlIGFydGlzdHMuXG4gICAqIEBwYXJhbSB7cmVxdWVzdENhbGxiYWNrfSBbY2FsbGJhY2tdIE9wdGlvbmFsIGNhbGxiYWNrIG1ldGhvZCB0byBiZSBjYWxsZWQgaW5zdGVhZCBvZiB0aGUgcHJvbWlzZS5cbiAgICogQGV4YW1wbGUgZ2V0QXJ0aXN0cyhbJzBvU0d4ZldTbm5PWGhEMmZLdXoyR3knLCAnM2RCVnlKN0p1T010NEdFOTYwN1FpbiddKS50aGVuKC4uLilcbiAgICogQHJldHVybnMge1Byb21pc2V8dW5kZWZpbmVkfSBBIHByb21pc2UgdGhhdCBpZiBzdWNjZXNzZnVsLCByZXR1cm5zIGFuIG9iamVjdCBjb250YWluaW5nIGluZm9ybWF0aW9uXG4gICAqICAgICAgICAgIGFib3V0IHRoZSBhcnRpc3RzLiBOb3QgcmV0dXJuZWQgaWYgYSBjYWxsYmFjayBpcyBnaXZlbi5cbiAgICovXG4gIGdldEFydGlzdHM6IGZ1bmN0aW9uKGFydGlzdElkcywgY2FsbGJhY2spIHtcbiAgICByZXR1cm4gV2ViQXBpUmVxdWVzdC5idWlsZGVyKHRoaXMuZ2V0QWNjZXNzVG9rZW4oKSlcbiAgICAgIC53aXRoUGF0aCgnL3YxL2FydGlzdHMnKVxuICAgICAgLndpdGhRdWVyeVBhcmFtZXRlcnMoe1xuICAgICAgICBpZHM6IGFydGlzdElkcy5qb2luKCcsJylcbiAgICAgIH0pXG4gICAgICAuYnVpbGQoKVxuICAgICAgLmV4ZWN1dGUoSHR0cE1hbmFnZXIuZ2V0LCBjYWxsYmFjayk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFNlYXJjaCBmb3IgbXVzaWMgZW50aXRpZXMgb2YgY2VydGFpbiB0eXBlcy5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHF1ZXJ5IFRoZSBzZWFyY2ggcXVlcnkuXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IHR5cGVzIEFuIGFycmF5IG9mIGl0ZW0gdHlwZXMgdG8gc2VhcmNoIGFjcm9zcy5cbiAgICogVmFsaWQgdHlwZXMgYXJlOiAnYWxidW0nLCAnYXJ0aXN0JywgJ3BsYXlsaXN0JywgJ3RyYWNrJywgJ3Nob3cnLCBhbmQgJ2VwaXNvZGUnLlxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIFRoZSBwb3NzaWJsZSBvcHRpb25zLCBlLmcuIGxpbWl0LCBvZmZzZXQuXG4gICAqIEBwYXJhbSB7cmVxdWVzdENhbGxiYWNrfSBbY2FsbGJhY2tdIE9wdGlvbmFsIGNhbGxiYWNrIG1ldGhvZCB0byBiZSBjYWxsZWQgaW5zdGVhZCBvZiB0aGUgcHJvbWlzZS5cbiAgICogQGV4YW1wbGUgc2VhcmNoKCdBYmJhJywgWyd0cmFjaycsICdwbGF5bGlzdCddLCB7IGxpbWl0IDogNSwgb2Zmc2V0IDogMSB9KS50aGVuKC4uLilcbiAgICogQHJldHVybnMge1Byb21pc2V8dW5kZWZpbmVkfSBBIHByb21pc2UgdGhhdCBpZiBzdWNjZXNzZnVsLCByZXR1cm5zIGFuIG9iamVjdCBjb250YWluaW5nIHRoZVxuICAgKiAgICAgICAgICBzZWFyY2ggcmVzdWx0cy4gVGhlIHJlc3VsdCBpcyBwYWdpbmF0ZWQuIElmIHRoZSBwcm9taXNlIGlzIHJlamVjdGVkLFxuICAgKiAgICAgICAgICBpdCBjb250YWlucyBhbiBlcnJvciBvYmplY3QuIE5vdCByZXR1cm5lZCBpZiBhIGNhbGxiYWNrIGlzIGdpdmVuLlxuICAgKi9cbiAgc2VhcmNoOiBmdW5jdGlvbihxdWVyeSwgdHlwZXMsIG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIFdlYkFwaVJlcXVlc3QuYnVpbGRlcih0aGlzLmdldEFjY2Vzc1Rva2VuKCkpXG4gICAgICAud2l0aFBhdGgoJy92MS9zZWFyY2gvJylcbiAgICAgIC53aXRoUXVlcnlQYXJhbWV0ZXJzKFxuICAgICAgICB7XG4gICAgICAgICAgdHlwZTogdHlwZXMuam9pbignLCcpLFxuICAgICAgICAgIHE6IHF1ZXJ5XG4gICAgICAgIH0sXG4gICAgICAgIG9wdGlvbnNcbiAgICAgIClcbiAgICAgIC5idWlsZCgpXG4gICAgICAuZXhlY3V0ZShIdHRwTWFuYWdlci5nZXQsIGNhbGxiYWNrKTtcbiAgfSxcblxuICAvKipcbiAgICogU2VhcmNoIGZvciBhbiBhbGJ1bS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHF1ZXJ5IFRoZSBzZWFyY2ggcXVlcnkuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gVGhlIHBvc3NpYmxlIG9wdGlvbnMsIGUuZy4gbGltaXQsIG9mZnNldC5cbiAgICogQHBhcmFtIHtyZXF1ZXN0Q2FsbGJhY2t9IFtjYWxsYmFja10gT3B0aW9uYWwgY2FsbGJhY2sgbWV0aG9kIHRvIGJlIGNhbGxlZCBpbnN0ZWFkIG9mIHRoZSBwcm9taXNlLlxuICAgKiBAZXhhbXBsZSBzZWFyY2hBbGJ1bXMoJ1NwYWNlIE9kZGl0eScsIHsgbGltaXQgOiA1LCBvZmZzZXQgOiAxIH0pLnRoZW4oLi4uKVxuICAgKiBAcmV0dXJucyB7UHJvbWlzZXx1bmRlZmluZWR9IEEgcHJvbWlzZSB0aGF0IGlmIHN1Y2Nlc3NmdWwsIHJldHVybnMgYW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlXG4gICAqICAgICAgICAgIHNlYXJjaCByZXN1bHRzLiBUaGUgcmVzdWx0IGlzIHBhZ2luYXRlZC4gSWYgdGhlIHByb21pc2UgaXMgcmVqZWN0ZWQsXG4gICAqICAgICAgICAgIGl0IGNvbnRhaW5zIGFuIGVycm9yIG9iamVjdC4gTm90IHJldHVybmVkIGlmIGEgY2FsbGJhY2sgaXMgZ2l2ZW4uXG4gICAqL1xuICBzZWFyY2hBbGJ1bXM6IGZ1bmN0aW9uKHF1ZXJ5LCBvcHRpb25zLCBjYWxsYmFjaykge1xuICAgIHJldHVybiB0aGlzLnNlYXJjaChxdWVyeSwgWydhbGJ1bSddLCBvcHRpb25zLCBjYWxsYmFjayk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFNlYXJjaCBmb3IgYW4gYXJ0aXN0LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcXVlcnkgVGhlIHNlYXJjaCBxdWVyeS5cbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBUaGUgcG9zc2libGUgb3B0aW9ucywgZS5nLiBsaW1pdCwgb2Zmc2V0LlxuICAgKiBAcGFyYW0ge3JlcXVlc3RDYWxsYmFja30gW2NhbGxiYWNrXSBPcHRpb25hbCBjYWxsYmFjayBtZXRob2QgdG8gYmUgY2FsbGVkIGluc3RlYWQgb2YgdGhlIHByb21pc2UuXG4gICAqIEBleGFtcGxlIHNlYXJjaEFydGlzdHMoJ0RhdmlkIEJvd2llJywgeyBsaW1pdCA6IDUsIG9mZnNldCA6IDEgfSkudGhlbiguLi4pXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfHVuZGVmaW5lZH0gQSBwcm9taXNlIHRoYXQgaWYgc3VjY2Vzc2Z1bCwgcmV0dXJucyBhbiBvYmplY3QgY29udGFpbmluZyB0aGVcbiAgICogICAgICAgICAgc2VhcmNoIHJlc3VsdHMuIFRoZSByZXN1bHQgaXMgcGFnaW5hdGVkLiBJZiB0aGUgcHJvbWlzZSBpcyByZWplY3RlZCxcbiAgICogICAgICAgICAgaXQgY29udGFpbnMgYW4gZXJyb3Igb2JqZWN0LiBOb3QgcmV0dXJuZWQgaWYgYSBjYWxsYmFjayBpcyBnaXZlbi5cbiAgICovXG4gIHNlYXJjaEFydGlzdHM6IGZ1bmN0aW9uKHF1ZXJ5LCBvcHRpb25zLCBjYWxsYmFjaykge1xuICAgIHJldHVybiB0aGlzLnNlYXJjaChxdWVyeSwgWydhcnRpc3QnXSwgb3B0aW9ucywgY2FsbGJhY2spO1xuICB9LFxuXG4gIC8qKlxuICAgKiBTZWFyY2ggZm9yIGEgdHJhY2suXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBxdWVyeSBUaGUgc2VhcmNoIHF1ZXJ5LlxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIFRoZSBwb3NzaWJsZSBvcHRpb25zLCBlLmcuIGxpbWl0LCBvZmZzZXQuXG4gICAqIEBwYXJhbSB7cmVxdWVzdENhbGxiYWNrfSBbY2FsbGJhY2tdIE9wdGlvbmFsIGNhbGxiYWNrIG1ldGhvZCB0byBiZSBjYWxsZWQgaW5zdGVhZCBvZiB0aGUgcHJvbWlzZS5cbiAgICogQGV4YW1wbGUgc2VhcmNoVHJhY2tzKCdNci4gQnJpZ2h0c2lkZScsIHsgbGltaXQgOiAzLCBvZmZzZXQgOiAyIH0pLnRoZW4oLi4uKVxuICAgKiBAcmV0dXJucyB7UHJvbWlzZXx1bmRlZmluZWR9IEEgcHJvbWlzZSB0aGF0IGlmIHN1Y2Nlc3NmdWwsIHJldHVybnMgYW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlXG4gICAqICAgICAgICAgIHNlYXJjaCByZXN1bHRzLiBUaGUgcmVzdWx0IGlzIHBhZ2luYXRlZC4gSWYgdGhlIHByb21pc2UgaXMgcmVqZWN0ZWQsXG4gICAqICAgICAgICAgIGl0IGNvbnRhaW5zIGFuIGVycm9yIG9iamVjdC4gTm90IHJldHVybmVkIGlmIGEgY2FsbGJhY2sgaXMgZ2l2ZW4uXG4gICAqL1xuICBzZWFyY2hUcmFja3M6IGZ1bmN0aW9uKHF1ZXJ5LCBvcHRpb25zLCBjYWxsYmFjaykge1xuICAgIHJldHVybiB0aGlzLnNlYXJjaChxdWVyeSwgWyd0cmFjayddLCBvcHRpb25zLCBjYWxsYmFjayk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFNlYXJjaCBmb3IgcGxheWxpc3RzLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcXVlcnkgVGhlIHNlYXJjaCBxdWVyeS5cbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgVGhlIHBvc3NpYmxlIG9wdGlvbnMuXG4gICAqIEBwYXJhbSB7cmVxdWVzdENhbGxiYWNrfSBbY2FsbGJhY2tdIE9wdGlvbmFsIGNhbGxiYWNrIG1ldGhvZCB0byBiZSBjYWxsZWQgaW5zdGVhZCBvZiB0aGUgcHJvbWlzZS5cbiAgICogQGV4YW1wbGUgc2VhcmNoUGxheWxpc3RzKCd3b3Jrb3V0JywgeyBsaW1pdCA6IDEsIG9mZnNldCA6IDAgfSkudGhlbiguLi4pXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfHVuZGVmaW5lZH0gQSBwcm9taXNlIHRoYXQgaWYgc3VjY2Vzc2Z1bCwgcmV0dXJucyBhbiBvYmplY3QgY29udGFpbmluZyB0aGVcbiAgICogICAgICAgICAgc2VhcmNoIHJlc3VsdHMuIFRoZSByZXN1bHQgaXMgcGFnaW5hdGVkLiBJZiB0aGUgcHJvbWlzZSBpcyByZWplY3RlZCxcbiAgICogICAgICAgICAgaXQgY29udGFpbnMgYW4gZXJyb3Igb2JqZWN0LiBOb3QgcmV0dXJuZWQgaWYgYSBjYWxsYmFjayBpcyBnaXZlbi5cbiAgICovXG4gIHNlYXJjaFBsYXlsaXN0czogZnVuY3Rpb24ocXVlcnksIG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIHRoaXMuc2VhcmNoKHF1ZXJ5LCBbJ3BsYXlsaXN0J10sIG9wdGlvbnMsIGNhbGxiYWNrKTtcbiAgfSxcblxuICAvKipcbiAgICogR2V0IGFuIGFydGlzdCdzIGFsYnVtcy5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGFydGlzdElkIFRoZSBhcnRpc3QncyBJRC5cbiAgICogQG9wdGlvbnMge09iamVjdH0gW29wdGlvbnNdIFRoZSBwb3NzaWJsZSBvcHRpb25zLCBlLmcuIGxpbWl0LCBvZmZzZXQuXG4gICAqIEBwYXJhbSB7cmVxdWVzdENhbGxiYWNrfSBbY2FsbGJhY2tdIE9wdGlvbmFsIGNhbGxiYWNrIG1ldGhvZCB0byBiZSBjYWxsZWQgaW5zdGVhZCBvZiB0aGUgcHJvbWlzZS5cbiAgICogQGV4YW1wbGUgZ2V0QXJ0aXN0QWxidW1zKCcwb1NHeGZXU25uT1hoRDJmS3V6Mkd5JywgeyBhbGJ1bV90eXBlIDogJ2FsYnVtJywgY291bnRyeSA6ICdHQicsIGxpbWl0IDogMiwgb2Zmc2V0IDogNSB9KS50aGVuKC4uLilcbiAgICogQHJldHVybnMge1Byb21pc2V8dW5kZWZpbmVkfSBBIHByb21pc2UgdGhhdCBpZiBzdWNjZXNzZnVsLCByZXR1cm5zIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBhbGJ1bXNcbiAgICogICAgICAgICAgZm9yIHRoZSBnaXZlbiBhcnRpc3QuIFRoZSByZXN1bHQgaXMgcGFnaW5hdGVkLiBJZiB0aGUgcHJvbWlzZSBpcyByZWplY3RlZCxcbiAgICogICAgICAgICAgaXQgY29udGFpbnMgYW4gZXJyb3Igb2JqZWN0LiBOb3QgcmV0dXJuZWQgaWYgYSBjYWxsYmFjayBpcyBnaXZlbi5cbiAgICovXG4gIGdldEFydGlzdEFsYnVtczogZnVuY3Rpb24oYXJ0aXN0SWQsIG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIFdlYkFwaVJlcXVlc3QuYnVpbGRlcih0aGlzLmdldEFjY2Vzc1Rva2VuKCkpXG4gICAgICAud2l0aFBhdGgoJy92MS9hcnRpc3RzLycgKyBhcnRpc3RJZCArICcvYWxidW1zJylcbiAgICAgIC53aXRoUXVlcnlQYXJhbWV0ZXJzKG9wdGlvbnMpXG4gICAgICAuYnVpbGQoKVxuICAgICAgLmV4ZWN1dGUoSHR0cE1hbmFnZXIuZ2V0LCBjYWxsYmFjayk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldCB0aGUgdHJhY2tzIG9mIGFuIGFsYnVtLlxuICAgKiBAcGFyYW0gYWxidW1JZCB0aGUgYWxidW0ncyBJRC5cbiAgICogQG9wdGlvbnMge09iamVjdH0gW29wdGlvbnNdIFRoZSBwb3NzaWJsZSBvcHRpb25zLCBlLmcuIGxpbWl0LlxuICAgKiBAcGFyYW0ge3JlcXVlc3RDYWxsYmFja30gW2NhbGxiYWNrXSBPcHRpb25hbCBjYWxsYmFjayBtZXRob2QgdG8gYmUgY2FsbGVkIGluc3RlYWQgb2YgdGhlIHByb21pc2UuXG4gICAqIEBleGFtcGxlIGdldEFsYnVtVHJhY2tzKCc0MU1uVGl2a3dUTzNVVUo4RHJxRUpKJywgeyBsaW1pdCA6IDUsIG9mZnNldCA6IDEgfSkudGhlbiguLi4pXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfHVuZGVmaW5lZH0gQSBwcm9taXNlIHRoYXQgaWYgc3VjY2Vzc2Z1bCwgcmV0dXJucyBhbiBvYmplY3QgY29udGFpbmluZyB0aGVcbiAgICogICAgICAgICAgICAgICAgICAgIHRyYWNrcyBpbiB0aGUgYWxidW0uIFRoZSByZXN1bHQgaXMgcGFnaW5hdGVkLiBJZiB0aGUgcHJvbWlzZSBpcyByZWplY3RlZC5cbiAgICogICAgICAgICAgICAgICAgICAgIGl0IGNvbnRhaW5zIGFuIGVycm9yIG9iamVjdC4gTm90IHJldHVybmVkIGlmIGEgY2FsbGJhY2sgaXMgZ2l2ZW4uXG4gICAqL1xuICBnZXRBbGJ1bVRyYWNrczogZnVuY3Rpb24oYWxidW1JZCwgb3B0aW9ucywgY2FsbGJhY2spIHtcbiAgICByZXR1cm4gV2ViQXBpUmVxdWVzdC5idWlsZGVyKHRoaXMuZ2V0QWNjZXNzVG9rZW4oKSlcbiAgICAgIC53aXRoUGF0aCgnL3YxL2FsYnVtcy8nICsgYWxidW1JZCArICcvdHJhY2tzJylcbiAgICAgIC53aXRoUXVlcnlQYXJhbWV0ZXJzKG9wdGlvbnMpXG4gICAgICAuYnVpbGQoKVxuICAgICAgLmV4ZWN1dGUoSHR0cE1hbmFnZXIuZ2V0LCBjYWxsYmFjayk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldCBhbiBhcnRpc3QncyB0b3AgdHJhY2tzLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gYXJ0aXN0SWQgVGhlIGFydGlzdCdzIElELlxuICAgKiBAcGFyYW0ge3N0cmluZ30gY291bnRyeSBUaGUgY291bnRyeS90ZXJyaXRvcnkgd2hlcmUgdGhlIHRyYWNrcyBhcmUgbW9zdCBwb3B1bGFyLiAoZm9ybWF0OiBJU08gMzE2Ni0xIGFscGhhLTIpXG4gICAqIEBwYXJhbSB7cmVxdWVzdENhbGxiYWNrfSBbY2FsbGJhY2tdIE9wdGlvbmFsIGNhbGxiYWNrIG1ldGhvZCB0byBiZSBjYWxsZWQgaW5zdGVhZCBvZiB0aGUgcHJvbWlzZS5cbiAgICogQGV4YW1wbGUgZ2V0QXJ0aXN0VG9wVHJhY2tzKCcwb1NHeGZXU25uT1hoRDJmS3V6Mkd5JywgJ0dCJykudGhlbiguLi4pXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfHVuZGVmaW5lZH0gQSBwcm9taXNlIHRoYXQgaWYgc3VjY2Vzc2Z1bCwgcmV0dXJucyBhbiBvYmplY3QgY29udGFpbmluZyB0aGVcbiAgICogICAgICAgICAgYXJ0aXN0J3MgdG9wIHRyYWNrcyBpbiB0aGUgZ2l2ZW4gY291bnRyeS4gSWYgdGhlIHByb21pc2UgaXMgcmVqZWN0ZWQsXG4gICAqICAgICAgICAgIGl0IGNvbnRhaW5zIGFuIGVycm9yIG9iamVjdC4gTm90IHJldHVybmVkIGlmIGEgY2FsbGJhY2sgaXMgZ2l2ZW4uXG4gICAqL1xuICBnZXRBcnRpc3RUb3BUcmFja3M6IGZ1bmN0aW9uKGFydGlzdElkLCBjb3VudHJ5LCBjYWxsYmFjaykge1xuICAgIHJldHVybiBXZWJBcGlSZXF1ZXN0LmJ1aWxkZXIodGhpcy5nZXRBY2Nlc3NUb2tlbigpKVxuICAgICAgLndpdGhQYXRoKCcvdjEvYXJ0aXN0cy8nICsgYXJ0aXN0SWQgKyAnL3RvcC10cmFja3MnKVxuICAgICAgLndpdGhRdWVyeVBhcmFtZXRlcnMoe1xuICAgICAgICBjb3VudHJ5OiBjb3VudHJ5XG4gICAgICB9KVxuICAgICAgLmJ1aWxkKClcbiAgICAgIC5leGVjdXRlKEh0dHBNYW5hZ2VyLmdldCwgY2FsbGJhY2spO1xuICB9LFxuXG4gIC8qKlxuICAgKiBHZXQgcmVsYXRlZCBhcnRpc3RzLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gYXJ0aXN0SWQgVGhlIGFydGlzdCdzIElELlxuICAgKiBAcGFyYW0ge3JlcXVlc3RDYWxsYmFja30gW2NhbGxiYWNrXSBPcHRpb25hbCBjYWxsYmFjayBtZXRob2QgdG8gYmUgY2FsbGVkIGluc3RlYWQgb2YgdGhlIHByb21pc2UuXG4gICAqIEBleGFtcGxlIGdldEFydGlzdFJlbGF0ZWRBcnRpc3RzKCcwb1NHeGZXU25uT1hoRDJmS3V6Mkd5JykudGhlbiguLi4pXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfHVuZGVmaW5lZH0gQSBwcm9taXNlIHRoYXQgaWYgc3VjY2Vzc2Z1bCwgcmV0dXJucyBhbiBvYmplY3QgY29udGFpbmluZyB0aGVcbiAgICogICAgICAgICAgcmVsYXRlZCBhcnRpc3RzLiBJZiB0aGUgcHJvbWlzZSBpcyByZWplY3RlZCwgaXQgY29udGFpbnMgYW4gZXJyb3Igb2JqZWN0LiBOb3QgcmV0dXJuZWQgaWYgYSBjYWxsYmFjayBpcyBnaXZlbi5cbiAgICovXG4gIGdldEFydGlzdFJlbGF0ZWRBcnRpc3RzOiBmdW5jdGlvbihhcnRpc3RJZCwgY2FsbGJhY2spIHtcbiAgICByZXR1cm4gV2ViQXBpUmVxdWVzdC5idWlsZGVyKHRoaXMuZ2V0QWNjZXNzVG9rZW4oKSlcbiAgICAgIC53aXRoUGF0aCgnL3YxL2FydGlzdHMvJyArIGFydGlzdElkICsgJy9yZWxhdGVkLWFydGlzdHMnKVxuICAgICAgLmJ1aWxkKClcbiAgICAgIC5leGVjdXRlKEh0dHBNYW5hZ2VyLmdldCwgY2FsbGJhY2spO1xuICB9LFxuXG4gIC8qKlxuICAgKiBHZXQgaW5mb3JtYXRpb24gYWJvdXQgYSB1c2VyLlxuICAgKiBAcGFyYW0gdXNlcklkIFRoZSB1c2VyIElELlxuICAgKiBAcGFyYW0ge3JlcXVlc3RDYWxsYmFja30gW2NhbGxiYWNrXSBPcHRpb25hbCBjYWxsYmFjayBtZXRob2QgdG8gYmUgY2FsbGVkIGluc3RlYWQgb2YgdGhlIHByb21pc2UuXG4gICAqIEBleGFtcGxlIGdldFVzZXIoJ3RoZWxpbm1pY2hhZWwnKS50aGVuKC4uLilcbiAgICogQHJldHVybnMge1Byb21pc2V8dW5kZWZpbmVkfSBBIHByb21pc2UgdGhhdCBpZiBzdWNjZXNzZnVsLCByZXNvbHZlcyB0byBhbiBvYmplY3RcbiAgICogICAgICAgICAgY29udGFpbmluZyBpbmZvcm1hdGlvbiBhYm91dCB0aGUgdXNlci4gSWYgdGhlIHByb21pc2UgaXNcbiAgICogICAgICAgICAgcmVqZWN0ZWQsIGl0IGNvbnRhaW5zIGFuIGVycm9yIG9iamVjdC4gTm90IHJldHVybmVkIGlmIGEgY2FsbGJhY2sgaXMgZ2l2ZW4uXG4gICAqL1xuICBnZXRVc2VyOiBmdW5jdGlvbih1c2VySWQsIGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIFdlYkFwaVJlcXVlc3QuYnVpbGRlcih0aGlzLmdldEFjY2Vzc1Rva2VuKCkpXG4gICAgICAud2l0aFBhdGgoJy92MS91c2Vycy8nICsgZW5jb2RlVVJJQ29tcG9uZW50KHVzZXJJZCkpXG4gICAgICAuYnVpbGQoKVxuICAgICAgLmV4ZWN1dGUoSHR0cE1hbmFnZXIuZ2V0LCBjYWxsYmFjayk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldCBpbmZvcm1hdGlvbiBhYm91dCB0aGUgdXNlciB0aGF0IGhhcyBzaWduZWQgaW4gKHRoZSBjdXJyZW50IHVzZXIpLlxuICAgKiBAcGFyYW0ge3JlcXVlc3RDYWxsYmFja30gW2NhbGxiYWNrXSBPcHRpb25hbCBjYWxsYmFjayBtZXRob2QgdG8gYmUgY2FsbGVkIGluc3RlYWQgb2YgdGhlIHByb21pc2UuXG4gICAqIEBleGFtcGxlIGdldE1lKCkudGhlbiguLi4pXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfHVuZGVmaW5lZH0gQSBwcm9taXNlIHRoYXQgaWYgc3VjY2Vzc2Z1bCwgcmVzb2x2ZXMgdG8gYW4gb2JqZWN0XG4gICAqICAgICAgICAgIGNvbnRhaW5pbmcgaW5mb3JtYXRpb24gYWJvdXQgdGhlIHVzZXIuIFRoZSBhbW91bnQgb2YgaW5mb3JtYXRpb25cbiAgICogICAgICAgICAgZGVwZW5kcyBvbiB0aGUgcGVybWlzc2lvbnMgZ2l2ZW4gYnkgdGhlIHVzZXIuIElmIHRoZSBwcm9taXNlIGlzXG4gICAqICAgICAgICAgIHJlamVjdGVkLCBpdCBjb250YWlucyBhbiBlcnJvciBvYmplY3QuIE5vdCByZXR1cm5lZCBpZiBhIGNhbGxiYWNrIGlzIGdpdmVuLlxuICAgKi9cbiAgZ2V0TWU6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIFdlYkFwaVJlcXVlc3QuYnVpbGRlcih0aGlzLmdldEFjY2Vzc1Rva2VuKCkpXG4gICAgICAud2l0aFBhdGgoJy92MS9tZScpXG4gICAgICAuYnVpbGQoKVxuICAgICAgLmV4ZWN1dGUoSHR0cE1hbmFnZXIuZ2V0LCBjYWxsYmFjayk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldCBhIHVzZXIncyBwbGF5bGlzdHMuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1c2VySWQgQW4gb3B0aW9uYWwgaWQgb2YgdGhlIHVzZXIuIElmIHlvdSBrbm93IHRoZSBTcG90aWZ5IFVSSSBpdCBpcyBlYXN5XG4gICAqIHRvIGZpbmQgdGhlIGlkIChlLmcuIHNwb3RpZnk6dXNlcjo8aGVyZV9pc190aGVfaWQ+KS4gSWYgbm90IHByb3ZpZGVkLCB0aGUgaWQgb2YgdGhlIHVzZXIgdGhhdCBncmFudGVkXG4gICAqIHRoZSBwZXJtaXNzaW9ucyB3aWxsIGJlIHVzZWQuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gVGhlIG9wdGlvbnMgc3VwcGxpZWQgdG8gdGhpcyByZXF1ZXN0LlxuICAgKiBAcGFyYW0ge3JlcXVlc3RDYWxsYmFja30gW2NhbGxiYWNrXSBPcHRpb25hbCBjYWxsYmFjayBtZXRob2QgdG8gYmUgY2FsbGVkIGluc3RlYWQgb2YgdGhlIHByb21pc2UuXG4gICAqIEBleGFtcGxlIGdldFVzZXJQbGF5bGlzdHMoJ3RoZWxpbm1pY2hhZWwnKS50aGVuKC4uLilcbiAgICogQHJldHVybnMge1Byb21pc2V8dW5kZWZpbmVkfSBBIHByb21pc2UgdGhhdCBpZiBzdWNjZXNzZnVsLCByZXNvbHZlcyB0byBhbiBvYmplY3QgY29udGFpbmluZ1xuICAgKiAgICAgICAgICBhIGxpc3Qgb2YgcGxheWxpc3RzLiBJZiByZWplY3RlZCwgaXQgY29udGFpbnMgYW4gZXJyb3Igb2JqZWN0LiBOb3QgcmV0dXJuZWQgaWYgYSBjYWxsYmFjayBpcyBnaXZlbi5cbiAgICovXG4gIGdldFVzZXJQbGF5bGlzdHM6IGZ1bmN0aW9uKHVzZXJJZCwgb3B0aW9ucywgY2FsbGJhY2spIHtcbiAgICB2YXIgcGF0aDtcbiAgICBpZiAodHlwZW9mIHVzZXJJZCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHBhdGggPSAnL3YxL3VzZXJzLycgKyBlbmNvZGVVUklDb21wb25lbnQodXNlcklkKSArICcvcGxheWxpc3RzJztcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiB1c2VySWQgPT09ICdvYmplY3QnKSB7XG4gICAgICBjYWxsYmFjayA9IG9wdGlvbnM7XG4gICAgICBvcHRpb25zID0gdXNlcklkO1xuICAgICAgcGF0aCA9ICcvdjEvbWUvcGxheWxpc3RzJztcbiAgICB9IC8qIHVuZGVmaW5lZCAqLyBlbHNlIHtcbiAgICAgIHBhdGggPSAnL3YxL21lL3BsYXlsaXN0cyc7XG4gICAgfVxuXG4gICAgcmV0dXJuIFdlYkFwaVJlcXVlc3QuYnVpbGRlcih0aGlzLmdldEFjY2Vzc1Rva2VuKCkpXG4gICAgICAud2l0aFBhdGgocGF0aClcbiAgICAgIC53aXRoUXVlcnlQYXJhbWV0ZXJzKG9wdGlvbnMpXG4gICAgICAuYnVpbGQoKVxuICAgICAgLmV4ZWN1dGUoSHR0cE1hbmFnZXIuZ2V0LCBjYWxsYmFjayk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldCBhIHBsYXlsaXN0LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcGxheWxpc3RJZCBUaGUgcGxheWxpc3QncyBJRC5cbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBUaGUgb3B0aW9ucyBzdXBwbGllZCB0byB0aGlzIHJlcXVlc3QuXG4gICAqIEBwYXJhbSB7cmVxdWVzdENhbGxiYWNrfSBbY2FsbGJhY2tdIE9wdGlvbmFsIGNhbGxiYWNrIG1ldGhvZCB0byBiZSBjYWxsZWQgaW5zdGVhZCBvZiB0aGUgcHJvbWlzZS5cbiAgICogQGV4YW1wbGUgZ2V0UGxheWxpc3QoJzNFc2ZWNlh6Q0hVOFNQTmRibkZvZ0snKS50aGVuKC4uLilcbiAgICogQHJldHVybnMge1Byb21pc2V8dW5kZWZpbmVkfSBBIHByb21pc2UgdGhhdCBpZiBzdWNjZXNzZnVsLCByZXNvbHZlcyB0byBhbiBvYmplY3QgY29udGFpbmluZ1xuICAgKiAgICAgICAgICB0aGUgcGxheWxpc3QuIElmIHJlamVjdGVkLCBpdCBjb250YWlucyBhbiBlcnJvciBvYmplY3QuIE5vdCByZXR1cm5lZCBpZiBhIGNhbGxiYWNrIGlzIGdpdmVuLlxuICAgKi9cbiAgZ2V0UGxheWxpc3Q6IGZ1bmN0aW9uKHBsYXlsaXN0SWQsIG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIFdlYkFwaVJlcXVlc3QuYnVpbGRlcih0aGlzLmdldEFjY2Vzc1Rva2VuKCkpXG4gICAgICAud2l0aFBhdGgoJy92MS9wbGF5bGlzdHMvJyArIHBsYXlsaXN0SWQpXG4gICAgICAud2l0aFF1ZXJ5UGFyYW1ldGVycyhvcHRpb25zKVxuICAgICAgLmJ1aWxkKClcbiAgICAgIC5leGVjdXRlKEh0dHBNYW5hZ2VyLmdldCwgY2FsbGJhY2spO1xuICB9LFxuXG4gIC8qKlxuICAgKiBHZXQgdHJhY2tzIGluIGEgcGxheWxpc3QuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBwbGF5bGlzdElkIFRoZSBwbGF5bGlzdCdzIElELlxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIE9wdGlvbmFsIG9wdGlvbnMsIHN1Y2ggYXMgZmllbGRzLlxuICAgKiBAcGFyYW0ge3JlcXVlc3RDYWxsYmFja30gW2NhbGxiYWNrXSBPcHRpb25hbCBjYWxsYmFjayBtZXRob2QgdG8gYmUgY2FsbGVkIGluc3RlYWQgb2YgdGhlIHByb21pc2UuXG4gICAqIEBleGFtcGxlIGdldFBsYXlsaXN0VHJhY2tzKCcza3RBWU5jUkhwYXpKOXFlY20zcHRuJykudGhlbiguLi4pXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfHVuZGVmaW5lZH0gQSBwcm9taXNlIHRoYXQgaWYgc3VjY2Vzc2Z1bCwgcmVzb2x2ZXMgdG8gYW4gb2JqZWN0IHRoYXQgY29udGFpbmluZ1xuICAgKiB0aGUgdHJhY2tzIGluIHRoZSBwbGF5bGlzdC4gSWYgcmVqZWN0ZWQsIGl0IGNvbnRhaW5zIGFuIGVycm9yIG9iamVjdC4gTm90IHJldHVybmVkIGlmIGEgY2FsbGJhY2sgaXMgZ2l2ZW4uXG4gICAqL1xuICBnZXRQbGF5bGlzdFRyYWNrczogZnVuY3Rpb24ocGxheWxpc3RJZCwgb3B0aW9ucywgY2FsbGJhY2spIHtcbiAgICByZXR1cm4gV2ViQXBpUmVxdWVzdC5idWlsZGVyKHRoaXMuZ2V0QWNjZXNzVG9rZW4oKSlcbiAgICAgIC53aXRoUGF0aCgnL3YxL3BsYXlsaXN0cy8nICsgcGxheWxpc3RJZCArICcvdHJhY2tzJylcbiAgICAgIC53aXRoUXVlcnlQYXJhbWV0ZXJzKG9wdGlvbnMpXG4gICAgICAuYnVpbGQoKVxuICAgICAgLmV4ZWN1dGUoSHR0cE1hbmFnZXIuZ2V0LCBjYWxsYmFjayk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIHBsYXlsaXN0LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gW25hbWVdIFRoZSBuYW1lIG9mIHRoZSBwbGF5bGlzdC5cbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBUaGUgcG9zc2libGUgb3B0aW9ucywgYmVpbmcgZGVzY3JpcHRpb24sIGNvbGxhYm9yYXRpdmUgYW5kIHB1YmxpYy5cbiAgICogQHBhcmFtIHtyZXF1ZXN0Q2FsbGJhY2t9IFtjYWxsYmFja10gT3B0aW9uYWwgY2FsbGJhY2sgbWV0aG9kIHRvIGJlIGNhbGxlZCBpbnN0ZWFkIG9mIHRoZSBwcm9taXNlLlxuICAgKiBAZXhhbXBsZSBjcmVhdGVQbGF5bGlzdCgnTXkgcGxheWxpc3QnLCB7JydkZXNjcmlwdGlvbic6ICdNeSBkZXNjcmlwdGlvbicsICdjb2xsYWJvcmF0aXZlJyA6IGZhbHNlLCAncHVibGljJzogdHJ1ZX0pLnRoZW4oLi4uKVxuICAgKiBAcmV0dXJucyB7UHJvbWlzZXx1bmRlZmluZWR9IEEgcHJvbWlzZSB0aGF0IGlmIHN1Y2Nlc3NmdWwsIHJlc29sdmVzIHRvIGFuIG9iamVjdCBjb250YWluaW5nIGluZm9ybWF0aW9uIGFib3V0IHRoZVxuICAgKiAgICAgICAgICBjcmVhdGVkIHBsYXlsaXN0LiBJZiByZWplY3RlZCwgaXQgY29udGFpbnMgYW4gZXJyb3Igb2JqZWN0LiBOb3QgcmV0dXJuZWQgaWYgYSBjYWxsYmFjayBpcyBnaXZlbi5cbiAgICovXG4gIGNyZWF0ZVBsYXlsaXN0OiBmdW5jdGlvbihuYW1lLCBvcHRpb25zLCBjYWxsYmFjaykge1xuICAgIHJldHVybiBXZWJBcGlSZXF1ZXN0LmJ1aWxkZXIodGhpcy5nZXRBY2Nlc3NUb2tlbigpKVxuICAgICAgLndpdGhQYXRoKCcvdjEvbWUvcGxheWxpc3RzJylcbiAgICAgIC53aXRoSGVhZGVycyh7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSlcbiAgICAgIC53aXRoQm9keVBhcmFtZXRlcnMoe1xuICAgICAgICBuYW1lIDogbmFtZSxcbiAgICAgIH0sIG9wdGlvbnMpXG4gICAgICAuYnVpbGQoKVxuICAgICAgLmV4ZWN1dGUoSHR0cE1hbmFnZXIucG9zdCwgY2FsbGJhY2spO1xuICB9LFxuXG4gIC8qKlxuICAgKiBGb2xsb3cgYSBwbGF5bGlzdC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHBsYXlsaXN0SWQgVGhlIHBsYXlsaXN0J3MgSURcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBUaGUgcG9zc2libGUgb3B0aW9ucywgY3VycmVudGx5IG9ubHkgcHVibGljLlxuICAgKiBAcGFyYW0ge3JlcXVlc3RDYWxsYmFja30gW2NhbGxiYWNrXSBPcHRpb25hbCBjYWxsYmFjayBtZXRob2QgdG8gYmUgY2FsbGVkIGluc3RlYWQgb2YgdGhlIHByb21pc2UuXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfHVuZGVmaW5lZH0gQSBwcm9taXNlIHRoYXQgaWYgc3VjY2Vzc2Z1bCwgc2ltcGx5IHJlc29sdmVzIHRvIGFuIGVtcHR5IG9iamVjdC4gSWYgcmVqZWN0ZWQsXG4gICAqIGl0IGNvbnRhaW5zIGFuIGVycm9yIG9iamVjdC4gTm90IHJldHVybmVkIGlmIGEgY2FsbGJhY2sgaXMgZ2l2ZW4uXG4gICAqL1xuICBmb2xsb3dQbGF5bGlzdDogZnVuY3Rpb24ocGxheWxpc3RJZCwgb3B0aW9ucywgY2FsbGJhY2spIHtcbiAgICByZXR1cm4gV2ViQXBpUmVxdWVzdC5idWlsZGVyKHRoaXMuZ2V0QWNjZXNzVG9rZW4oKSlcbiAgICAgIC53aXRoUGF0aCgnL3YxL3BsYXlsaXN0cy8nICsgcGxheWxpc3RJZCArICcvZm9sbG93ZXJzJylcbiAgICAgIC53aXRoSGVhZGVycyh7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSlcbiAgICAgIC53aXRoQm9keVBhcmFtZXRlcnMob3B0aW9ucylcbiAgICAgIC5idWlsZCgpXG4gICAgICAuZXhlY3V0ZShIdHRwTWFuYWdlci5wdXQsIGNhbGxiYWNrKTtcbiAgfSxcblxuICAvKipcbiAgICogVW5mb2xsb3cgYSBwbGF5bGlzdC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHBsYXlsaXN0SWQgVGhlIHBsYXlsaXN0J3MgSURcbiAgICogQHBhcmFtIHtyZXF1ZXN0Q2FsbGJhY2t9IFtjYWxsYmFja10gT3B0aW9uYWwgY2FsbGJhY2sgbWV0aG9kIHRvIGJlIGNhbGxlZCBpbnN0ZWFkIG9mIHRoZSBwcm9taXNlLlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZXx1bmRlZmluZWR9IEEgcHJvbWlzZSB0aGF0IGlmIHN1Y2Nlc3NmdWwsIHNpbXBseSByZXNvbHZlcyB0byBhbiBlbXB0eSBvYmplY3QuIElmIHJlamVjdGVkLFxuICAgKiBpdCBjb250YWlucyBhbiBlcnJvciBvYmplY3QuIE5vdCByZXR1cm5lZCBpZiBhIGNhbGxiYWNrIGlzIGdpdmVuLlxuICAgKi9cbiAgdW5mb2xsb3dQbGF5bGlzdDogZnVuY3Rpb24ocGxheWxpc3RJZCwgY2FsbGJhY2spIHtcbiAgICByZXR1cm4gV2ViQXBpUmVxdWVzdC5idWlsZGVyKHRoaXMuZ2V0QWNjZXNzVG9rZW4oKSlcbiAgICAgIC53aXRoUGF0aCgnL3YxL3BsYXlsaXN0cy8nICsgcGxheWxpc3RJZCArICcvZm9sbG93ZXJzJylcbiAgICAgIC5idWlsZCgpXG4gICAgICAuZXhlY3V0ZShIdHRwTWFuYWdlci5kZWwsIGNhbGxiYWNrKTtcbiAgfSxcblxuICAvKipcbiAgICogQ2hhbmdlIHBsYXlsaXN0IGRldGFpbHMuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBwbGF5bGlzdElkIFRoZSBwbGF5bGlzdCdzIElEXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gVGhlIHBvc3NpYmxlIG9wdGlvbnMsIGUuZy4gbmFtZSwgcHVibGljLlxuICAgKiBAcGFyYW0ge3JlcXVlc3RDYWxsYmFja30gW2NhbGxiYWNrXSBPcHRpb25hbCBjYWxsYmFjayBtZXRob2QgdG8gYmUgY2FsbGVkIGluc3RlYWQgb2YgdGhlIHByb21pc2UuXG4gICAqIEBleGFtcGxlIGNoYW5nZVBsYXlsaXN0RGV0YWlscygnM0VzZlY2WHpDSFU4U1BOZGJuRm9nSycsIHtuYW1lOiAnTmV3IG5hbWUnLCBwdWJsaWM6IHRydWV9KS50aGVuKC4uLilcbiAgICogQHJldHVybnMge1Byb21pc2V8dW5kZWZpbmVkfSBBIHByb21pc2UgdGhhdCBpZiBzdWNjZXNzZnVsLCBzaW1wbHkgcmVzb2x2ZXMgdG8gYW4gZW1wdHkgb2JqZWN0LiBJZiByZWplY3RlZCxcbiAgICogaXQgY29udGFpbnMgYW4gZXJyb3Igb2JqZWN0LiBOb3QgcmV0dXJuZWQgaWYgYSBjYWxsYmFjayBpcyBnaXZlbi5cbiAgICovXG4gIGNoYW5nZVBsYXlsaXN0RGV0YWlsczogZnVuY3Rpb24ocGxheWxpc3RJZCwgb3B0aW9ucywgY2FsbGJhY2spIHtcbiAgICByZXR1cm4gV2ViQXBpUmVxdWVzdC5idWlsZGVyKHRoaXMuZ2V0QWNjZXNzVG9rZW4oKSlcbiAgICAgIC53aXRoUGF0aCgnL3YxL3BsYXlsaXN0cy8nICsgcGxheWxpc3RJZClcbiAgICAgIC53aXRoSGVhZGVycyh7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSlcbiAgICAgIC53aXRoQm9keVBhcmFtZXRlcnMob3B0aW9ucylcbiAgICAgIC5idWlsZCgpXG4gICAgICAuZXhlY3V0ZShIdHRwTWFuYWdlci5wdXQsIGNhbGxiYWNrKTtcbiAgfSxcblxuICAvKipcbiAgICogUmVwbGFjZSB0aGUgaW1hZ2UgdXNlZCB0byByZXByZXNlbnQgYSBzcGVjaWZpYyBwbGF5bGlzdC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHBsYXlsaXN0SWQgVGhlIHBsYXlsaXN0J3MgSURcbiAgICogQHBhcmFtIHtzdHJpbmd9IGJhc2U2NFVSSSBCYXNlNjQgZW5jb2RlZCBKUEVHIGltYWdlIGRhdGEsIG1heGltdW0gcGF5bG9hZCBzaXplIGlzIDI1NiBLQlxuICAgKiBAcGFyYW0ge3JlcXVlc3RDYWxsYmFja30gW2NhbGxiYWNrXSBPcHRpb25hbCBjYWxsYmFjayBtZXRob2QgdG8gYmUgY2FsbGVkIGluc3RlYWQgb2YgdGhlIHByb21pc2UuXG4gICAqIEBleGFtcGxlIHVwbG9hZEN1c3RvbVBsYXlsaXN0Q292ZXJJbWFnZSgnM0VzZlY2WHpDSFU4U1BOZGJuRm9nSycsICdsb25nYmFzZTY0dXJpJykudGhlbiguLi4pXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfHVuZGVmaW5lZH0gQSBwcm9taXNlIHRoYXQgaWYgc3VjY2Vzc2Z1bCwgc2ltcGx5IHJlc29sdmVzIHRvIGFuIGVtcHR5IG9iamVjdC4gSWYgcmVqZWN0ZWQsXG4gICAqIGl0IGNvbnRhaW5zIGFuIGVycm9yIG9iamVjdC4gTm90IHJldHVybmVkIGlmIGEgY2FsbGJhY2sgaXMgZ2l2ZW4uXG4gICAqL1xuICB1cGxvYWRDdXN0b21QbGF5bGlzdENvdmVySW1hZ2U6IGZ1bmN0aW9uKHBsYXlsaXN0SWQsIGJhc2U2NFVSSSwgY2FsbGJhY2spIHtcbiAgICByZXR1cm4gV2ViQXBpUmVxdWVzdC5idWlsZGVyKHRoaXMuZ2V0QWNjZXNzVG9rZW4oKSlcbiAgICAgIC53aXRoUGF0aCgnL3YxL3BsYXlsaXN0cy8nICsgcGxheWxpc3RJZCArICcvaW1hZ2VzJylcbiAgICAgIC53aXRoSGVhZGVycyh7ICdDb250ZW50LVR5cGUnOiAnaW1hZ2UvanBlZycgfSlcbiAgICAgIC53aXRoQm9keVBhcmFtZXRlcnMoYmFzZTY0VVJJKVxuICAgICAgLmJ1aWxkKClcbiAgICAgIC5leGVjdXRlKEh0dHBNYW5hZ2VyLnB1dCwgY2FsbGJhY2spO1xuICB9LFxuXG4gIC8qKlxuICAgKiBBZGQgdHJhY2tzIHRvIGEgcGxheWxpc3QuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBwbGF5bGlzdElkIFRoZSBwbGF5bGlzdCdzIElEXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IHRyYWNrcyBVUklzIG9mIHRoZSB0cmFja3MgdG8gYWRkIHRvIHRoZSBwbGF5bGlzdC5cbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBPcHRpb25zLCBwb3NpdGlvbiBiZWluZyB0aGUgb25seSBvbmUuXG4gICAqIEBwYXJhbSB7cmVxdWVzdENhbGxiYWNrfSBbY2FsbGJhY2tdIE9wdGlvbmFsIGNhbGxiYWNrIG1ldGhvZCB0byBiZSBjYWxsZWQgaW5zdGVhZCBvZiB0aGUgcHJvbWlzZS5cbiAgICogQGV4YW1wbGUgYWRkVHJhY2tzVG9QbGF5bGlzdCgnM0VzZlY2WHpDSFU4U1BOZGJuRm9nSycsXG4gICAgICAgICAgICAgICdbXCJzcG90aWZ5OnRyYWNrOjRpVjVXOXVZRWRZVVZhNzlBeGI3UmhcIiwgXCJzcG90aWZ5OnRyYWNrOjEzMDFXbGV5VDk4TVN4VkhQWkNBNk1cIl0nKS50aGVuKC4uLilcbiAgICogQHJldHVybnMge1Byb21pc2V8dW5kZWZpbmVkfSBBIHByb21pc2UgdGhhdCBpZiBzdWNjZXNzZnVsIHJldHVybnMgYW4gb2JqZWN0IGNvbnRhaW5pbmcgYSBzbmFwc2hvdF9pZC4gSWYgcmVqZWN0ZWQsXG4gICAqIGl0IGNvbnRhaW5zIGFuIGVycm9yIG9iamVjdC4gTm90IHJldHVybmVkIGlmIGEgY2FsbGJhY2sgaXMgZ2l2ZW4uXG4gICAqL1xuICBhZGRUcmFja3NUb1BsYXlsaXN0OiBmdW5jdGlvbihwbGF5bGlzdElkLCB0cmFja3MsIG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIFdlYkFwaVJlcXVlc3QuYnVpbGRlcih0aGlzLmdldEFjY2Vzc1Rva2VuKCkpXG4gICAgICAud2l0aFBhdGgoJy92MS9wbGF5bGlzdHMvJyArIHBsYXlsaXN0SWQgKyAnL3RyYWNrcycpXG4gICAgICAud2l0aEhlYWRlcnMoeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0pXG4gICAgICAud2l0aFF1ZXJ5UGFyYW1ldGVycyhvcHRpb25zKVxuICAgICAgLndpdGhCb2R5UGFyYW1ldGVycyh7XG4gICAgICAgIHVyaXM6IHRyYWNrc1xuICAgICAgfSlcbiAgICAgIC5idWlsZCgpXG4gICAgICAuZXhlY3V0ZShIdHRwTWFuYWdlci5wb3N0LCBjYWxsYmFjayk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlbW92ZSB0cmFja3MgZnJvbSBhIHBsYXlsaXN0LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcGxheWxpc3RJZCBUaGUgcGxheWxpc3QncyBJRFxuICAgKiBAcGFyYW0ge09iamVjdFtdfSB0cmFja3MgQW4gYXJyYXkgb2Ygb2JqZWN0cyBjb250YWluaW5nIGEgcHJvcGVydHkgY2FsbGVkIHVyaSB3aXRoIHRoZSB0cmFjayBVUkkgKFN0cmluZyksIGFuZFxuICAgKiBhbiBvcHRpb25hbCBwcm9wZXJ0eSBjYWxsZWQgcG9zaXRpb25zIChpbnRbXSksIGUuZy4geyB1cmkgOiBcInNwb3RpZnk6dHJhY2s6NDkxck0ySk44S3ZtVjZwMG9ERHVKVFwiLCBwb3NpdGlvbnMgOiBbMCwgMTVdIH1cbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgT3B0aW9ucywgc25hcHNob3RfaWQgYmVpbmcgdGhlIG9ubHkgb25lLlxuICAgKiBAcGFyYW0ge3JlcXVlc3RDYWxsYmFja30gW2NhbGxiYWNrXSBPcHRpb25hbCBjYWxsYmFjayBtZXRob2QgdG8gYmUgY2FsbGVkIGluc3RlYWQgb2YgdGhlIHByb21pc2UuXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfHVuZGVmaW5lZH0gQSBwcm9taXNlIHRoYXQgaWYgc3VjY2Vzc2Z1bCByZXR1cm5zIGFuIG9iamVjdCBjb250YWluaW5nIGEgc25hcHNob3RfaWQuIElmIHJlamVjdGVkLFxuICAgKiBpdCBjb250YWlucyBhbiBlcnJvciBvYmplY3QuIE5vdCByZXR1cm5lZCBpZiBhIGNhbGxiYWNrIGlzIGdpdmVuLlxuICAgKi9cbiAgcmVtb3ZlVHJhY2tzRnJvbVBsYXlsaXN0OiBmdW5jdGlvbihwbGF5bGlzdElkLCB0cmFja3MsIG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIFdlYkFwaVJlcXVlc3QuYnVpbGRlcih0aGlzLmdldEFjY2Vzc1Rva2VuKCkpXG4gICAgICAud2l0aFBhdGgoJy92MS9wbGF5bGlzdHMvJyArIHBsYXlsaXN0SWQgKyAnL3RyYWNrcycpXG4gICAgICAud2l0aEhlYWRlcnMoeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0pXG4gICAgICAud2l0aEJvZHlQYXJhbWV0ZXJzKFxuICAgICAgICB7XG4gICAgICAgICAgdHJhY2tzOiB0cmFja3NcbiAgICAgICAgfSwgXG4gICAgICAgIG9wdGlvbnNcbiAgICAgIClcbiAgICAgIC5idWlsZCgpXG4gICAgICAuZXhlY3V0ZShIdHRwTWFuYWdlci5kZWwsIGNhbGxiYWNrKTtcbiAgfSxcblxuICAvKipcbiAgICogUmVtb3ZlIHRyYWNrcyBmcm9tIGEgcGxheWxpc3QgYnkgcG9zaXRpb24gaW5zdGVhZCBvZiBzcGVjaWZ5aW5nIHRoZSB0cmFja3MnIFVSSXMuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBwbGF5bGlzdElkIFRoZSBwbGF5bGlzdCdzIElEXG4gICAqIEBwYXJhbSB7aW50W119IHBvc2l0aW9ucyBUaGUgcG9zaXRpb25zIG9mIHRoZSB0cmFja3MgaW4gdGhlIHBsYXlsaXN0IHRoYXQgc2hvdWxkIGJlIHJlbW92ZWRcbiAgICogQHBhcmFtIHtzdHJpbmd9IHNuYXBzaG90X2lkIFRoZSBzbmFwc2hvdCBJRCwgb3IgdmVyc2lvbiwgb2YgdGhlIHBsYXlsaXN0LiBSZXF1aXJlZFxuICAgKiBAcGFyYW0ge3JlcXVlc3RDYWxsYmFja30gW2NhbGxiYWNrXSBPcHRpb25hbCBjYWxsYmFjayBtZXRob2QgdG8gYmUgY2FsbGVkIGluc3RlYWQgb2YgdGhlIHByb21pc2UuXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfHVuZGVmaW5lZH0gQSBwcm9taXNlIHRoYXQgaWYgc3VjY2Vzc2Z1bCByZXR1cm5zIGFuIG9iamVjdCBjb250YWluaW5nIGEgc25hcHNob3RfaWQuIElmIHJlamVjdGVkLFxuICAgKiBpdCBjb250YWlucyBhbiBlcnJvciBvYmplY3QuIE5vdCByZXR1cm5lZCBpZiBhIGNhbGxiYWNrIGlzIGdpdmVuLlxuICAgKi9cbiAgcmVtb3ZlVHJhY2tzRnJvbVBsYXlsaXN0QnlQb3NpdGlvbjogZnVuY3Rpb24oXG4gICAgcGxheWxpc3RJZCxcbiAgICBwb3NpdGlvbnMsXG4gICAgc25hcHNob3RJZCxcbiAgICBjYWxsYmFja1xuICApIHtcbiAgICByZXR1cm4gV2ViQXBpUmVxdWVzdC5idWlsZGVyKHRoaXMuZ2V0QWNjZXNzVG9rZW4oKSlcbiAgICAgIC53aXRoUGF0aCgnL3YxL3BsYXlsaXN0cy8nICsgcGxheWxpc3RJZCArICcvdHJhY2tzJylcbiAgICAgIC53aXRoSGVhZGVycyh7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSlcbiAgICAgIC53aXRoQm9keVBhcmFtZXRlcnMoe1xuICAgICAgICBwb3NpdGlvbnM6IHBvc2l0aW9ucyxcbiAgICAgICAgc25hcHNob3RfaWQ6IHNuYXBzaG90SWRcbiAgICAgIH0pXG4gICAgICAuYnVpbGQoKVxuICAgICAgLmV4ZWN1dGUoSHR0cE1hbmFnZXIuZGVsLCBjYWxsYmFjayk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlcGxhY2UgdHJhY2tzIGluIGEgcGxheWxpc3QuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBwbGF5bGlzdElkIFRoZSBwbGF5bGlzdCdzIElEXG4gICAqIEBwYXJhbSB7T2JqZWN0W119IHVyaXMgQW4gYXJyYXkgb2YgdHJhY2sgVVJJcyAoc3RyaW5ncylcbiAgICogQHBhcmFtIHtyZXF1ZXN0Q2FsbGJhY2t9IFtjYWxsYmFja10gT3B0aW9uYWwgY2FsbGJhY2sgbWV0aG9kIHRvIGJlIGNhbGxlZCBpbnN0ZWFkIG9mIHRoZSBwcm9taXNlLlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZXx1bmRlZmluZWR9IEEgcHJvbWlzZSB0aGF0IGlmIHN1Y2Nlc3NmdWwgcmV0dXJucyBhbiBlbXB0eSBvYmplY3QuIElmIHJlamVjdGVkLFxuICAgKiBpdCBjb250YWlucyBhbiBlcnJvciBvYmplY3QuIE5vdCByZXR1cm5lZCBpZiBhIGNhbGxiYWNrIGlzIGdpdmVuLlxuICAgKi9cbiAgcmVwbGFjZVRyYWNrc0luUGxheWxpc3Q6IGZ1bmN0aW9uKHBsYXlsaXN0SWQsIHVyaXMsIGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIFdlYkFwaVJlcXVlc3QuYnVpbGRlcih0aGlzLmdldEFjY2Vzc1Rva2VuKCkpXG4gICAgICAud2l0aFBhdGgoJy92MS9wbGF5bGlzdHMvJyArIHBsYXlsaXN0SWQgKyAnL3RyYWNrcycpXG4gICAgICAud2l0aEhlYWRlcnMoeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0pXG4gICAgICAud2l0aEJvZHlQYXJhbWV0ZXJzKHtcbiAgICAgICAgdXJpczogdXJpc1xuICAgICAgfSlcbiAgICAgIC5idWlsZCgpXG4gICAgICAuZXhlY3V0ZShIdHRwTWFuYWdlci5wdXQsIGNhbGxiYWNrKTtcbiAgfSxcblxuICAvKipcbiAgICogUmVvcmRlciB0cmFja3MgaW4gYSBwbGF5bGlzdC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHBsYXlsaXN0SWQgVGhlIHBsYXlsaXN0J3MgSURcbiAgICogQHBhcmFtIHtpbnR9IHJhbmdlU3RhcnQgVGhlIHBvc2l0aW9uIG9mIHRoZSBmaXJzdCB0cmFjayB0byBiZSByZW9yZGVyZWQuXG4gICAqIEBwYXJhbSB7aW50fSBpbnNlcnRCZWZvcmUgVGhlIHBvc2l0aW9uIHdoZXJlIHRoZSB0cmFja3Mgc2hvdWxkIGJlIGluc2VydGVkLlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBPcHRpb25hbCBwYXJhbWV0ZXJzLCBpLmUuIHJhbmdlX2xlbmd0aCBhbmQgc25hcHNob3RfaWQuXG4gICAqIEBwYXJhbSB7cmVxdWVzdENhbGxiYWNrfSBbY2FsbGJhY2tdIE9wdGlvbmFsIGNhbGxiYWNrIG1ldGhvZCB0byBiZSBjYWxsZWQgaW5zdGVhZCBvZiB0aGUgcHJvbWlzZS5cbiAgICogQHJldHVybnMge1Byb21pc2V8dW5kZWZpbmVkfSBBIHByb21pc2UgdGhhdCBpZiBzdWNjZXNzZnVsIHJldHVybnMgYW4gb2JqZWN0IGNvbnRhaW5pbmcgYSBzbmFwc2hvdF9pZC4gSWYgcmVqZWN0ZWQsXG4gICAqIGl0IGNvbnRhaW5zIGFuIGVycm9yIG9iamVjdC4gTm90IHJldHVybmVkIGlmIGEgY2FsbGJhY2sgaXMgZ2l2ZW4uXG4gICAqL1xuICByZW9yZGVyVHJhY2tzSW5QbGF5bGlzdDogZnVuY3Rpb24oXG4gICAgcGxheWxpc3RJZCxcbiAgICByYW5nZVN0YXJ0LFxuICAgIGluc2VydEJlZm9yZSxcbiAgICBvcHRpb25zLFxuICAgIGNhbGxiYWNrXG4gICkge1xuICAgIHJldHVybiBXZWJBcGlSZXF1ZXN0LmJ1aWxkZXIodGhpcy5nZXRBY2Nlc3NUb2tlbigpKVxuICAgICAgLndpdGhQYXRoKCcvdjEvcGxheWxpc3RzLycgKyBwbGF5bGlzdElkICsgJy90cmFja3MnKVxuICAgICAgLndpdGhIZWFkZXJzKHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9KVxuICAgICAgLndpdGhCb2R5UGFyYW1ldGVycyhcbiAgICAgICAge1xuICAgICAgICAgIHJhbmdlX3N0YXJ0OiByYW5nZVN0YXJ0LFxuICAgICAgICAgIGluc2VydF9iZWZvcmU6IGluc2VydEJlZm9yZVxuICAgICAgICB9LFxuICAgICAgICBvcHRpb25zXG4gICAgICApXG4gICAgICAuYnVpbGQoKVxuICAgICAgLmV4ZWN1dGUoSHR0cE1hbmFnZXIucHV0LCBjYWxsYmFjayk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldCBhdWRpbyBmZWF0dXJlcyBmb3IgYSBzaW5nbGUgdHJhY2sgaWRlbnRpZmllZCBieSBpdHMgdW5pcXVlIFNwb3RpZnkgSUQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0cmFja0lkIFRoZSB0cmFjayBJRFxuICAgKiBAcGFyYW0ge3JlcXVlc3RDYWxsYmFja30gW2NhbGxiYWNrXSBPcHRpb25hbCBjYWxsYmFjayBtZXRob2QgdG8gYmUgY2FsbGVkIGluc3RlYWQgb2YgdGhlIHByb21pc2UuXG4gICAqIEBleGFtcGxlIGdldEF1ZGlvRmVhdHVyZXNGb3JUcmFjaygnMzhQM1E0UWNkalFBTEdGMlo5MkJtUicpLnRoZW4oLi4uKVxuICAgKiBAcmV0dXJucyB7UHJvbWlzZXx1bmRlZmluZWR9IEEgcHJvbWlzZSB0aGF0IGlmIHN1Y2Nlc3NmdWwsIHJlc29sdmVzIHRvIGFuIG9iamVjdFxuICAgKiAgICAgICAgICBjb250YWluaW5nIGluZm9ybWF0aW9uIGFib3V0IHRoZSBhdWRpbyBmZWF0dXJlcy4gSWYgdGhlIHByb21pc2UgaXNcbiAgICogICAgICAgICAgcmVqZWN0ZWQsIGl0IGNvbnRhaW5zIGFuIGVycm9yIG9iamVjdC4gTm90IHJldHVybmVkIGlmIGEgY2FsbGJhY2sgaXMgZ2l2ZW4uXG4gICAqL1xuICBnZXRBdWRpb0ZlYXR1cmVzRm9yVHJhY2s6IGZ1bmN0aW9uKHRyYWNrSWQsIGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIFdlYkFwaVJlcXVlc3QuYnVpbGRlcih0aGlzLmdldEFjY2Vzc1Rva2VuKCkpXG4gICAgICAud2l0aFBhdGgoJy92MS9hdWRpby1mZWF0dXJlcy8nICsgdHJhY2tJZClcbiAgICAgIC5idWlsZCgpXG4gICAgICAuZXhlY3V0ZShIdHRwTWFuYWdlci5nZXQsIGNhbGxiYWNrKTtcbiAgfSxcblxuICAvKipcbiAgICogR2V0IGF1ZGlvIGFuYWx5c2lzIGZvciBhIHNpbmdsZSB0cmFjayBpZGVudGlmaWVkIGJ5IGl0cyB1bmlxdWUgU3BvdGlmeSBJRC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHRyYWNrSWQgVGhlIHRyYWNrIElEXG4gICAqIEBwYXJhbSB7cmVxdWVzdENhbGxiYWNrfSBbY2FsbGJhY2tdIE9wdGlvbmFsIGNhbGxiYWNrIG1ldGhvZCB0byBiZSBjYWxsZWQgaW5zdGVhZCBvZiB0aGUgcHJvbWlzZS5cbiAgICogQGV4YW1wbGUgZ2V0QXVkaW9BbmFseXNpc0ZvclRyYWNrKCczOFAzUTRRY2RqUUFMR0YyWjkyQm1SJykudGhlbiguLi4pXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfHVuZGVmaW5lZH0gQSBwcm9taXNlIHRoYXQgaWYgc3VjY2Vzc2Z1bCwgcmVzb2x2ZXMgdG8gYW4gb2JqZWN0XG4gICAqICAgICAgICAgIGNvbnRhaW5pbmcgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGF1ZGlvIGFuYWx5c2lzLiBJZiB0aGUgcHJvbWlzZSBpc1xuICAgKiAgICAgICAgICByZWplY3RlZCwgaXQgY29udGFpbnMgYW4gZXJyb3Igb2JqZWN0LiBOb3QgcmV0dXJuZWQgaWYgYSBjYWxsYmFjayBpcyBnaXZlbi5cbiAgICovXG4gIGdldEF1ZGlvQW5hbHlzaXNGb3JUcmFjazogZnVuY3Rpb24odHJhY2tJZCwgY2FsbGJhY2spIHtcbiAgICByZXR1cm4gV2ViQXBpUmVxdWVzdC5idWlsZGVyKHRoaXMuZ2V0QWNjZXNzVG9rZW4oKSlcbiAgICAgIC53aXRoUGF0aCgnL3YxL2F1ZGlvLWFuYWx5c2lzLycgKyB0cmFja0lkKVxuICAgICAgLmJ1aWxkKClcbiAgICAgIC5leGVjdXRlKEh0dHBNYW5hZ2VyLmdldCwgY2FsbGJhY2spO1xuICB9LFxuXG4gIC8qKlxuICAgKiBHZXQgYXVkaW8gZmVhdHVyZXMgZm9yIG11bHRpcGxlIHRyYWNrcyBpZGVudGlmaWVkIGJ5IHRoZWlyIHVuaXF1ZSBTcG90aWZ5IElELlxuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSB0cmFja0lkcyBUaGUgdHJhY2sgSURzXG4gICAqIEBwYXJhbSB7cmVxdWVzdENhbGxiYWNrfSBbY2FsbGJhY2tdIE9wdGlvbmFsIGNhbGxiYWNrIG1ldGhvZCB0byBiZSBjYWxsZWQgaW5zdGVhZCBvZiB0aGUgcHJvbWlzZS5cbiAgICogQGV4YW1wbGUgZ2V0QXVkaW9GZWF0dXJlc0ZvclRyYWNrcyhbJzM4UDNRNFFjZGpRQUxHRjJaOTJCbVInLCAnMkhPMmJub01ycG5aVWJVcWlpbExIaSddKS50aGVuKC4uLilcbiAgICogQHJldHVybnMge1Byb21pc2V8dW5kZWZpbmVkfSBBIHByb21pc2UgdGhhdCBpZiBzdWNjZXNzZnVsLCByZXNvbHZlcyB0byBhbiBvYmplY3RcbiAgICogICAgICAgICAgY29udGFpbmluZyBpbmZvcm1hdGlvbiBhYm91dCB0aGUgYXVkaW8gZmVhdHVyZXMgZm9yIHRoZSB0cmFja3MuIElmIHRoZSBwcm9taXNlIGlzXG4gICAqICAgICAgICAgIHJlamVjdGVkLCBpdCBjb250YWlucyBhbiBlcnJvciBvYmplY3QuIE5vdCByZXR1cm5lZCBpZiBhIGNhbGxiYWNrIGlzIGdpdmVuLlxuICAgKi9cbiAgZ2V0QXVkaW9GZWF0dXJlc0ZvclRyYWNrczogZnVuY3Rpb24odHJhY2tJZHMsIGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIFdlYkFwaVJlcXVlc3QuYnVpbGRlcih0aGlzLmdldEFjY2Vzc1Rva2VuKCkpXG4gICAgICAud2l0aFBhdGgoJy92MS9hdWRpby1mZWF0dXJlcycpXG4gICAgICAud2l0aFF1ZXJ5UGFyYW1ldGVycyh7XG4gICAgICAgIGlkczogdHJhY2tJZHMuam9pbignLCcpXG4gICAgICB9KVxuICAgICAgLmJ1aWxkKClcbiAgICAgIC5leGVjdXRlKEh0dHBNYW5hZ2VyLmdldCwgY2FsbGJhY2spO1xuICB9LFxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBwbGF5bGlzdC1zdHlsZSBsaXN0ZW5pbmcgZXhwZXJpZW5jZSBiYXNlZCBvbiBzZWVkIGFydGlzdHMsIHRyYWNrcyBhbmQgZ2VucmVzLlxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIFRoZSBvcHRpb25zIHN1cHBsaWVkIHRvIHRoaXMgcmVxdWVzdC5cbiAgICogQHBhcmFtIHtyZXF1ZXN0Q2FsbGJhY2t9IFtjYWxsYmFja10gT3B0aW9uYWwgY2FsbGJhY2sgbWV0aG9kIHRvIGJlIGNhbGxlZCBpbnN0ZWFkIG9mIHRoZSBwcm9taXNlLlxuICAgKiBAZXhhbXBsZSBnZXRSZWNvbW1lbmRhdGlvbnMoeyBtaW5fZW5lcmd5OiAwLjQsIHNlZWRfYXJ0aXN0czogWyc2bWZLNlEydHpMTUVjaEFyMGU5VXp1JywgJzREWUZWTktaMXVpeGE2U1FUdnpRd0onXSwgbWluX3BvcHVsYXJpdHk6IDUwIH0pLnRoZW4oLi4uKVxuICAgKiBAcmV0dXJucyB7UHJvbWlzZXx1bmRlZmluZWR9IEEgcHJvbWlzZSB0aGF0IGlmIHN1Y2Nlc3NmdWwsIHJlc29sdmVzIHRvIGFuIG9iamVjdCBjb250YWluaW5nXG4gICAqICAgICAgICAgIGEgbGlzdCBvZiB0cmFja3MgYW5kIGEgbGlzdCBvZiBzZWVkcy4gSWYgcmVqZWN0ZWQsIGl0IGNvbnRhaW5zIGFuIGVycm9yIG9iamVjdC4gTm90IHJldHVybmVkIGlmIGEgY2FsbGJhY2sgaXMgZ2l2ZW4uXG4gICAqL1xuICBnZXRSZWNvbW1lbmRhdGlvbnM6IGZ1bmN0aW9uKG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gICAgdmFyIF9vcHRzID0ge307XG4gICAgdmFyIG9wdGlvbnNPZlR5cGVBcnJheSA9IFsnc2VlZF9hcnRpc3RzJywgJ3NlZWRfZ2VucmVzJywgJ3NlZWRfdHJhY2tzJ107XG4gICAgZm9yICh2YXIgb3B0aW9uIGluIG9wdGlvbnMpIHtcbiAgICAgIGlmIChvcHRpb25zLmhhc093blByb3BlcnR5KG9wdGlvbikpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIG9wdGlvbnNPZlR5cGVBcnJheS5pbmRleE9mKG9wdGlvbikgIT09IC0xICYmXG4gICAgICAgICAgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9wdGlvbnNbb3B0aW9uXSkgPT09ICdbb2JqZWN0IEFycmF5XSdcbiAgICAgICAgKSB7XG4gICAgICAgICAgX29wdHNbb3B0aW9uXSA9IG9wdGlvbnNbb3B0aW9uXS5qb2luKCcsJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgX29wdHNbb3B0aW9uXSA9IG9wdGlvbnNbb3B0aW9uXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBXZWJBcGlSZXF1ZXN0LmJ1aWxkZXIodGhpcy5nZXRBY2Nlc3NUb2tlbigpKVxuICAgICAgLndpdGhQYXRoKCcvdjEvcmVjb21tZW5kYXRpb25zJylcbiAgICAgIC53aXRoUXVlcnlQYXJhbWV0ZXJzKF9vcHRzKVxuICAgICAgLmJ1aWxkKClcbiAgICAgIC5leGVjdXRlKEh0dHBNYW5hZ2VyLmdldCwgY2FsbGJhY2spO1xuICB9LFxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZSBhIGxpc3Qgb2YgYXZhaWxhYmxlIGdlbnJlcyBzZWVkIHBhcmFtZXRlciB2YWx1ZXMgZm9yIHJlY29tbWVuZGF0aW9ucy5cbiAgICogQHBhcmFtIHtyZXF1ZXN0Q2FsbGJhY2t9IFtjYWxsYmFja10gT3B0aW9uYWwgY2FsbGJhY2sgbWV0aG9kIHRvIGJlIGNhbGxlZCBpbnN0ZWFkIG9mIHRoZSBwcm9taXNlLlxuICAgKiBAZXhhbXBsZSBnZXRBdmFpbGFibGVHZW5yZVNlZWRzKCkudGhlbiguLi4pXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfHVuZGVmaW5lZH0gQSBwcm9taXNlIHRoYXQgaWYgc3VjY2Vzc2Z1bCwgcmVzb2x2ZXMgdG8gYW4gb2JqZWN0IGNvbnRhaW5pbmdcbiAgICogICAgICAgICAgYSBsaXN0IG9mIGF2YWlsYWJsZSBnZW5yZXMgdG8gYmUgdXNlZCBhcyBzZWVkcyBmb3IgcmVjb21tZW5kYXRpb25zLlxuICAgKiAgICAgICAgICBJZiByZWplY3RlZCwgaXQgY29udGFpbnMgYW4gZXJyb3Igb2JqZWN0LiBOb3QgcmV0dXJuZWQgaWYgYSBjYWxsYmFjayBpcyBnaXZlbi5cbiAgICovXG4gIGdldEF2YWlsYWJsZUdlbnJlU2VlZHM6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIFdlYkFwaVJlcXVlc3QuYnVpbGRlcih0aGlzLmdldEFjY2Vzc1Rva2VuKCkpXG4gICAgICAud2l0aFBhdGgoJy92MS9yZWNvbW1lbmRhdGlvbnMvYXZhaWxhYmxlLWdlbnJlLXNlZWRzJylcbiAgICAgIC5idWlsZCgpXG4gICAgICAuZXhlY3V0ZShIdHRwTWFuYWdlci5nZXQsIGNhbGxiYWNrKTtcbiAgfSxcblxuICAvKipcbiAgICogUmV0cmlldmUgdGhlIHRyYWNrcyB0aGF0IGFyZSBzYXZlZCB0byB0aGUgYXV0aGVudGljYXRlZCB1c2VycyBZb3VyIE11c2ljIGxpYnJhcnkuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gT3B0aW9ucywgYmVpbmcgbWFya2V0LCBsaW1pdCwgYW5kL29yIG9mZnNldC5cbiAgICogQHBhcmFtIHtyZXF1ZXN0Q2FsbGJhY2t9IFtjYWxsYmFja10gT3B0aW9uYWwgY2FsbGJhY2sgbWV0aG9kIHRvIGJlIGNhbGxlZCBpbnN0ZWFkIG9mIHRoZSBwcm9taXNlLlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZXx1bmRlZmluZWR9IEEgcHJvbWlzZSB0aGF0IGlmIHN1Y2Nlc3NmdWwsIHJlc29sdmVzIHRvIGFuIG9iamVjdCBjb250YWluaW5nIGEgcGFnaW5nIG9iamVjdCB3aGljaCBpbiB0dXJuIGNvbnRhaW5zXG4gICAqICAgICAgICAgIHBsYXlsaXN0IHRyYWNrIG9iamVjdHMuIE5vdCByZXR1cm5lZCBpZiBhIGNhbGxiYWNrIGlzIGdpdmVuLlxuICAgKi9cbiAgZ2V0TXlTYXZlZFRyYWNrczogZnVuY3Rpb24ob3B0aW9ucywgY2FsbGJhY2spIHtcbiAgICByZXR1cm4gV2ViQXBpUmVxdWVzdC5idWlsZGVyKHRoaXMuZ2V0QWNjZXNzVG9rZW4oKSlcbiAgICAgIC53aXRoUGF0aCgnL3YxL21lL3RyYWNrcycpXG4gICAgICAud2l0aFF1ZXJ5UGFyYW1ldGVycyhvcHRpb25zKVxuICAgICAgLmJ1aWxkKClcbiAgICAgIC5leGVjdXRlKEh0dHBNYW5hZ2VyLmdldCwgY2FsbGJhY2spO1xuICB9LFxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBvbmUgb3IgbW9yZSB0cmFja3MgaXMgYWxyZWFkeSBzYXZlZCBpbiB0aGUgY3VycmVudCBTcG90aWZ5IHVzZXLigJlzIOKAnFlvdXIgTXVzaWPigJ0gbGlicmFyeS5cbiAgICogQHBhcmFtIHtzdHJpbmdbXX0gdHJhY2tJZHMgVGhlIHRyYWNrIElEc1xuICAgKiBAcGFyYW0ge3JlcXVlc3RDYWxsYmFja30gW2NhbGxiYWNrXSBPcHRpb25hbCBjYWxsYmFjayBtZXRob2QgdG8gYmUgY2FsbGVkIGluc3RlYWQgb2YgdGhlIHByb21pc2UuXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfHVuZGVmaW5lZH0gQSBwcm9taXNlIHRoYXQgaWYgc3VjY2Vzc2Z1bCwgcmVzb2x2ZXMgaW50byBhbiBhcnJheSBvZiBib29sZWFucy4gVGhlIG9yZGVyXG4gICAqIG9mIHRoZSByZXR1cm5lZCBhcnJheSdzIGVsZW1lbnRzIGNvcnJlc3BvbmQgdG8gdGhlIHRyYWNrIElEIGluIHRoZSByZXF1ZXN0LlxuICAgKiBUaGUgYm9vbGVhbiB2YWx1ZSBvZiB0cnVlIGluZGljYXRlcyB0aGF0IHRoZSB0cmFjayBpcyBwYXJ0IG9mIHRoZSB1c2VyJ3MgbGlicmFyeSwgb3RoZXJ3aXNlIGZhbHNlLlxuICAgKiBOb3QgcmV0dXJuZWQgaWYgYSBjYWxsYmFjayBpcyBnaXZlbi5cbiAgICovXG4gIGNvbnRhaW5zTXlTYXZlZFRyYWNrczogZnVuY3Rpb24odHJhY2tJZHMsIGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIFdlYkFwaVJlcXVlc3QuYnVpbGRlcih0aGlzLmdldEFjY2Vzc1Rva2VuKCkpXG4gICAgICAud2l0aFBhdGgoJy92MS9tZS90cmFja3MvY29udGFpbnMnKVxuICAgICAgLndpdGhRdWVyeVBhcmFtZXRlcnMoe1xuICAgICAgICBpZHM6IHRyYWNrSWRzLmpvaW4oJywnKVxuICAgICAgfSlcbiAgICAgIC5idWlsZCgpXG4gICAgICAuZXhlY3V0ZShIdHRwTWFuYWdlci5nZXQsIGNhbGxiYWNrKTtcbiAgfSxcblxuICAvKipcbiAgICogUmVtb3ZlIGEgdHJhY2sgZnJvbSB0aGUgYXV0aGVudGljYXRlZCB1c2VyJ3MgWW91ciBNdXNpYyBsaWJyYXJ5LlxuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSB0cmFja0lkcyBUaGUgdHJhY2sgSURzXG4gICAqIEBwYXJhbSB7cmVxdWVzdENhbGxiYWNrfSBbY2FsbGJhY2tdIE9wdGlvbmFsIGNhbGxiYWNrIG1ldGhvZCB0byBiZSBjYWxsZWQgaW5zdGVhZCBvZiB0aGUgcHJvbWlzZS5cbiAgICogQHJldHVybnMge1Byb21pc2V8dW5kZWZpbmVkfSBBIHByb21pc2UgdGhhdCBpZiBzdWNjZXNzZnVsIHJldHVybnMgbnVsbCwgb3RoZXJ3aXNlIGFuIGVycm9yLlxuICAgKiBOb3QgcmV0dXJuZWQgaWYgYSBjYWxsYmFjayBpcyBnaXZlbi5cbiAgICovXG4gIHJlbW92ZUZyb21NeVNhdmVkVHJhY2tzOiBmdW5jdGlvbih0cmFja0lkcywgY2FsbGJhY2spIHtcbiAgICByZXR1cm4gV2ViQXBpUmVxdWVzdC5idWlsZGVyKHRoaXMuZ2V0QWNjZXNzVG9rZW4oKSlcbiAgICAgIC53aXRoUGF0aCgnL3YxL21lL3RyYWNrcycpXG4gICAgICAud2l0aEhlYWRlcnMoeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0pXG4gICAgICAud2l0aEJvZHlQYXJhbWV0ZXJzKHsgaWRzOiB0cmFja0lkcyB9KVxuICAgICAgLmJ1aWxkKClcbiAgICAgIC5leGVjdXRlKEh0dHBNYW5hZ2VyLmRlbCwgY2FsbGJhY2spO1xuICB9LFxuXG4gIC8qKlxuICAgKiBBZGQgYSB0cmFjayBmcm9tIHRoZSBhdXRoZW50aWNhdGVkIHVzZXIncyBZb3VyIE11c2ljIGxpYnJhcnkuXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IHRyYWNrSWRzIFRoZSB0cmFjayBJRHNcbiAgICogQHBhcmFtIHtyZXF1ZXN0Q2FsbGJhY2t9IFtjYWxsYmFja10gT3B0aW9uYWwgY2FsbGJhY2sgbWV0aG9kIHRvIGJlIGNhbGxlZCBpbnN0ZWFkIG9mIHRoZSBwcm9taXNlLlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZXx1bmRlZmluZWR9IEEgcHJvbWlzZSB0aGF0IGlmIHN1Y2Nlc3NmdWwgcmV0dXJucyBudWxsLCBvdGhlcndpc2UgYW4gZXJyb3IuIE5vdCByZXR1cm5lZCBpZiBhIGNhbGxiYWNrIGlzIGdpdmVuLlxuICAgKi9cbiAgYWRkVG9NeVNhdmVkVHJhY2tzOiBmdW5jdGlvbih0cmFja0lkcywgY2FsbGJhY2spIHtcbiAgICByZXR1cm4gV2ViQXBpUmVxdWVzdC5idWlsZGVyKHRoaXMuZ2V0QWNjZXNzVG9rZW4oKSlcbiAgICAgIC53aXRoUGF0aCgnL3YxL21lL3RyYWNrcycpXG4gICAgICAud2l0aEhlYWRlcnMoeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0pXG4gICAgICAud2l0aEJvZHlQYXJhbWV0ZXJzKHsgaWRzOiB0cmFja0lkcyB9KVxuICAgICAgLmJ1aWxkKClcbiAgICAgIC5leGVjdXRlKEh0dHBNYW5hZ2VyLnB1dCwgY2FsbGJhY2spO1xuICB9LFxuXG4gIC8qKlxuICAgKiBSZW1vdmUgYW4gYWxidW0gZnJvbSB0aGUgYXV0aGVudGljYXRlZCB1c2VyJ3MgWW91ciBNdXNpYyBsaWJyYXJ5LlxuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSBhbGJ1bUlkcyBUaGUgYWxidW0gSURzXG4gICAqIEBwYXJhbSB7cmVxdWVzdENhbGxiYWNrfSBbY2FsbGJhY2tdIE9wdGlvbmFsIGNhbGxiYWNrIG1ldGhvZCB0byBiZSBjYWxsZWQgaW5zdGVhZCBvZiB0aGUgcHJvbWlzZS5cbiAgICogQHJldHVybnMge1Byb21pc2V8dW5kZWZpbmVkfSBBIHByb21pc2UgdGhhdCBpZiBzdWNjZXNzZnVsIHJldHVybnMgbnVsbCwgb3RoZXJ3aXNlIGFuIGVycm9yLlxuICAgKiBOb3QgcmV0dXJuZWQgaWYgYSBjYWxsYmFjayBpcyBnaXZlbi5cbiAgICovXG4gIHJlbW92ZUZyb21NeVNhdmVkQWxidW1zOiBmdW5jdGlvbihhbGJ1bUlkcywgY2FsbGJhY2spIHtcbiAgICByZXR1cm4gV2ViQXBpUmVxdWVzdC5idWlsZGVyKHRoaXMuZ2V0QWNjZXNzVG9rZW4oKSlcbiAgICAgIC53aXRoUGF0aCgnL3YxL21lL2FsYnVtcycpXG4gICAgICAud2l0aEhlYWRlcnMoeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0pXG4gICAgICAud2l0aEJvZHlQYXJhbWV0ZXJzKGFsYnVtSWRzKVxuICAgICAgLmJ1aWxkKClcbiAgICAgIC5leGVjdXRlKEh0dHBNYW5hZ2VyLmRlbCwgY2FsbGJhY2spO1xuICB9LFxuXG4gIC8qKlxuICAgKiBBZGQgYW4gYWxidW0gZnJvbSB0aGUgYXV0aGVudGljYXRlZCB1c2VyJ3MgWW91ciBNdXNpYyBsaWJyYXJ5LlxuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSBhbGJ1bUlkcyBUaGUgdHJhY2sgSURzXG4gICAqIEBwYXJhbSB7cmVxdWVzdENhbGxiYWNrfSBbY2FsbGJhY2tdIE9wdGlvbmFsIGNhbGxiYWNrIG1ldGhvZCB0byBiZSBjYWxsZWQgaW5zdGVhZCBvZiB0aGUgcHJvbWlzZS5cbiAgICogQHJldHVybnMge1Byb21pc2V8dW5kZWZpbmVkfSBBIHByb21pc2UgdGhhdCBpZiBzdWNjZXNzZnVsIHJldHVybnMgbnVsbCwgb3RoZXJ3aXNlIGFuIGVycm9yLiBOb3QgcmV0dXJuZWQgaWYgYSBjYWxsYmFjayBpcyBnaXZlbi5cbiAgICovXG4gIGFkZFRvTXlTYXZlZEFsYnVtczogZnVuY3Rpb24oYWxidW1JZHMsIGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIFdlYkFwaVJlcXVlc3QuYnVpbGRlcih0aGlzLmdldEFjY2Vzc1Rva2VuKCkpXG4gICAgICAud2l0aFBhdGgoJy92MS9tZS9hbGJ1bXMnKVxuICAgICAgLndpdGhIZWFkZXJzKHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9KVxuICAgICAgLndpdGhCb2R5UGFyYW1ldGVycyhhbGJ1bUlkcylcbiAgICAgIC5idWlsZCgpXG4gICAgICAuZXhlY3V0ZShIdHRwTWFuYWdlci5wdXQsIGNhbGxiYWNrKTtcbiAgfSxcblxuICAvKipcbiAgICogUmV0cmlldmUgdGhlIGFsYnVtcyB0aGF0IGFyZSBzYXZlZCB0byB0aGUgYXV0aGVudGljYXRlZCB1c2VycyBZb3VyIE11c2ljIGxpYnJhcnkuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gT3B0aW9ucywgYmVpbmcgbWFya2V0LCBsaW1pdCwgYW5kL29yIG9mZnNldC5cbiAgICogQHBhcmFtIHtyZXF1ZXN0Q2FsbGJhY2t9IFtjYWxsYmFja10gT3B0aW9uYWwgY2FsbGJhY2sgbWV0aG9kIHRvIGJlIGNhbGxlZCBpbnN0ZWFkIG9mIHRoZSBwcm9taXNlLlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZXx1bmRlZmluZWR9IEEgcHJvbWlzZSB0aGF0IGlmIHN1Y2Nlc3NmdWwsIHJlc29sdmVzIHRvIGFuIG9iamVjdCBjb250YWluaW5nIGEgcGFnaW5nIG9iamVjdCB3aGljaCBpbiB0dXJuIGNvbnRhaW5zXG4gICAqICAgICAgICAgIHBsYXlsaXN0IGFsYnVtIG9iamVjdHMuIE5vdCByZXR1cm5lZCBpZiBhIGNhbGxiYWNrIGlzIGdpdmVuLlxuICAgKi9cbiAgZ2V0TXlTYXZlZEFsYnVtczogZnVuY3Rpb24ob3B0aW9ucywgY2FsbGJhY2spIHtcbiAgICByZXR1cm4gV2ViQXBpUmVxdWVzdC5idWlsZGVyKHRoaXMuZ2V0QWNjZXNzVG9rZW4oKSlcbiAgICAgIC53aXRoUGF0aCgnL3YxL21lL2FsYnVtcycpXG4gICAgICAud2l0aFF1ZXJ5UGFyYW1ldGVycyhvcHRpb25zKVxuICAgICAgLmJ1aWxkKClcbiAgICAgIC5leGVjdXRlKEh0dHBNYW5hZ2VyLmdldCwgY2FsbGJhY2spO1xuICB9LFxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBvbmUgb3IgbW9yZSBhbGJ1bXMgaXMgYWxyZWFkeSBzYXZlZCBpbiB0aGUgY3VycmVudCBTcG90aWZ5IHVzZXLigJlzIOKAnFlvdXIgTXVzaWPigJ0gbGlicmFyeS5cbiAgICogQHBhcmFtIHtzdHJpbmdbXX0gYWxidW1JZHMgVGhlIGFsYnVtIElEc1xuICAgKiBAcGFyYW0ge3JlcXVlc3RDYWxsYmFja30gW2NhbGxiYWNrXSBPcHRpb25hbCBjYWxsYmFjayBtZXRob2QgdG8gYmUgY2FsbGVkIGluc3RlYWQgb2YgdGhlIHByb21pc2UuXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfHVuZGVmaW5lZH0gQSBwcm9taXNlIHRoYXQgaWYgc3VjY2Vzc2Z1bCwgcmVzb2x2ZXMgaW50byBhbiBhcnJheSBvZiBib29sZWFucy4gVGhlIG9yZGVyXG4gICAqIG9mIHRoZSByZXR1cm5lZCBhcnJheSdzIGVsZW1lbnRzIGNvcnJlc3BvbmQgdG8gdGhlIGFsYnVtIElEIGluIHRoZSByZXF1ZXN0LlxuICAgKiBUaGUgYm9vbGVhbiB2YWx1ZSBvZiB0cnVlIGluZGljYXRlcyB0aGF0IHRoZSBhbGJ1bSBpcyBwYXJ0IG9mIHRoZSB1c2VyJ3MgbGlicmFyeSwgb3RoZXJ3aXNlIGZhbHNlLlxuICAgKiBOb3QgcmV0dXJuZWQgaWYgYSBjYWxsYmFjayBpcyBnaXZlbi5cbiAgICovXG4gIGNvbnRhaW5zTXlTYXZlZEFsYnVtczogZnVuY3Rpb24oYWxidW1JZHMsIGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIFdlYkFwaVJlcXVlc3QuYnVpbGRlcih0aGlzLmdldEFjY2Vzc1Rva2VuKCkpXG4gICAgICAud2l0aFBhdGgoJy92MS9tZS9hbGJ1bXMvY29udGFpbnMnKVxuICAgICAgLndpdGhRdWVyeVBhcmFtZXRlcnMoe1xuICAgICAgICBpZHM6IGFsYnVtSWRzLmpvaW4oJywnKVxuICAgICAgfSlcbiAgICAgIC5idWlsZCgpXG4gICAgICAuZXhlY3V0ZShIdHRwTWFuYWdlci5nZXQsIGNhbGxiYWNrKTtcbiAgfSxcblxuICAvKipcbiAgICogR2V0IHRoZSBjdXJyZW50IHVzZXIncyB0b3AgYXJ0aXN0cyBiYXNlZCBvbiBjYWxjdWxhdGVkIGFmZmluaXR5LlxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIE9wdGlvbnMsIGJlaW5nIHRpbWVfcmFuZ2UsIGxpbWl0LCBvZmZzZXQuXG4gICAqIEBwYXJhbSB7cmVxdWVzdENhbGxiYWNrfSBbY2FsbGJhY2tdIE9wdGlvbmFsIGNhbGxiYWNrIG1ldGhvZCB0byBiZSBjYWxsZWQgaW5zdGVhZCBvZiB0aGUgcHJvbWlzZS5cbiAgICogQHJldHVybnMge1Byb21pc2V8dW5kZWZpbmVkfSBBIHByb21pc2UgdGhhdCBpZiBzdWNjZXNzZnVsLCByZXNvbHZlcyBpbnRvIGEgcGFnaW5nIG9iamVjdCBvZiBhcnRpc3RzLFxuICAgKiAgICAgICAgICBvdGhlcndpc2UgYW4gZXJyb3IuIE5vdCByZXR1cm5lZCBpZiBhIGNhbGxiYWNrIGlzIGdpdmVuLlxuICAgKi9cbiAgZ2V0TXlUb3BBcnRpc3RzOiBmdW5jdGlvbihvcHRpb25zLCBjYWxsYmFjaykge1xuICAgIHJldHVybiBXZWJBcGlSZXF1ZXN0LmJ1aWxkZXIodGhpcy5nZXRBY2Nlc3NUb2tlbigpKVxuICAgICAgLndpdGhQYXRoKCcvdjEvbWUvdG9wL2FydGlzdHMnKVxuICAgICAgLndpdGhRdWVyeVBhcmFtZXRlcnMob3B0aW9ucylcbiAgICAgIC5idWlsZCgpXG4gICAgICAuZXhlY3V0ZShIdHRwTWFuYWdlci5nZXQsIGNhbGxiYWNrKTtcbiAgfSxcblxuICAvKipcbiAgICogR2V0IHRoZSBjdXJyZW50IHVzZXIncyB0b3AgdHJhY2tzIGJhc2VkIG9uIGNhbGN1bGF0ZWQgYWZmaW5pdHkuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gT3B0aW9ucywgYmVpbmcgdGltZV9yYW5nZSwgbGltaXQsIG9mZnNldC5cbiAgICogQHBhcmFtIHtyZXF1ZXN0Q2FsbGJhY2t9IFtjYWxsYmFja10gT3B0aW9uYWwgY2FsbGJhY2sgbWV0aG9kIHRvIGJlIGNhbGxlZCBpbnN0ZWFkIG9mIHRoZSBwcm9taXNlLlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZXx1bmRlZmluZWR9IEEgcHJvbWlzZSB0aGF0IGlmIHN1Y2Nlc3NmdWwsIHJlc29sdmVzIGludG8gYSBwYWdpbmcgb2JqZWN0IG9mIHRyYWNrcyxcbiAgICogICAgICAgICAgb3RoZXJ3aXNlIGFuIGVycm9yLiBOb3QgcmV0dXJuZWQgaWYgYSBjYWxsYmFjayBpcyBnaXZlbi5cbiAgICovXG4gIGdldE15VG9wVHJhY2tzOiBmdW5jdGlvbihvcHRpb25zLCBjYWxsYmFjaykge1xuICAgIHJldHVybiBXZWJBcGlSZXF1ZXN0LmJ1aWxkZXIodGhpcy5nZXRBY2Nlc3NUb2tlbigpKVxuICAgICAgLndpdGhQYXRoKCcvdjEvbWUvdG9wL3RyYWNrcycpXG4gICAgICAud2l0aFF1ZXJ5UGFyYW1ldGVycyhvcHRpb25zKVxuICAgICAgLmJ1aWxkKClcbiAgICAgIC5leGVjdXRlKEh0dHBNYW5hZ2VyLmdldCwgY2FsbGJhY2spO1xuICB9LFxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIEN1cnJlbnQgVXNlcidzIFJlY2VudGx5IFBsYXllZCBUcmFja3NcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBPcHRpb25zLCBiZWluZyB0eXBlLCBhZnRlciwgbGltaXQsIGJlZm9yZS5cbiAgICogQHBhcmFtIHtyZXF1ZXN0Q2FsbGJhY2t9IFtjYWxsYmFja10gT3B0aW9uYWwgY2FsbGJhY2sgbWV0aG9kIHRvIGJlIGNhbGxlZCBpbnN0ZWFkIG9mIHRoZSBwcm9taXNlLlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZXx1bmRlZmluZWR9IEEgcHJvbWlzZSB0aGF0IGlmIHN1Y2Nlc3NmdWwsIHJlc29sdmVzIGludG8gYSBwYWdpbmcgb2JqZWN0IG9mIHBsYXkgaGlzdG9yeSBvYmplY3RzLFxuICAgKiAgICAgICAgICBvdGhlcndpc2UgYW4gZXJyb3IuIE5vdCByZXR1cm5lZCBpZiBhIGNhbGxiYWNrIGlzIGdpdmVuLiBOb3RlIHRoYXQgdGhlIHJlc3BvbnNlIHdpbGwgYmUgZW1wdHlcbiAgICogICAgICAgICAgaW4gY2FzZSB0aGUgdXNlciBoYXMgZW5hYmxlZCBwcml2YXRlIHNlc3Npb24uXG4gICAqL1xuICBnZXRNeVJlY2VudGx5UGxheWVkVHJhY2tzOiBmdW5jdGlvbihvcHRpb25zLCBjYWxsYmFjaykge1xuICAgIHJldHVybiBXZWJBcGlSZXF1ZXN0LmJ1aWxkZXIodGhpcy5nZXRBY2Nlc3NUb2tlbigpKVxuICAgICAgLndpdGhQYXRoKCcvdjEvbWUvcGxheWVyL3JlY2VudGx5LXBsYXllZCcpXG4gICAgICAud2l0aFF1ZXJ5UGFyYW1ldGVycyhvcHRpb25zKVxuICAgICAgLmJ1aWxkKClcbiAgICAgIC5leGVjdXRlKEh0dHBNYW5hZ2VyLmdldCwgY2FsbGJhY2spO1xuICB9LFxuXG4gIC8qKlxuICAgKiBBZGQgdHJhY2sgb3IgZXBpc29kZSB0byBkZXZpY2UgcXVldWVcbiAgICogQHBhcmFtIHtzdHJpbmd9IFt1cmldIHVyaSBvZiB0aGUgdHJhY2sgb3IgZXBpc29kZSB0byBhZGRcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBPcHRpb25zLCBiZWluZyBkZXZpY2VfaWQuXG4gICAqIEBwYXJhbSB7cmVxdWVzdENhbGxiYWNrfSBbY2FsbGJhY2tdIE9wdGlvbmFsIGNhbGxiYWNrIG1ldGhvZCB0byBiZSBjYWxsZWQgaW5zdGVhZCBvZiB0aGUgcHJvbWlzZS5cbiAgICogQHJldHVybnMge1Byb21pc2V8dW5kZWZpbmVkfSBBIHByb21pc2UgdGhhdCBpZiBzdWNjZXNzZnVsLCByZXNvbHZlcyBpbnRvIGEgcGFnaW5nIG9iamVjdCBvZiB0cmFja3MsXG4gICAqICAgICAgICAgIG90aGVyd2lzZSBhbiBlcnJvci4gTm90IHJldHVybmVkIGlmIGEgY2FsbGJhY2sgaXMgZ2l2ZW4uXG4gICAqL1xuICBhZGRUb1F1ZXVlOiBmdW5jdGlvbih1cmksIG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIFdlYkFwaVJlcXVlc3QuYnVpbGRlcih0aGlzLmdldEFjY2Vzc1Rva2VuKCkpXG4gICAgICAud2l0aFBhdGgoJy92MS9tZS9wbGF5ZXIvcXVldWUnKVxuICAgICAgLndpdGhRdWVyeVBhcmFtZXRlcnMoXG4gICAgICAgIHtcbiAgICAgICAgICB1cmk6IHVyaVxuICAgICAgICB9LFxuICAgICAgICBvcHRpb25zXG4gICAgICApXG4gICAgICAuYnVpbGQoKVxuICAgICAgLmV4ZWN1dGUoSHR0cE1hbmFnZXIucG9zdCwgY2FsbGJhY2spO1xuICB9LFxuXG5cbiAgLyoqIFxuICAgKiBHZXQgdGhlIEN1cnJlbnQgVXNlcidzIEF2YWlsYWJsZSBEZXZpY2VzXG4gICAqIEBwYXJhbSB7cmVxdWVzdENhbGxiYWNrfSBbY2FsbGJhY2tdIE9wdGlvbmFsIGNhbGxiYWNrIG1ldGhvZCB0byBiZSBjYWxsZWQgaW5zdGVhZCBvZiB0aGUgcHJvbWlzZS5cbiAgICogQHJldHVybnMge1Byb21pc2V8dW5kZWZpbmVkfSBBIHByb21pc2UgdGhhdCBpZiBzdWNjZXNzZnVsLCByZXNvbHZlcyBpbnRvIGFuIGFycmF5IG9mIGRldmljZSBvYmplY3RzLFxuICAgKiAgICAgICAgICBvdGhlcndpc2UgYW4gZXJyb3IuIE5vdCByZXR1cm5lZCBpZiBhIGNhbGxiYWNrIGlzIGdpdmVuLlxuICAgKi9cbiAgZ2V0TXlEZXZpY2VzOiBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgIHJldHVybiBXZWJBcGlSZXF1ZXN0LmJ1aWxkZXIodGhpcy5nZXRBY2Nlc3NUb2tlbigpKVxuICAgICAgLndpdGhQYXRoKCcvdjEvbWUvcGxheWVyL2RldmljZXMnKVxuICAgICAgLmJ1aWxkKClcbiAgICAgIC5leGVjdXRlKEh0dHBNYW5hZ2VyLmdldCwgY2FsbGJhY2spO1xuICB9LFxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIEN1cnJlbnQgVXNlcidzIEN1cnJlbnRseSBQbGF5aW5nIFRyYWNrLlxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIE9wdGlvbnMsIGJlaW5nIG1hcmtldC5cbiAgICogQHBhcmFtIHtyZXF1ZXN0Q2FsbGJhY2t9IFtjYWxsYmFja10gT3B0aW9uYWwgY2FsbGJhY2sgbWV0aG9kIHRvIGJlIGNhbGxlZCBpbnN0ZWFkIG9mIHRoZSBwcm9taXNlLlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZXx1bmRlZmluZWR9IEEgcHJvbWlzZSB0aGF0IGlmIHN1Y2Nlc3NmdWwsIHJlc29sdmVzIGludG8gYSBwYWdpbmcgb2JqZWN0IG9mIHRyYWNrcyxcbiAgICogICAgICAgICAgb3RoZXJ3aXNlIGFuIGVycm9yLiBOb3QgcmV0dXJuZWQgaWYgYSBjYWxsYmFjayBpcyBnaXZlbi5cbiAgICovXG4gIGdldE15Q3VycmVudFBsYXlpbmdUcmFjazogZnVuY3Rpb24ob3B0aW9ucywgY2FsbGJhY2spIHtcbiAgICByZXR1cm4gV2ViQXBpUmVxdWVzdC5idWlsZGVyKHRoaXMuZ2V0QWNjZXNzVG9rZW4oKSlcbiAgICAgIC53aXRoUGF0aCgnL3YxL21lL3BsYXllci9jdXJyZW50bHktcGxheWluZycpXG4gICAgICAud2l0aFF1ZXJ5UGFyYW1ldGVycyhvcHRpb25zKVxuICAgICAgLmJ1aWxkKClcbiAgICAgIC5leGVjdXRlKEh0dHBNYW5hZ2VyLmdldCwgY2FsbGJhY2spO1xuICB9LFxuXG4gIC8qKlxuICAgKiBHZXQgSW5mb3JtYXRpb24gQWJvdXQgVGhlIFVzZXIncyBDdXJyZW50IFBsYXliYWNrIFN0YXRlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gT3B0aW9ucywgYmVpbmcgbWFya2V0IGFuZCBhZGRpdGlvbmFsX3R5cGVzLlxuICAgKiBAcGFyYW0ge3JlcXVlc3RDYWxsYmFja30gW2NhbGxiYWNrXSBPcHRpb25hbCBjYWxsYmFjayBtZXRob2QgdG8gYmUgY2FsbGVkIGluc3RlYWQgb2YgdGhlIHByb21pc2UuXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfHVuZGVmaW5lZH0gQSBwcm9taXNlIHRoYXQgaWYgc3VjY2Vzc2Z1bCwgcmVzb2x2ZXMgaW50byBhIHBhZ2luZyBvYmplY3Qgb2YgdHJhY2tzLFxuICAgKiAgICAgICAgICBvdGhlcndpc2UgYW4gZXJyb3IuIE5vdCByZXR1cm5lZCBpZiBhIGNhbGxiYWNrIGlzIGdpdmVuLlxuICAgKi9cbiAgZ2V0TXlDdXJyZW50UGxheWJhY2tTdGF0ZTogZnVuY3Rpb24ob3B0aW9ucywgY2FsbGJhY2spIHtcbiAgICByZXR1cm4gV2ViQXBpUmVxdWVzdC5idWlsZGVyKHRoaXMuZ2V0QWNjZXNzVG9rZW4oKSlcbiAgICAgIC53aXRoUGF0aCgnL3YxL21lL3BsYXllcicpXG4gICAgICAud2l0aFF1ZXJ5UGFyYW1ldGVycyhvcHRpb25zKVxuICAgICAgLmJ1aWxkKClcbiAgICAgIC5leGVjdXRlKEh0dHBNYW5hZ2VyLmdldCwgY2FsbGJhY2spO1xuICB9LFxuXG4gIC8qKlxuICAgKiBUcmFuc2ZlciBhIFVzZXIncyBQbGF5YmFja1xuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSBbZGV2aWNlSWRzXSBBbiBfYXJyYXlfIGNvbnRhaW5pbmcgYSBkZXZpY2UgSUQgb24gd2hpY2ggcGxheWJhY2sgc2hvdWxkIGJlIHN0YXJ0ZWQvdHJhbnNmZXJyZWQuIFxuICAgKiAoTk9URTogVGhlIEFQSSBpcyBjdXJyZW50bHkgb25seSBzdXBwb3J0aW5nIGEgc2luZ2xlIGRldmljZSBJRC4pXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gT3B0aW9ucywgdGhlIG9ubHkgb25lIGJlaW5nICdwbGF5Jy5cbiAgICogQHBhcmFtIHtyZXF1ZXN0Q2FsbGJhY2t9IFtjYWxsYmFja10gT3B0aW9uYWwgY2FsbGJhY2sgbWV0aG9kIHRvIGJlIGNhbGxlZCBpbnN0ZWFkIG9mIHRoZSBwcm9taXNlLlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZXx1bmRlZmluZWR9IEEgcHJvbWlzZSB0aGF0IGlmIHN1Y2Nlc3NmdWwsIHJlc29sdmVzIGludG8gYW4gZW1wdHkgcmVzcG9uc2UsXG4gICAqICAgICAgICAgIG90aGVyd2lzZSBhbiBlcnJvci4gTm90IHJldHVybmVkIGlmIGEgY2FsbGJhY2sgaXMgZ2l2ZW4uXG4gICAqL1xuICB0cmFuc2Zlck15UGxheWJhY2s6IGZ1bmN0aW9uKGRldmljZUlkcywgb3B0aW9ucywgY2FsbGJhY2spIHtcbiAgICByZXR1cm4gV2ViQXBpUmVxdWVzdC5idWlsZGVyKHRoaXMuZ2V0QWNjZXNzVG9rZW4oKSlcbiAgICAgIC53aXRoUGF0aCgnL3YxL21lL3BsYXllcicpXG4gICAgICAud2l0aEhlYWRlcnMoeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0pXG4gICAgICAud2l0aEJvZHlQYXJhbWV0ZXJzKFxuICAgICAgICB7XG4gICAgICAgICAgZGV2aWNlX2lkczogZGV2aWNlSWRzLFxuICAgICAgICB9LFxuICAgICAgICBvcHRpb25zXG4gICAgICApXG4gICAgICAuYnVpbGQoKVxuICAgICAgLmV4ZWN1dGUoSHR0cE1hbmFnZXIucHV0LCBjYWxsYmFjayk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFN0YXJ0cyBvIFJlc3VtZXMgdGhlIEN1cnJlbnQgVXNlcidzIFBsYXliYWNrXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gT3B0aW9ucywgYmVpbmcgZGV2aWNlX2lkLCBjb250ZXh0X3VyaSwgb2Zmc2V0LCB1cmlzLCBwb3NpdGlvbl9tcy5cbiAgICogQHBhcmFtIHtyZXF1ZXN0Q2FsbGJhY2t9IFtjYWxsYmFja10gT3B0aW9uYWwgY2FsbGJhY2sgbWV0aG9kIHRvIGJlIGNhbGxlZCBpbnN0ZWFkIG9mIHRoZSBwcm9taXNlLlxuICAgKiBAZXhhbXBsZSBwbGF5KHtjb250ZXh0X3VyaTogJ3Nwb3RpZnk6YWxidW06NWh0N0l0SmdwQkg3VzZ2SjVCcXBQcid9KS50aGVuKC4uLilcbiAgICogQHJldHVybnMge1Byb21pc2V8dW5kZWZpbmVkfSBBIHByb21pc2UgdGhhdCBpZiBzdWNjZXNzZnVsLCByZXNvbHZlcyBpbnRvIGFuIGVtcHR5IHJlc3BvbnNlLFxuICAgKiAgICAgICAgICBvdGhlcndpc2UgYW4gZXJyb3IuIE5vdCByZXR1cm5lZCBpZiBhIGNhbGxiYWNrIGlzIGdpdmVuLlxuICAgKi9cbiAgcGxheTogZnVuY3Rpb24ob3B0aW9ucywgY2FsbGJhY2spIHtcbiAgICAvKmpzaGludCBjYW1lbGNhc2U6IGZhbHNlICovXG4gICAgdmFyIF9vcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICB2YXIgcXVlcnlQYXJhbXMgPSBfb3B0aW9ucy5kZXZpY2VfaWRcbiAgICAgID8geyBkZXZpY2VfaWQ6IF9vcHRpb25zLmRldmljZV9pZCB9XG4gICAgICA6IG51bGw7XG4gICAgdmFyIHBvc3REYXRhID0ge307XG4gICAgWydjb250ZXh0X3VyaScsICd1cmlzJywgJ29mZnNldCcsICdwb3NpdGlvbl9tcyddLmZvckVhY2goZnVuY3Rpb24oZmllbGQpIHtcbiAgICAgIGlmIChmaWVsZCBpbiBfb3B0aW9ucykge1xuICAgICAgICBwb3N0RGF0YVtmaWVsZF0gPSBfb3B0aW9uc1tmaWVsZF07XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIFdlYkFwaVJlcXVlc3QuYnVpbGRlcih0aGlzLmdldEFjY2Vzc1Rva2VuKCkpXG4gICAgICAud2l0aFBhdGgoJy92MS9tZS9wbGF5ZXIvcGxheScpXG4gICAgICAud2l0aFF1ZXJ5UGFyYW1ldGVycyhxdWVyeVBhcmFtcylcbiAgICAgIC53aXRoSGVhZGVycyh7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSlcbiAgICAgIC53aXRoQm9keVBhcmFtZXRlcnMocG9zdERhdGEpXG4gICAgICAuYnVpbGQoKVxuICAgICAgLmV4ZWN1dGUoSHR0cE1hbmFnZXIucHV0LCBjYWxsYmFjayk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFBhdXNlcyB0aGUgQ3VycmVudCBVc2VyJ3MgUGxheWJhY2tcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBPcHRpb25zLCBiZWluZyBkZXZpY2VfaWQuIElmIGxlZnQgZW1wdHkgd2lsbCB0YXJnZXQgdGhlIHVzZXIncyBjdXJyZW50bHkgYWN0aXZlIGRldmljZS5cbiAgICogQHBhcmFtIHtyZXF1ZXN0Q2FsbGJhY2t9IFtjYWxsYmFja10gT3B0aW9uYWwgY2FsbGJhY2sgbWV0aG9kIHRvIGJlIGNhbGxlZCBpbnN0ZWFkIG9mIHRoZSBwcm9taXNlLlxuICAgKiBAZXhhbXBsZSBwYXVzZSgpLnRoZW4oLi4uKVxuICAgKiBAcmV0dXJucyB7UHJvbWlzZXx1bmRlZmluZWR9IEEgcHJvbWlzZSB0aGF0IGlmIHN1Y2Nlc3NmdWwsIHJlc29sdmVzIGludG8gYW4gZW1wdHkgcmVzcG9uc2UsXG4gICAqICAgICAgICAgIG90aGVyd2lzZSBhbiBlcnJvci4gTm90IHJldHVybmVkIGlmIGEgY2FsbGJhY2sgaXMgZ2l2ZW4uXG4gICAqL1xuICBwYXVzZTogZnVuY3Rpb24ob3B0aW9ucywgY2FsbGJhY2spIHtcbiAgICByZXR1cm4gKFxuICAgICAgV2ViQXBpUmVxdWVzdC5idWlsZGVyKHRoaXMuZ2V0QWNjZXNzVG9rZW4oKSlcbiAgICAgICAgLndpdGhQYXRoKCcvdjEvbWUvcGxheWVyL3BhdXNlJylcbiAgICAgICAgLypqc2hpbnQgY2FtZWxjYXNlOiBmYWxzZSAqL1xuICAgICAgICAud2l0aFF1ZXJ5UGFyYW1ldGVycyhcbiAgICAgICAgICBvcHRpb25zICYmIG9wdGlvbnMuZGV2aWNlX2lkID8geyBkZXZpY2VfaWQ6IG9wdGlvbnMuZGV2aWNlX2lkIH0gOiBudWxsXG4gICAgICAgIClcbiAgICAgICAgLndpdGhIZWFkZXJzKHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9KVxuICAgICAgICAuYnVpbGQoKVxuICAgICAgICAuZXhlY3V0ZShIdHRwTWFuYWdlci5wdXQsIGNhbGxiYWNrKVxuICAgICk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFNraXAgdGhlIEN1cnJlbnQgVXNlcidzIFBsYXliYWNrIFRvIFByZXZpb3VzIFRyYWNrXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gT3B0aW9ucywgYmVpbmcgZGV2aWNlX2lkLiBJZiBsZWZ0IGVtcHR5IHdpbGwgdGFyZ2V0IHRoZSB1c2VyJ3MgY3VycmVudGx5IGFjdGl2ZSBkZXZpY2UuXG4gICAqIEBwYXJhbSB7cmVxdWVzdENhbGxiYWNrfSBbY2FsbGJhY2tdIE9wdGlvbmFsIGNhbGxiYWNrIG1ldGhvZCB0byBiZSBjYWxsZWQgaW5zdGVhZCBvZiB0aGUgcHJvbWlzZS5cbiAgICogQGV4YW1wbGUgc2tpcFRvUHJldmlvdXMoKS50aGVuKC4uLilcbiAgICogQHJldHVybnMge1Byb21pc2V8dW5kZWZpbmVkfSBBIHByb21pc2UgdGhhdCBpZiBzdWNjZXNzZnVsLCByZXNvbHZlcyBpbnRvIGFuIGVtcHR5IHJlc3BvbnNlLFxuICAgKiAgICAgICAgICBvdGhlcndpc2UgYW4gZXJyb3IuIE5vdCByZXR1cm5lZCBpZiBhIGNhbGxiYWNrIGlzIGdpdmVuLlxuICAgKi9cbiAgc2tpcFRvUHJldmlvdXM6IGZ1bmN0aW9uKG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIFdlYkFwaVJlcXVlc3QuYnVpbGRlcih0aGlzLmdldEFjY2Vzc1Rva2VuKCkpXG4gICAgICAud2l0aFBhdGgoJy92MS9tZS9wbGF5ZXIvcHJldmlvdXMnKVxuICAgICAgLndpdGhRdWVyeVBhcmFtZXRlcnMoXG4gICAgICAgIG9wdGlvbnMgJiYgb3B0aW9ucy5kZXZpY2VfaWQgPyB7IGRldmljZV9pZDogb3B0aW9ucy5kZXZpY2VfaWQgfSA6IG51bGxcbiAgICAgIClcbiAgICAgIC5idWlsZCgpXG4gICAgICAuZXhlY3V0ZShIdHRwTWFuYWdlci5wb3N0LCBjYWxsYmFjayk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFNraXAgdGhlIEN1cnJlbnQgVXNlcidzIFBsYXliYWNrIFRvIE5leHQgVHJhY2tcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBPcHRpb25zLCBiZWluZyBkZXZpY2VfaWQuIElmIGxlZnQgZW1wdHkgd2lsbCB0YXJnZXQgdGhlIHVzZXIncyBjdXJyZW50bHkgYWN0aXZlIGRldmljZS5cbiAgICogQHBhcmFtIHtyZXF1ZXN0Q2FsbGJhY2t9IFtjYWxsYmFja10gT3B0aW9uYWwgY2FsbGJhY2sgbWV0aG9kIHRvIGJlIGNhbGxlZCBpbnN0ZWFkIG9mIHRoZSBwcm9taXNlLlxuICAgKiBAZXhhbXBsZSBza2lwVG9OZXh0KCkudGhlbiguLi4pXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfHVuZGVmaW5lZH0gQSBwcm9taXNlIHRoYXQgaWYgc3VjY2Vzc2Z1bCwgcmVzb2x2ZXMgaW50byBhbiBlbXB0eSByZXNwb25zZSxcbiAgICogICAgICAgICAgb3RoZXJ3aXNlIGFuIGVycm9yLiBOb3QgcmV0dXJuZWQgaWYgYSBjYWxsYmFjayBpcyBnaXZlbi5cbiAgICovXG4gIHNraXBUb05leHQ6IGZ1bmN0aW9uKG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIFdlYkFwaVJlcXVlc3QuYnVpbGRlcih0aGlzLmdldEFjY2Vzc1Rva2VuKCkpXG4gICAgICAud2l0aFBhdGgoJy92MS9tZS9wbGF5ZXIvbmV4dCcpXG4gICAgICAud2l0aFF1ZXJ5UGFyYW1ldGVycyhcbiAgICAgICAgb3B0aW9ucyAmJiBvcHRpb25zLmRldmljZV9pZCA/IHsgZGV2aWNlX2lkOiBvcHRpb25zLmRldmljZV9pZCB9IDogbnVsbFxuICAgICAgKVxuICAgICAgLmJ1aWxkKClcbiAgICAgIC5leGVjdXRlKEh0dHBNYW5hZ2VyLnBvc3QsIGNhbGxiYWNrKTtcbiAgfSxcblxuICAvKipcbiAgICogU2Vla3MgdG8gdGhlIGdpdmVuIHBvc2l0aW9uIGluIHRoZSB1c2Vy4oCZcyBjdXJyZW50bHkgcGxheWluZyB0cmFjay5cbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IHBvc2l0aW9uTXMgVGhlIHBvc2l0aW9uIGluIG1pbGxpc2Vjb25kcyB0byBzZWVrIHRvLiBNdXN0IGJlIGEgcG9zaXRpdmUgbnVtYmVyLlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBPcHRpb25zLCBiZWluZyBkZXZpY2VfaWQuIElmIGxlZnQgZW1wdHkgd2lsbCB0YXJnZXQgdGhlIHVzZXIncyBjdXJyZW50bHkgYWN0aXZlIGRldmljZS5cbiAgICogQHBhcmFtIHtmdW5jdGlvbihPYmplY3QsT2JqZWN0KX0gY2FsbGJhY2sgQW4gb3B0aW9uYWwgY2FsbGJhY2sgdGhhdCByZWNlaXZlcyAyIHBhcmFtZXRlcnMuIFRoZSBmaXJzdFxuICAgKiBvbmUgaXMgdGhlIGVycm9yIG9iamVjdCAobnVsbCBpZiBubyBlcnJvciksIGFuZCB0aGUgc2Vjb25kIGlzIHRoZSB2YWx1ZSBpZiB0aGUgcmVxdWVzdCBzdWNjZWVkZWQuXG4gICAqIEByZXR1cm4ge09iamVjdH0gTnVsbCBpZiBhIGNhbGxiYWNrIGlzIHByb3ZpZGVkLCBhIGBQcm9taXNlYCBvYmplY3Qgb3RoZXJ3aXNlXG4gICAqL1xuICBzZWVrOiBmdW5jdGlvbihwb3NpdGlvbk1zLCBvcHRpb25zLCBjYWxsYmFjaykge1xuICAgIHZhciBwYXJhbXMgPSB7XG4gICAgICAvKiBqc2hpbnQgY2FtZWxjYXNlOiBmYWxzZSAqL1xuICAgICAgcG9zaXRpb25fbXM6IHBvc2l0aW9uTXNcbiAgICB9O1xuICAgIGlmIChvcHRpb25zICYmICdkZXZpY2VfaWQnIGluIG9wdGlvbnMpIHtcbiAgICAgIC8qIGpzaGludCBjYW1lbGNhc2U6IGZhbHNlICovXG4gICAgICBwYXJhbXMuZGV2aWNlX2lkID0gb3B0aW9ucy5kZXZpY2VfaWQ7XG4gICAgfVxuICAgIHJldHVybiBXZWJBcGlSZXF1ZXN0LmJ1aWxkZXIodGhpcy5nZXRBY2Nlc3NUb2tlbigpKVxuICAgICAgLndpdGhQYXRoKCcvdjEvbWUvcGxheWVyL3NlZWsnKVxuICAgICAgLndpdGhRdWVyeVBhcmFtZXRlcnMocGFyYW1zKVxuICAgICAgLmJ1aWxkKClcbiAgICAgIC5leGVjdXRlKEh0dHBNYW5hZ2VyLnB1dCwgY2FsbGJhY2spO1xuICB9LFxuXG4gIC8qKlxuICAgKiBTZXQgUmVwZWF0IE1vZGUgT24gVGhlIEN1cnJlbnQgVXNlcidzIFBsYXliYWNrXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbc3RhdGVdIFN0YXRlICh0cmFjaywgY29udGV4dCwgb3Igb2ZmKVxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIE9wdGlvbnMsIGJlaW5nIGRldmljZV9pZC4gSWYgbGVmdCBlbXB0eSB3aWxsIHRhcmdldCB0aGUgdXNlcidzIGN1cnJlbnRseSBhY3RpdmUgZGV2aWNlLlxuICAgKiBAcGFyYW0ge3JlcXVlc3RDYWxsYmFja30gW2NhbGxiYWNrXSBPcHRpb25hbCBjYWxsYmFjayBtZXRob2QgdG8gYmUgY2FsbGVkIGluc3RlYWQgb2YgdGhlIHByb21pc2UuXG4gICAqIEBleGFtcGxlIHNldFJlcGVhdCgnY29udGV4dCcsIHt9KS50aGVuKC4uLilcbiAgICogQHJldHVybnMge1Byb21pc2V8dW5kZWZpbmVkfSBBIHByb21pc2UgdGhhdCBpZiBzdWNjZXNzZnVsLCByZXNvbHZlcyBpbnRvIGFuIGVtcHR5IHJlc3BvbnNlLFxuICAgKiAgICAgICAgICBvdGhlcndpc2UgYW4gZXJyb3IuIE5vdCByZXR1cm5lZCBpZiBhIGNhbGxiYWNrIGlzIGdpdmVuLlxuICAgKi9cbiAgc2V0UmVwZWF0OiBmdW5jdGlvbihzdGF0ZSwgb3B0aW9ucywgY2FsbGJhY2spIHtcbiAgICB2YXIgcGFyYW1zID0ge1xuICAgICAgc3RhdGU6IHN0YXRlXG4gICAgfTtcbiAgICBpZiAob3B0aW9ucyAmJiAnZGV2aWNlX2lkJyBpbiBvcHRpb25zKSB7XG4gICAgICAvKiBqc2hpbnQgY2FtZWxjYXNlOiBmYWxzZSAqL1xuICAgICAgcGFyYW1zLmRldmljZV9pZCA9IG9wdGlvbnMuZGV2aWNlX2lkO1xuICAgIH1cbiAgICByZXR1cm4gV2ViQXBpUmVxdWVzdC5idWlsZGVyKHRoaXMuZ2V0QWNjZXNzVG9rZW4oKSlcbiAgICAgIC53aXRoUGF0aCgnL3YxL21lL3BsYXllci9yZXBlYXQnKVxuICAgICAgLndpdGhRdWVyeVBhcmFtZXRlcnMocGFyYW1zKVxuICAgICAgLmJ1aWxkKClcbiAgICAgIC5leGVjdXRlKEh0dHBNYW5hZ2VyLnB1dCwgY2FsbGJhY2spO1xuICB9LFxuXG4gIC8qKlxuICAgKiBTZXQgU2h1ZmZsZSBNb2RlIE9uIFRoZSBDdXJyZW50IFVzZXIncyBQbGF5YmFja1xuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtzdGF0ZV0gU3RhdGUgXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gT3B0aW9ucywgYmVpbmcgZGV2aWNlX2lkLiBJZiBsZWZ0IGVtcHR5IHdpbGwgdGFyZ2V0IHRoZSB1c2VyJ3MgY3VycmVudGx5IGFjdGl2ZSBkZXZpY2UuXG4gICAqIEBwYXJhbSB7cmVxdWVzdENhbGxiYWNrfSBbY2FsbGJhY2tdIE9wdGlvbmFsIGNhbGxiYWNrIG1ldGhvZCB0byBiZSBjYWxsZWQgaW5zdGVhZCBvZiB0aGUgcHJvbWlzZS5cbiAgICogQGV4YW1wbGUgc2V0U2h1ZmZsZSh7c3RhdGU6ICdmYWxzZSd9KS50aGVuKC4uLilcbiAgICogQHJldHVybnMge1Byb21pc2V8dW5kZWZpbmVkfSBBIHByb21pc2UgdGhhdCBpZiBzdWNjZXNzZnVsLCByZXNvbHZlcyBpbnRvIGFuIGVtcHR5IHJlc3BvbnNlLFxuICAgKiAgICAgICAgICBvdGhlcndpc2UgYW4gZXJyb3IuIE5vdCByZXR1cm5lZCBpZiBhIGNhbGxiYWNrIGlzIGdpdmVuLlxuICAgKi9cbiAgc2V0U2h1ZmZsZTogZnVuY3Rpb24oc3RhdGUsIG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gICAgdmFyIHBhcmFtcyA9IHtcbiAgICAgIHN0YXRlOiBzdGF0ZVxuICAgIH07XG4gICAgaWYgKG9wdGlvbnMgJiYgJ2RldmljZV9pZCcgaW4gb3B0aW9ucykge1xuICAgICAgLyoganNoaW50IGNhbWVsY2FzZTogZmFsc2UgKi9cbiAgICAgIHBhcmFtcy5kZXZpY2VfaWQgPSBvcHRpb25zLmRldmljZV9pZDtcbiAgICB9XG4gICAgcmV0dXJuIFdlYkFwaVJlcXVlc3QuYnVpbGRlcih0aGlzLmdldEFjY2Vzc1Rva2VuKCkpXG4gICAgICAud2l0aFBhdGgoJy92MS9tZS9wbGF5ZXIvc2h1ZmZsZScpXG4gICAgICAud2l0aFF1ZXJ5UGFyYW1ldGVycyhwYXJhbXMpXG4gICAgICAuYnVpbGQoKVxuICAgICAgLmV4ZWN1dGUoSHR0cE1hbmFnZXIucHV0LCBjYWxsYmFjayk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFNldCB0aGUgdm9sdW1lIGZvciB0aGUgdXNlcuKAmXMgY3VycmVudCBwbGF5YmFjayBkZXZpY2UuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB2b2x1bWVQZXJjZW50IFRoZSB2b2x1bWUgdG8gc2V0LiBNdXN0IGJlIGEgdmFsdWUgZnJvbSAwIHRvIDEwMC5cbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgT3B0aW9ucywgYmVpbmcgZGV2aWNlX2lkLiBJZiBsZWZ0IGVtcHR5IHdpbGwgdGFyZ2V0IHRoZSB1c2VyJ3MgY3VycmVudGx5IGFjdGl2ZSBkZXZpY2UuXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oT2JqZWN0LE9iamVjdCl9IGNhbGxiYWNrIEFuIG9wdGlvbmFsIGNhbGxiYWNrIHRoYXQgcmVjZWl2ZXMgMiBwYXJhbWV0ZXJzLiBUaGUgZmlyc3RcbiAgICogb25lIGlzIHRoZSBlcnJvciBvYmplY3QgKG51bGwgaWYgbm8gZXJyb3IpLCBhbmQgdGhlIHNlY29uZCBpcyB0aGUgdmFsdWUgaWYgdGhlIHJlcXVlc3Qgc3VjY2VlZGVkLlxuICAgKiBAcmV0dXJuIHtPYmplY3R9IE51bGwgaWYgYSBjYWxsYmFjayBpcyBwcm92aWRlZCwgYSBgUHJvbWlzZWAgb2JqZWN0IG90aGVyd2lzZVxuICAgKi9cbiAgc2V0Vm9sdW1lOiBmdW5jdGlvbih2b2x1bWVQZXJjZW50LCBvcHRpb25zLCBjYWxsYmFjaykge1xuICAgIHZhciBwYXJhbXMgPSB7XG4gICAgICAvKiBqc2hpbnQgY2FtZWxjYXNlOiBmYWxzZSAqL1xuICAgICAgdm9sdW1lX3BlcmNlbnQ6IHZvbHVtZVBlcmNlbnRcbiAgICB9O1xuICAgIGlmIChvcHRpb25zICYmICdkZXZpY2VfaWQnIGluIG9wdGlvbnMpIHtcbiAgICAgIC8qIGpzaGludCBjYW1lbGNhc2U6IGZhbHNlICovXG4gICAgICBwYXJhbXMuZGV2aWNlX2lkID0gb3B0aW9ucy5kZXZpY2VfaWQ7XG4gICAgfVxuICAgIHJldHVybiBXZWJBcGlSZXF1ZXN0LmJ1aWxkZXIodGhpcy5nZXRBY2Nlc3NUb2tlbigpKVxuICAgICAgLndpdGhQYXRoKCcvdjEvbWUvcGxheWVyL3ZvbHVtZScpXG4gICAgICAud2l0aFF1ZXJ5UGFyYW1ldGVycyhwYXJhbXMpXG4gICAgICAuYnVpbGQoKVxuICAgICAgLmV4ZWN1dGUoSHR0cE1hbmFnZXIucHV0LCBjYWxsYmFjayk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEFkZCB0aGUgY3VycmVudCB1c2VyIGFzIGEgZm9sbG93ZXIgb2Ygb25lIG9yIG1vcmUgb3RoZXIgU3BvdGlmeSB1c2Vycy5cbiAgICogQHBhcmFtIHtzdHJpbmdbXX0gdXNlcklkcyBUaGUgSURzIG9mIHRoZSB1c2VycyB0byBiZSBmb2xsb3dlZC5cbiAgICogQHBhcmFtIHtyZXF1ZXN0Q2FsbGJhY2t9IFtjYWxsYmFja10gT3B0aW9uYWwgY2FsbGJhY2sgbWV0aG9kIHRvIGJlIGNhbGxlZCBpbnN0ZWFkIG9mIHRoZSBwcm9taXNlLlxuICAgKiBAZXhhbXBsZSBmb2xsb3dVc2VycyhbJ3RoZWxpbm1pY2hhZWwnLCAnd2l6emxlciddKS50aGVuKC4uLilcbiAgICogQHJldHVybnMge1Byb21pc2V8dW5kZWZpbmVkfSBBIHByb21pc2UgdGhhdCBpZiBzdWNjZXNzZnVsLCBzaW1wbHkgcmVzb2x2ZXMgdG8gYW4gZW1wdHkgb2JqZWN0LiBJZiByZWplY3RlZCxcbiAgICogICAgICAgICAgaXQgY29udGFpbnMgYW4gZXJyb3Igb2JqZWN0LiBOb3QgcmV0dXJuZWQgaWYgYSBjYWxsYmFjayBpcyBnaXZlbi5cbiAgICovXG4gIGZvbGxvd1VzZXJzOiBmdW5jdGlvbih1c2VySWRzLCBjYWxsYmFjaykge1xuICAgIHJldHVybiBXZWJBcGlSZXF1ZXN0LmJ1aWxkZXIodGhpcy5nZXRBY2Nlc3NUb2tlbigpKVxuICAgICAgLndpdGhQYXRoKCcvdjEvbWUvZm9sbG93aW5nJylcbiAgICAgIC53aXRoUXVlcnlQYXJhbWV0ZXJzKHtcbiAgICAgICAgaWRzOiB1c2VySWRzLmpvaW4oJywnKSxcbiAgICAgICAgdHlwZTogJ3VzZXInXG4gICAgICB9KVxuICAgICAgLmJ1aWxkKClcbiAgICAgIC5leGVjdXRlKEh0dHBNYW5hZ2VyLnB1dCwgY2FsbGJhY2spO1xuICB9LFxuXG4gIC8qKlxuICAgKiBBZGQgdGhlIGN1cnJlbnQgdXNlciBhcyBhIGZvbGxvd2VyIG9mIG9uZSBvciBtb3JlIGFydGlzdHMuXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IGFydGlzdElkcyBUaGUgSURzIG9mIHRoZSBhcnRpc3RzIHRvIGJlIGZvbGxvd2VkLlxuICAgKiBAcGFyYW0ge3JlcXVlc3RDYWxsYmFja30gW2NhbGxiYWNrXSBPcHRpb25hbCBjYWxsYmFjayBtZXRob2QgdG8gYmUgY2FsbGVkIGluc3RlYWQgb2YgdGhlIHByb21pc2UuXG4gICAqIEBleGFtcGxlIGZvbGxvd0FydGlzdHMoWycwTGNKTHFiQm1hR1VmdDFlOU1tOEhWJywgJzNncXYxa2dpdkFjOTJLblVtNGVsS3YnXSkudGhlbiguLi4pXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfHVuZGVmaW5lZH0gQSBwcm9taXNlIHRoYXQgaWYgc3VjY2Vzc2Z1bCwgc2ltcGx5IHJlc29sdmVzIHRvIGFuIGVtcHR5IG9iamVjdC4gSWYgcmVqZWN0ZWQsXG4gICAqICAgICAgICAgIGl0IGNvbnRhaW5zIGFuIGVycm9yIG9iamVjdC4gTm90IHJldHVybmVkIGlmIGEgY2FsbGJhY2sgaXMgZ2l2ZW4uXG4gICAqL1xuICBmb2xsb3dBcnRpc3RzOiBmdW5jdGlvbihhcnRpc3RJZHMsIGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIFdlYkFwaVJlcXVlc3QuYnVpbGRlcih0aGlzLmdldEFjY2Vzc1Rva2VuKCkpXG4gICAgICAud2l0aFBhdGgoJy92MS9tZS9mb2xsb3dpbmcnKVxuICAgICAgLndpdGhRdWVyeVBhcmFtZXRlcnMoe1xuICAgICAgICBpZHM6IGFydGlzdElkcy5qb2luKCcsJyksXG4gICAgICAgIHR5cGU6ICdhcnRpc3QnXG4gICAgICB9KVxuICAgICAgLmJ1aWxkKClcbiAgICAgIC5leGVjdXRlKEh0dHBNYW5hZ2VyLnB1dCwgY2FsbGJhY2spO1xuICB9LFxuXG4gIC8qKlxuICAgKiBSZW1vdmUgdGhlIGN1cnJlbnQgdXNlciBhcyBhIGZvbGxvd2VyIG9mIG9uZSBvciBtb3JlIG90aGVyIFNwb3RpZnkgdXNlcnMuXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IHVzZXJJZHMgVGhlIElEcyBvZiB0aGUgdXNlcnMgdG8gYmUgdW5mb2xsb3dlZC5cbiAgICogQHBhcmFtIHtyZXF1ZXN0Q2FsbGJhY2t9IFtjYWxsYmFja10gT3B0aW9uYWwgY2FsbGJhY2sgbWV0aG9kIHRvIGJlIGNhbGxlZCBpbnN0ZWFkIG9mIHRoZSBwcm9taXNlLlxuICAgKiBAZXhhbXBsZSB1bmZvbGxvd1VzZXJzKFsndGhlbGlubWljaGFlbCcsICd3aXp6bGVyJ10pLnRoZW4oLi4uKVxuICAgKiBAcmV0dXJucyB7UHJvbWlzZXx1bmRlZmluZWR9IEEgcHJvbWlzZSB0aGF0IGlmIHN1Y2Nlc3NmdWwsIHNpbXBseSByZXNvbHZlcyB0byBhbiBlbXB0eSBvYmplY3QuIElmIHJlamVjdGVkLFxuICAgKiAgICAgICAgICBpdCBjb250YWlucyBhbiBlcnJvciBvYmplY3QuIE5vdCByZXR1cm5lZCBpZiBhIGNhbGxiYWNrIGlzIGdpdmVuLlxuICAgKi9cbiAgdW5mb2xsb3dVc2VyczogZnVuY3Rpb24odXNlcklkcywgY2FsbGJhY2spIHtcbiAgICByZXR1cm4gV2ViQXBpUmVxdWVzdC5idWlsZGVyKHRoaXMuZ2V0QWNjZXNzVG9rZW4oKSlcbiAgICAgIC53aXRoUGF0aCgnL3YxL21lL2ZvbGxvd2luZycpXG4gICAgICAud2l0aFF1ZXJ5UGFyYW1ldGVycyh7XG4gICAgICAgIGlkczogdXNlcklkcy5qb2luKCcsJyksXG4gICAgICAgIHR5cGU6ICd1c2VyJ1xuICAgICAgfSlcbiAgICAgIC5idWlsZCgpXG4gICAgICAuZXhlY3V0ZShIdHRwTWFuYWdlci5kZWwsIGNhbGxiYWNrKTtcbiAgfSxcblxuICAvKipcbiAgICogUmVtb3ZlIHRoZSBjdXJyZW50IHVzZXIgYXMgYSBmb2xsb3dlciBvZiBvbmUgb3IgbW9yZSBhcnRpc3RzLlxuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSBhcnRpc3RJZHMgVGhlIElEcyBvZiB0aGUgYXJ0aXN0cyB0byBiZSB1bmZvbGxvd2VkLlxuICAgKiBAcGFyYW0ge3JlcXVlc3RDYWxsYmFja30gW2NhbGxiYWNrXSBPcHRpb25hbCBjYWxsYmFjayBtZXRob2QgdG8gYmUgY2FsbGVkIGluc3RlYWQgb2YgdGhlIHByb21pc2UuXG4gICAqIEBleGFtcGxlIHVuZm9sbG93QXJ0aXN0cyhbJzBMY0pMcWJCbWFHVWZ0MWU5TW04SFYnLCAnM2dxdjFrZ2l2QWM5MktuVW00ZWxLdiddKS50aGVuKC4uLilcbiAgICogQHJldHVybnMge1Byb21pc2V8dW5kZWZpbmVkfSBBIHByb21pc2UgdGhhdCBpZiBzdWNjZXNzZnVsLCBzaW1wbHkgcmVzb2x2ZXMgdG8gYW4gZW1wdHkgb2JqZWN0LiBJZiByZWplY3RlZCxcbiAgICogICAgICAgICAgaXQgY29udGFpbnMgYW4gZXJyb3Igb2JqZWN0LiBOb3QgcmV0dXJuZWQgaWYgYSBjYWxsYmFjayBpcyBnaXZlbi5cbiAgICovXG4gIHVuZm9sbG93QXJ0aXN0czogZnVuY3Rpb24oYXJ0aXN0SWRzLCBjYWxsYmFjaykge1xuICAgIHJldHVybiBXZWJBcGlSZXF1ZXN0LmJ1aWxkZXIodGhpcy5nZXRBY2Nlc3NUb2tlbigpKVxuICAgICAgLndpdGhQYXRoKCcvdjEvbWUvZm9sbG93aW5nJylcbiAgICAgIC53aXRoUXVlcnlQYXJhbWV0ZXJzKHtcbiAgICAgICAgaWRzOiBhcnRpc3RJZHMuam9pbignLCcpLFxuICAgICAgICB0eXBlOiAnYXJ0aXN0J1xuICAgICAgfSlcbiAgICAgIC5idWlsZCgpXG4gICAgICAuZXhlY3V0ZShIdHRwTWFuYWdlci5kZWwsIGNhbGxiYWNrKTtcbiAgfSxcblxuICAvKipcbiAgICogQ2hlY2sgdG8gc2VlIGlmIHRoZSBjdXJyZW50IHVzZXIgaXMgZm9sbG93aW5nIG9uZSBvciBtb3JlIG90aGVyIFNwb3RpZnkgdXNlcnMuXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IHVzZXJJZHMgVGhlIElEcyBvZiB0aGUgdXNlcnMgdG8gY2hlY2sgaWYgYXJlIGZvbGxvd2VkIGJ5IHRoZSBjdXJyZW50IHVzZXIuXG4gICAqIEBwYXJhbSB7cmVxdWVzdENhbGxiYWNrfSBbY2FsbGJhY2tdIE9wdGlvbmFsIGNhbGxiYWNrIG1ldGhvZCB0byBiZSBjYWxsZWQgaW5zdGVhZCBvZiB0aGUgcHJvbWlzZS5cbiAgICogQGV4YW1wbGUgaXNGb2xsb3dpbmdVc2VycyhbJ3RoZWxpbm1pY2hhZWwnLCAnd2l6emxlciddKS50aGVuKC4uLilcbiAgICogQHJldHVybnMge1Byb21pc2V8dW5kZWZpbmVkfSBBIHByb21pc2UgdGhhdCBpZiBzdWNjZXNzZnVsLCByZXNvbHZlcyBpbnRvIGFuIGFycmF5IG9mIGJvb2xlYW5zLiBUaGUgb3JkZXJcbiAgICogICAgICAgICAgb2YgdGhlIHJldHVybmVkIGFycmF5J3MgZWxlbWVudHMgY29ycmVzcG9uZCB0byB0aGUgdXNlcnMgSURzIGluIHRoZSByZXF1ZXN0LlxuICAgKiAgICAgICAgICBUaGUgYm9vbGVhbiB2YWx1ZSBvZiB0cnVlIGluZGljYXRlcyB0aGF0IHRoZSB1c2VyIGlzIGZvbGxvd2luZyB0aGF0IHVzZXIsIG90aGVyd2lzZSBpcyBub3QuXG4gICAqICAgICAgICAgIE5vdCByZXR1cm5lZCBpZiBhIGNhbGxiYWNrIGlzIGdpdmVuLlxuICAgKi9cbiAgaXNGb2xsb3dpbmdVc2VyczogZnVuY3Rpb24odXNlcklkcywgY2FsbGJhY2spIHtcbiAgICByZXR1cm4gV2ViQXBpUmVxdWVzdC5idWlsZGVyKHRoaXMuZ2V0QWNjZXNzVG9rZW4oKSlcbiAgICAgIC53aXRoUGF0aCgnL3YxL21lL2ZvbGxvd2luZy9jb250YWlucycpXG4gICAgICAud2l0aFF1ZXJ5UGFyYW1ldGVycyh7XG4gICAgICAgIGlkczogdXNlcklkcy5qb2luKCcsJyksXG4gICAgICAgIHR5cGU6ICd1c2VyJ1xuICAgICAgfSlcbiAgICAgIC5idWlsZCgpXG4gICAgICAuZXhlY3V0ZShIdHRwTWFuYWdlci5nZXQsIGNhbGxiYWNrKTtcbiAgfSxcblxuICAvKipcbiAgICogR2V0IHRoZSBjdXJyZW50IHVzZXIncyBmb2xsb3dlZCBhcnRpc3RzLlxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIE9wdGlvbnMsIGJlaW5nIGFmdGVyIGFuZCBsaW1pdC5cbiAgICogQHBhcmFtIHtyZXF1ZXN0Q2FsbGJhY2t9IFtjYWxsYmFja10gT3B0aW9uYWwgY2FsbGJhY2sgbWV0aG9kIHRvIGJlIGNhbGxlZCBpbnN0ZWFkIG9mIHRoZSBwcm9taXNlLlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZXx1bmRlZmluZWR9IEEgcHJvbWlzZSB0aGF0IGlmIHN1Y2Nlc3NmdWwsIHJlc29sdmVzIHRvIGFuIG9iamVjdCBjb250YWluaW5nIGEgcGFnaW5nIG9iamVjdCB3aGljaCBjb250YWluc1xuICAgKiBhbGJ1bSBvYmplY3RzLiBOb3QgcmV0dXJuZWQgaWYgYSBjYWxsYmFjayBpcyBnaXZlbi5cbiAgICovXG4gIGdldEZvbGxvd2VkQXJ0aXN0czogZnVuY3Rpb24ob3B0aW9ucywgY2FsbGJhY2spIHtcbiAgICByZXR1cm4gV2ViQXBpUmVxdWVzdC5idWlsZGVyKHRoaXMuZ2V0QWNjZXNzVG9rZW4oKSlcbiAgICAgIC53aXRoUGF0aCgnL3YxL21lL2ZvbGxvd2luZycpXG4gICAgICAud2l0aFF1ZXJ5UGFyYW1ldGVycyhcbiAgICAgICAge1xuICAgICAgICAgIHR5cGU6ICdhcnRpc3QnXG4gICAgICAgIH0sXG4gICAgICAgIG9wdGlvbnNcbiAgICAgIClcbiAgICAgIC5idWlsZCgpXG4gICAgICAuZXhlY3V0ZShIdHRwTWFuYWdlci5nZXQsIGNhbGxiYWNrKTtcbiAgfSxcblxuICAvKipcbiAgICogQ2hlY2sgaWYgdXNlcnMgYXJlIGZvbGxvd2luZyBhIHBsYXlsaXN0LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdXNlcklkIFRoZSBwbGF5bGlzdCdzIG93bmVyJ3MgdXNlciBJRFxuICAgKiBAcGFyYW0ge3N0cmluZ30gcGxheWxpc3RJZCBUaGUgcGxheWxpc3QncyBJRFxuICAgKiBAcGFyYW0ge1N0cmluZ1tdfSBVc2VyIElEcyBvZiB0aGUgZm9sbG93aW5nIHVzZXJzXG4gICAqIEBwYXJhbSB7cmVxdWVzdENhbGxiYWNrfSBbY2FsbGJhY2tdIE9wdGlvbmFsIGNhbGxiYWNrIG1ldGhvZCB0byBiZSBjYWxsZWQgaW5zdGVhZCBvZiB0aGUgcHJvbWlzZS5cbiAgICogQHJldHVybnMge1Byb21pc2V8dW5kZWZpbmVkfSBBIHByb21pc2UgdGhhdCBpZiBzdWNjZXNzZnVsIHJldHVybnMgYW4gYXJyYXkgb2YgYm9vbGVhbnMuIElmIHJlamVjdGVkLFxuICAgKiBpdCBjb250YWlucyBhbiBlcnJvciBvYmplY3QuIE5vdCByZXR1cm5lZCBpZiBhIGNhbGxiYWNrIGlzIGdpdmVuLlxuICAgKi9cbiAgYXJlRm9sbG93aW5nUGxheWxpc3Q6IGZ1bmN0aW9uKHVzZXJJZCwgcGxheWxpc3RJZCwgZm9sbG93ZXJJZHMsIGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIFdlYkFwaVJlcXVlc3QuYnVpbGRlcih0aGlzLmdldEFjY2Vzc1Rva2VuKCkpXG4gICAgICAud2l0aFBhdGgoXG4gICAgICAgICcvdjEvdXNlcnMvJyArXG4gICAgICAgICAgZW5jb2RlVVJJQ29tcG9uZW50KHVzZXJJZCkgK1xuICAgICAgICAgICcvcGxheWxpc3RzLycgK1xuICAgICAgICAgIHBsYXlsaXN0SWQgK1xuICAgICAgICAgICcvZm9sbG93ZXJzL2NvbnRhaW5zJ1xuICAgICAgKVxuICAgICAgLndpdGhRdWVyeVBhcmFtZXRlcnMoe1xuICAgICAgICBpZHM6IGZvbGxvd2VySWRzLmpvaW4oJywnKVxuICAgICAgfSlcbiAgICAgIC5idWlsZCgpXG4gICAgICAuZXhlY3V0ZShIdHRwTWFuYWdlci5nZXQsIGNhbGxiYWNrKTtcbiAgfSxcblxuICAvKipcbiAgICogQ2hlY2sgdG8gc2VlIGlmIHRoZSBjdXJyZW50IHVzZXIgaXMgZm9sbG93aW5nIG9uZSBvciBtb3JlIGFydGlzdHMuXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IGFydGlzdElkcyBUaGUgSURzIG9mIHRoZSBhcnRpc3RzIHRvIGNoZWNrIGlmIGFyZSBmb2xsb3dlZCBieSB0aGUgY3VycmVudCB1c2VyLlxuICAgKiBAcGFyYW0ge3JlcXVlc3RDYWxsYmFja30gW2NhbGxiYWNrXSBPcHRpb25hbCBjYWxsYmFjayBtZXRob2QgdG8gYmUgY2FsbGVkIGluc3RlYWQgb2YgdGhlIHByb21pc2UuXG4gICAqIEBleGFtcGxlIGlzRm9sbG93aW5nQXJ0aXN0cyhbJzBMY0pMcWJCbWFHVWZ0MWU5TW04SFYnLCAnM2dxdjFrZ2l2QWM5MktuVW00ZWxLdiddKS50aGVuKC4uLilcbiAgICogQHJldHVybnMge1Byb21pc2V8dW5kZWZpbmVkfSBBIHByb21pc2UgdGhhdCBpZiBzdWNjZXNzZnVsLCByZXNvbHZlcyBpbnRvIGFuIGFycmF5IG9mIGJvb2xlYW5zLiBUaGUgb3JkZXJcbiAgICogICAgICAgICAgb2YgdGhlIHJldHVybmVkIGFycmF5J3MgZWxlbWVudHMgY29ycmVzcG9uZCB0byB0aGUgYXJ0aXN0cyBJRHMgaW4gdGhlIHJlcXVlc3QuXG4gICAqICAgICAgICAgIFRoZSBib29sZWFuIHZhbHVlIG9mIHRydWUgaW5kaWNhdGVzIHRoYXQgdGhlIHVzZXIgaXMgZm9sbG93aW5nIHRoYXQgYXJ0aXN0LCBvdGhlcndpc2UgaXMgbm90LlxuICAgKiAgICAgICAgICBOb3QgcmV0dXJuZWQgaWYgYSBjYWxsYmFjayBpcyBnaXZlbi5cbiAgICovXG4gIGlzRm9sbG93aW5nQXJ0aXN0czogZnVuY3Rpb24oYXJ0aXN0SWRzLCBjYWxsYmFjaykge1xuICAgIHJldHVybiBXZWJBcGlSZXF1ZXN0LmJ1aWxkZXIodGhpcy5nZXRBY2Nlc3NUb2tlbigpKVxuICAgICAgLndpdGhQYXRoKCcvdjEvbWUvZm9sbG93aW5nL2NvbnRhaW5zJylcbiAgICAgIC53aXRoUXVlcnlQYXJhbWV0ZXJzKHtcbiAgICAgICAgaWRzOiBhcnRpc3RJZHMuam9pbignLCcpLFxuICAgICAgICB0eXBlOiAnYXJ0aXN0J1xuICAgICAgfSlcbiAgICAgIC5idWlsZCgpXG4gICAgICAuZXhlY3V0ZShIdHRwTWFuYWdlci5nZXQsIGNhbGxiYWNrKTtcbiAgfSxcblxuICAvKipcbiAgICogUmV0cmlldmUgbmV3IHJlbGVhc2VzXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gT3B0aW9ucywgYmVpbmcgY291bnRyeSwgbGltaXQgYW5kL29yIG9mZnNldC5cbiAgICogQHBhcmFtIHtyZXF1ZXN0Q2FsbGJhY2t9IFtjYWxsYmFja10gT3B0aW9uYWwgY2FsbGJhY2sgbWV0aG9kIHRvIGJlIGNhbGxlZCBpbnN0ZWFkIG9mIHRoZSBwcm9taXNlLlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZXx1bmRlZmluZWR9IEEgcHJvbWlzZSB0aGF0IGlmIHN1Y2Nlc3NmdWwsIHJlc29sdmVzIHRvIGFuIG9iamVjdCBjb250YWluaW5nIGEgcGFnaW5nIG9iamVjdCB3aGljaCBjb250YWluc1xuICAgKiBhbGJ1bSBvYmplY3RzLiBOb3QgcmV0dXJuZWQgaWYgYSBjYWxsYmFjayBpcyBnaXZlbi5cbiAgICovXG4gIGdldE5ld1JlbGVhc2VzOiBmdW5jdGlvbihvcHRpb25zLCBjYWxsYmFjaykge1xuICAgIHJldHVybiBXZWJBcGlSZXF1ZXN0LmJ1aWxkZXIodGhpcy5nZXRBY2Nlc3NUb2tlbigpKVxuICAgICAgLndpdGhQYXRoKCcvdjEvYnJvd3NlL25ldy1yZWxlYXNlcycpXG4gICAgICAud2l0aFF1ZXJ5UGFyYW1ldGVycyhvcHRpb25zKVxuICAgICAgLmJ1aWxkKClcbiAgICAgIC5leGVjdXRlKEh0dHBNYW5hZ2VyLmdldCwgY2FsbGJhY2spO1xuICB9LFxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZSBmZWF0dXJlZCBwbGF5bGlzdHNcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBPcHRpb25zLCBiZWluZyBjb3VudHJ5LCBsb2NhbGUsIHRpbWVzdGFtcCwgbGltaXQsIG9mZnNldC5cbiAgICogQHBhcmFtIHtyZXF1ZXN0Q2FsbGJhY2t9IFtjYWxsYmFja10gT3B0aW9uYWwgY2FsbGJhY2sgbWV0aG9kIHRvIGJlIGNhbGxlZCBpbnN0ZWFkIG9mIHRoZSBwcm9taXNlLlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZXx1bmRlZmluZWR9IEEgcHJvbWlzZSB0aGF0IGlmIHN1Y2Nlc3NmdWwsIHJlc29sdmVzIHRvIGFuIG9iamVjdCBjb250YWluaW5nIGEgcGFnaW5nIG9iamVjdCB3aGljaCBjb250YWluc1xuICAgKiBmZWF0dXJlZCBwbGF5bGlzdHMuIE5vdCByZXR1cm5lZCBpZiBhIGNhbGxiYWNrIGlzIGdpdmVuLlxuICAgKi9cbiAgZ2V0RmVhdHVyZWRQbGF5bGlzdHM6IGZ1bmN0aW9uKG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIFdlYkFwaVJlcXVlc3QuYnVpbGRlcih0aGlzLmdldEFjY2Vzc1Rva2VuKCkpXG4gICAgICAud2l0aFBhdGgoJy92MS9icm93c2UvZmVhdHVyZWQtcGxheWxpc3RzJylcbiAgICAgIC53aXRoUXVlcnlQYXJhbWV0ZXJzKG9wdGlvbnMpXG4gICAgICAuYnVpbGQoKVxuICAgICAgLmV4ZWN1dGUoSHR0cE1hbmFnZXIuZ2V0LCBjYWxsYmFjayk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJldHJpZXZlIGEgbGlzdCBvZiBjYXRlZ29yaWVzIHVzZWQgdG8gdGFnIGl0ZW1zIGluIFNwb3RpZnkgKGUuZy4gaW4gdGhlICdCcm93c2UnIHRhYilcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBPcHRpb25zLCBiZWluZyBjb3VudHJ5LCBsb2NhbGUsIGxpbWl0LCBvZmZzZXQuXG4gICAqIEBwYXJhbSB7cmVxdWVzdENhbGxiYWNrfSBbY2FsbGJhY2tdIE9wdGlvbmFsIGNhbGxiYWNrIG1ldGhvZCB0byBiZSBjYWxsZWQgaW5zdGVhZCBvZiB0aGUgcHJvbWlzZS5cbiAgICogQHJldHVybnMge1Byb21pc2V8dW5kZWZpbmVkfSBBIHByb21pc2UgdGhhdCBpZiBzdWNjZXNzZnVsLCByZXNvbHZlcyB0byBhbiBvYmplY3QgY29udGFpbmluZyBhIHBhZ2luZyBvYmplY3Qgb2YgY2F0ZWdvcmllcy5cbiAgICogTm90IHJldHVybmVkIGlmIGEgY2FsbGJhY2sgaXMgZ2l2ZW4uXG4gICAqL1xuICBnZXRDYXRlZ29yaWVzOiBmdW5jdGlvbihvcHRpb25zLCBjYWxsYmFjaykge1xuICAgIHJldHVybiBXZWJBcGlSZXF1ZXN0LmJ1aWxkZXIodGhpcy5nZXRBY2Nlc3NUb2tlbigpKVxuICAgICAgLndpdGhQYXRoKCcvdjEvYnJvd3NlL2NhdGVnb3JpZXMnKVxuICAgICAgLndpdGhRdWVyeVBhcmFtZXRlcnMob3B0aW9ucylcbiAgICAgIC5idWlsZCgpXG4gICAgICAuZXhlY3V0ZShIdHRwTWFuYWdlci5nZXQsIGNhbGxiYWNrKTtcbiAgfSxcblxuICAvKipcbiAgICogUmV0cmlldmUgYSBjYXRlZ29yeS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGNhdGVnb3J5SWQgVGhlIGlkIG9mIHRoZSBjYXRlZ29yeSB0byByZXRyaWV2ZS5cbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBPcHRpb25zLCBiZWluZyBjb3VudHJ5LCBsb2NhbGUuXG4gICAqIEBwYXJhbSB7cmVxdWVzdENhbGxiYWNrfSBbY2FsbGJhY2tdIE9wdGlvbmFsIGNhbGxiYWNrIG1ldGhvZCB0byBiZSBjYWxsZWQgaW5zdGVhZCBvZiB0aGUgcHJvbWlzZS5cbiAgICogQHJldHVybnMge1Byb21pc2V8dW5kZWZpbmVkfSBBIHByb21pc2UgdGhhdCBpZiBzdWNjZXNzZnVsLCByZXNvbHZlcyB0byBhbiBvYmplY3QgY29udGFpbmluZyBhIGNhdGVnb3J5IG9iamVjdC5cbiAgICogTm90IHJldHVybmVkIGlmIGEgY2FsbGJhY2sgaXMgZ2l2ZW4uXG4gICAqL1xuICBnZXRDYXRlZ29yeTogZnVuY3Rpb24oY2F0ZWdvcnlJZCwgb3B0aW9ucywgY2FsbGJhY2spIHtcbiAgICByZXR1cm4gV2ViQXBpUmVxdWVzdC5idWlsZGVyKHRoaXMuZ2V0QWNjZXNzVG9rZW4oKSlcbiAgICAgIC53aXRoUGF0aCgnL3YxL2Jyb3dzZS9jYXRlZ29yaWVzLycgKyBjYXRlZ29yeUlkKVxuICAgICAgLndpdGhRdWVyeVBhcmFtZXRlcnMob3B0aW9ucylcbiAgICAgIC5idWlsZCgpXG4gICAgICAuZXhlY3V0ZShIdHRwTWFuYWdlci5nZXQsIGNhbGxiYWNrKTtcbiAgfSxcblxuICAvKipcbiAgICogUmV0cmlldmUgcGxheWxpc3RzIGZvciBhIGNhdGVnb3J5LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gY2F0ZWdvcnlJZCBUaGUgaWQgb2YgdGhlIGNhdGVnb3J5IHRvIHJldHJpZXZlIHBsYXlsaXN0cyBmb3IuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gT3B0aW9ucywgYmVpbmcgY291bnRyeSwgbGltaXQsIG9mZnNldC5cbiAgICogQHBhcmFtIHtyZXF1ZXN0Q2FsbGJhY2t9IFtjYWxsYmFja10gT3B0aW9uYWwgY2FsbGJhY2sgbWV0aG9kIHRvIGJlIGNhbGxlZCBpbnN0ZWFkIG9mIHRoZSBwcm9taXNlLlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZXx1bmRlZmluZWR9IEEgcHJvbWlzZSB0aGF0IGlmIHN1Y2Nlc3NmdWwsIHJlc29sdmVzIHRvIGEgcGFnaW5nIG9iamVjdCBjb250YWluaW5nIHNpbXBsZSBwbGF5bGlzdHMuXG4gICAqIE5vdCByZXR1cm5lZCBpZiBhIGNhbGxiYWNrIGlzIGdpdmVuLlxuICAgKi9cbiAgZ2V0UGxheWxpc3RzRm9yQ2F0ZWdvcnk6IGZ1bmN0aW9uKGNhdGVnb3J5SWQsIG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIFdlYkFwaVJlcXVlc3QuYnVpbGRlcih0aGlzLmdldEFjY2Vzc1Rva2VuKCkpXG4gICAgICAud2l0aFBhdGgoJy92MS9icm93c2UvY2F0ZWdvcmllcy8nICsgY2F0ZWdvcnlJZCArICcvcGxheWxpc3RzJylcbiAgICAgIC53aXRoUXVlcnlQYXJhbWV0ZXJzKG9wdGlvbnMpXG4gICAgICAuYnVpbGQoKVxuICAgICAgLmV4ZWN1dGUoSHR0cE1hbmFnZXIuZ2V0LCBjYWxsYmFjayk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldCBhIHNob3cuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzaG93SWQgVGhlIHNob3cncyBJRC5cbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBUaGUgcG9zc2libGUgb3B0aW9ucywgY3VycmVudGx5IG9ubHkgbWFya2V0LlxuICAgKiBAcGFyYW0ge3JlcXVlc3RDYWxsYmFja30gW2NhbGxiYWNrXSBPcHRpb25hbCBjYWxsYmFjayBtZXRob2QgdG8gYmUgY2FsbGVkIGluc3RlYWQgb2YgdGhlIHByb21pc2UuXG4gICAqIEBleGFtcGxlIGdldFNob3coJzNRbTg2WExmbG1JWFZtMXdjd2tnREsnKS50aGVuKC4uLilcbiAgICogQHJldHVybnMge1Byb21pc2V8dW5kZWZpbmVkfSBBIHByb21pc2UgdGhhdCBpZiBzdWNjZXNzZnVsLCByZXR1cm5zIGFuIG9iamVjdCBjb250YWluaW5nIGluZm9ybWF0aW9uXG4gICAqICAgICAgICAgIGFib3V0IHRoZSBzaG93LiBOb3QgcmV0dXJuZWQgaWYgYSBjYWxsYmFjayBpcyBnaXZlbi5cbiAgICovXG4gIGdldFNob3c6IGZ1bmN0aW9uKHNob3dJZCwgb3B0aW9ucywgY2FsbGJhY2spIHtcbiAgICByZXR1cm4gV2ViQXBpUmVxdWVzdC5idWlsZGVyKHRoaXMuZ2V0QWNjZXNzVG9rZW4oKSlcbiAgICAud2l0aFBhdGgoJy92MS9zaG93cy8nICsgc2hvd0lkKVxuICAgIC53aXRoUXVlcnlQYXJhbWV0ZXJzKG9wdGlvbnMpXG4gICAgLmJ1aWxkKClcbiAgICAuZXhlY3V0ZShIdHRwTWFuYWdlci5nZXQsIGNhbGxiYWNrKTtcbiAgfSxcblxuICAvKipcbiAgICogTG9vayB1cCBzZXZlcmFsIHNob3dzLlxuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSBzaG93SWRzIFRoZSBJRHMgb2YgdGhlIHNob3dzLlxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIFRoZSBwb3NzaWJsZSBvcHRpb25zLCBjdXJyZW50bHkgb25seSBtYXJrZXQuXG4gICAqIEBwYXJhbSB7cmVxdWVzdENhbGxiYWNrfSBbY2FsbGJhY2tdIE9wdGlvbmFsIGNhbGxiYWNrIG1ldGhvZCB0byBiZSBjYWxsZWQgaW5zdGVhZCBvZiB0aGUgcHJvbWlzZS5cbiAgICogQGV4YW1wbGUgZ2V0U2hvd3MoWycwb1NHeGZXU25uT1hoRDJmS3V6Mkd5JywgJzNkQlZ5SjdKdU9NdDRHRTk2MDdRaW4nXSkudGhlbiguLi4pXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfHVuZGVmaW5lZH0gQSBwcm9taXNlIHRoYXQgaWYgc3VjY2Vzc2Z1bCwgcmV0dXJucyBhbiBvYmplY3QgY29udGFpbmluZyBpbmZvcm1hdGlvblxuICAgKiAgICAgICAgICBhYm91dCB0aGUgc2hvd3MuIE5vdCByZXR1cm5lZCBpZiBhIGNhbGxiYWNrIGlzIGdpdmVuLlxuICAgKi9cbiAgZ2V0U2hvd3M6IGZ1bmN0aW9uKHNob3dJZHMsIG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIFdlYkFwaVJlcXVlc3QuYnVpbGRlcih0aGlzLmdldEFjY2Vzc1Rva2VuKCkpXG4gICAgICAud2l0aFBhdGgoJy92MS9zaG93cycpXG4gICAgICAud2l0aFF1ZXJ5UGFyYW1ldGVycyhcbiAgICAgICAge1xuICAgICAgICAgIGlkczogc2hvd0lkcy5qb2luKCcsJylcbiAgICAgICAgfSxcbiAgICAgICAgb3B0aW9uc1xuICAgICAgKVxuICAgICAgLmJ1aWxkKClcbiAgICAgIC5leGVjdXRlKEh0dHBNYW5hZ2VyLmdldCwgY2FsbGJhY2spO1xuICB9LFxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBvbmUgb3IgbW9yZSBzaG93cyBpcyBhbHJlYWR5IHNhdmVkIGluIHRoZSBjdXJyZW50IFNwb3RpZnkgdXNlcuKAmXMg4oCcWW91ciBNdXNpY+KAnSBsaWJyYXJ5LlxuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSBzaG93SWRzIFRoZSBzaG93IElEc1xuICAgKiBAcGFyYW0ge3JlcXVlc3RDYWxsYmFja30gW2NhbGxiYWNrXSBPcHRpb25hbCBjYWxsYmFjayBtZXRob2QgdG8gYmUgY2FsbGVkIGluc3RlYWQgb2YgdGhlIHByb21pc2UuXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfHVuZGVmaW5lZH0gQSBwcm9taXNlIHRoYXQgaWYgc3VjY2Vzc2Z1bCwgcmVzb2x2ZXMgaW50byBhbiBhcnJheSBvZiBib29sZWFucy4gVGhlIG9yZGVyXG4gICAqIG9mIHRoZSByZXR1cm5lZCBhcnJheSdzIGVsZW1lbnRzIGNvcnJlc3BvbmQgdG8gdGhlIHNob3cgSUQgaW4gdGhlIHJlcXVlc3QuXG4gICAqIFRoZSBib29sZWFuIHZhbHVlIG9mIHRydWUgaW5kaWNhdGVzIHRoYXQgdGhlIHNob3cgaXMgcGFydCBvZiB0aGUgdXNlcidzIGxpYnJhcnksIG90aGVyd2lzZSBmYWxzZS5cbiAgICogTm90IHJldHVybmVkIGlmIGEgY2FsbGJhY2sgaXMgZ2l2ZW4uXG4gICAqL1xuICBjb250YWluc015U2F2ZWRTaG93czogZnVuY3Rpb24oc2hvd0lkcywgY2FsbGJhY2spIHtcbiAgICByZXR1cm4gV2ViQXBpUmVxdWVzdC5idWlsZGVyKHRoaXMuZ2V0QWNjZXNzVG9rZW4oKSlcbiAgICAgIC53aXRoUGF0aCgnL3YxL21lL3Nob3dzL2NvbnRhaW5zJylcbiAgICAgIC53aXRoUXVlcnlQYXJhbWV0ZXJzKHtcbiAgICAgICAgaWRzOiBzaG93SWRzLmpvaW4oJywnKVxuICAgICAgfSlcbiAgICAgIC5idWlsZCgpXG4gICAgICAuZXhlY3V0ZShIdHRwTWFuYWdlci5nZXQsIGNhbGxiYWNrKTtcbiAgfSxcblxuICAvKipcbiAgICogUmVtb3ZlIGFuIHNob3cgZnJvbSB0aGUgYXV0aGVudGljYXRlZCB1c2VyJ3MgWW91ciBNdXNpYyBsaWJyYXJ5LlxuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSBzaG93SWRzIFRoZSBzaG93IElEc1xuICAgKiBAcGFyYW0ge3JlcXVlc3RDYWxsYmFja30gW2NhbGxiYWNrXSBPcHRpb25hbCBjYWxsYmFjayBtZXRob2QgdG8gYmUgY2FsbGVkIGluc3RlYWQgb2YgdGhlIHByb21pc2UuXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfHVuZGVmaW5lZH0gQSBwcm9taXNlIHRoYXQgaWYgc3VjY2Vzc2Z1bCByZXR1cm5zIG51bGwsIG90aGVyd2lzZSBhbiBlcnJvci5cbiAgICogTm90IHJldHVybmVkIGlmIGEgY2FsbGJhY2sgaXMgZ2l2ZW4uXG4gICAqL1xuICByZW1vdmVGcm9tTXlTYXZlZFNob3dzOiBmdW5jdGlvbihzaG93SWRzLCBjYWxsYmFjaykge1xuICAgIHJldHVybiBXZWJBcGlSZXF1ZXN0LmJ1aWxkZXIodGhpcy5nZXRBY2Nlc3NUb2tlbigpKVxuICAgICAgLndpdGhQYXRoKCcvdjEvbWUvc2hvd3MnKVxuICAgICAgLndpdGhIZWFkZXJzKHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9KVxuICAgICAgLndpdGhCb2R5UGFyYW1ldGVycyhzaG93SWRzKVxuICAgICAgLmJ1aWxkKClcbiAgICAgIC5leGVjdXRlKEh0dHBNYW5hZ2VyLmRlbCwgY2FsbGJhY2spO1xuICB9LFxuXG4gIC8qKlxuICAgKiBBZGQgYSBzaG93IGZyb20gdGhlIGF1dGhlbnRpY2F0ZWQgdXNlcidzIFlvdXIgTXVzaWMgbGlicmFyeS5cbiAgICogQHBhcmFtIHtzdHJpbmdbXX0gc2hvd0lkcyBUaGUgc2hvdyBJRHNcbiAgICogQHBhcmFtIHtyZXF1ZXN0Q2FsbGJhY2t9IFtjYWxsYmFja10gT3B0aW9uYWwgY2FsbGJhY2sgbWV0aG9kIHRvIGJlIGNhbGxlZCBpbnN0ZWFkIG9mIHRoZSBwcm9taXNlLlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZXx1bmRlZmluZWR9IEEgcHJvbWlzZSB0aGF0IGlmIHN1Y2Nlc3NmdWwgcmV0dXJucyBudWxsLCBvdGhlcndpc2UgYW4gZXJyb3IuIE5vdCByZXR1cm5lZCBpZiBhIGNhbGxiYWNrIGlzIGdpdmVuLlxuICAgKi9cbiAgYWRkVG9NeVNhdmVkU2hvd3M6IGZ1bmN0aW9uKHNob3dJZHMsIGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIFdlYkFwaVJlcXVlc3QuYnVpbGRlcih0aGlzLmdldEFjY2Vzc1Rva2VuKCkpXG4gICAgICAud2l0aFBhdGgoJy92MS9tZS9zaG93cycpXG4gICAgICAud2l0aEhlYWRlcnMoeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0pXG4gICAgICAud2l0aEJvZHlQYXJhbWV0ZXJzKHNob3dJZHMpXG4gICAgICAuYnVpbGQoKVxuICAgICAgLmV4ZWN1dGUoSHR0cE1hbmFnZXIucHV0LCBjYWxsYmFjayk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJldHJpZXZlIHRoZSBzaG93cyB0aGF0IGFyZSBzYXZlZCB0byB0aGUgYXV0aGVudGljYXRlZCB1c2VycyBZb3VyIE11c2ljIGxpYnJhcnkuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gT3B0aW9ucywgYmVpbmcgbWFya2V0LCBsaW1pdCwgYW5kL29yIG9mZnNldC5cbiAgICogQHBhcmFtIHtyZXF1ZXN0Q2FsbGJhY2t9IFtjYWxsYmFja10gT3B0aW9uYWwgY2FsbGJhY2sgbWV0aG9kIHRvIGJlIGNhbGxlZCBpbnN0ZWFkIG9mIHRoZSBwcm9taXNlLlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZXx1bmRlZmluZWR9IEEgcHJvbWlzZSB0aGF0IGlmIHN1Y2Nlc3NmdWwsIHJlc29sdmVzIHRvIGFuIG9iamVjdCBjb250YWluaW5nIGEgcGFnaW5nIG9iamVjdCB3aGljaCBpbiB0dXJuIGNvbnRhaW5zXG4gICAqICAgICAgICAgIHBsYXlsaXN0IHNob3cgb2JqZWN0cy4gTm90IHJldHVybmVkIGlmIGEgY2FsbGJhY2sgaXMgZ2l2ZW4uXG4gICAqL1xuICBnZXRNeVNhdmVkU2hvd3M6IGZ1bmN0aW9uKG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIFdlYkFwaVJlcXVlc3QuYnVpbGRlcih0aGlzLmdldEFjY2Vzc1Rva2VuKCkpXG4gICAgICAud2l0aFBhdGgoJy92MS9tZS9zaG93cycpXG4gICAgICAud2l0aFF1ZXJ5UGFyYW1ldGVycyhvcHRpb25zKVxuICAgICAgLmJ1aWxkKClcbiAgICAgIC5leGVjdXRlKEh0dHBNYW5hZ2VyLmdldCwgY2FsbGJhY2spO1xuICB9LFxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGVwaXNvZGVzIG9mIGFuIHNob3cuXG4gICAqIEBwYXJhbSBzaG93SWQgdGhlIHNob3cncyBJRC5cbiAgICogQG9wdGlvbnMge09iamVjdH0gW29wdGlvbnNdIFRoZSBwb3NzaWJsZSBvcHRpb25zLCBiZWluZyBsaW1pdCwgb2Zmc2V0LCBhbmQgbWFya2V0LlxuICAgKiBAcGFyYW0ge3JlcXVlc3RDYWxsYmFja30gW2NhbGxiYWNrXSBPcHRpb25hbCBjYWxsYmFjayBtZXRob2QgdG8gYmUgY2FsbGVkIGluc3RlYWQgb2YgdGhlIHByb21pc2UuXG4gICAqIEBleGFtcGxlIGdldFNob3dFcGlzb2RlcygnNDFNblRpdmt3VE8zVVVKOERycUVKSicsIHsgbGltaXQgOiA1LCBvZmZzZXQgOiAxIH0pLnRoZW4oLi4uKVxuICAgKiBAcmV0dXJucyB7UHJvbWlzZXx1bmRlZmluZWR9IEEgcHJvbWlzZSB0aGF0IGlmIHN1Y2Nlc3NmdWwsIHJldHVybnMgYW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlXG4gICAqICAgICAgICAgICAgICAgICAgICBlcGlzb2RlcyBpbiB0aGUgYWxidW0uIFRoZSByZXN1bHQgaXMgcGFnaW5hdGVkLiBJZiB0aGUgcHJvbWlzZSBpcyByZWplY3RlZC5cbiAgICogICAgICAgICAgICAgICAgICAgIGl0IGNvbnRhaW5zIGFuIGVycm9yIG9iamVjdC4gTm90IHJldHVybmVkIGlmIGEgY2FsbGJhY2sgaXMgZ2l2ZW4uXG4gICAqL1xuICBnZXRTaG93RXBpc29kZXM6IGZ1bmN0aW9uKHNob3dJZCwgb3B0aW9ucywgY2FsbGJhY2spIHtcbiAgICByZXR1cm4gV2ViQXBpUmVxdWVzdC5idWlsZGVyKHRoaXMuZ2V0QWNjZXNzVG9rZW4oKSlcbiAgICAgIC53aXRoUGF0aCgnL3YxL3Nob3dzLycgKyBzaG93SWQgKyAnL2VwaXNvZGVzJylcbiAgICAgIC53aXRoUXVlcnlQYXJhbWV0ZXJzKG9wdGlvbnMpXG4gICAgICAuYnVpbGQoKVxuICAgICAgLmV4ZWN1dGUoSHR0cE1hbmFnZXIuZ2V0LCBjYWxsYmFjayk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFNlYXJjaCBmb3IgYSBzaG93LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcXVlcnkgVGhlIHNlYXJjaCBxdWVyeS5cbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBUaGUgcG9zc2libGUgb3B0aW9ucywgZS5nLiBsaW1pdCwgb2Zmc2V0LlxuICAgKiBAcGFyYW0ge3JlcXVlc3RDYWxsYmFja30gW2NhbGxiYWNrXSBPcHRpb25hbCBjYWxsYmFjayBtZXRob2QgdG8gYmUgY2FsbGVkIGluc3RlYWQgb2YgdGhlIHByb21pc2UuXG4gICAqIEBleGFtcGxlIHNlYXJjaFNob3dzKCdTcGFjZSBPZGRpdHknLCB7IGxpbWl0IDogNSwgb2Zmc2V0IDogMSB9KS50aGVuKC4uLilcbiAgICogQHJldHVybnMge1Byb21pc2V8dW5kZWZpbmVkfSBBIHByb21pc2UgdGhhdCBpZiBzdWNjZXNzZnVsLCByZXR1cm5zIGFuIG9iamVjdCBjb250YWluaW5nIHRoZVxuICAgKiAgICAgICAgICBzZWFyY2ggcmVzdWx0cy4gVGhlIHJlc3VsdCBpcyBwYWdpbmF0ZWQuIElmIHRoZSBwcm9taXNlIGlzIHJlamVjdGVkLFxuICAgKiAgICAgICAgICBpdCBjb250YWlucyBhbiBlcnJvciBvYmplY3QuIE5vdCByZXR1cm5lZCBpZiBhIGNhbGxiYWNrIGlzIGdpdmVuLlxuICAgKi9cbiAgc2VhcmNoU2hvd3M6IGZ1bmN0aW9uKHF1ZXJ5LCBvcHRpb25zLCBjYWxsYmFjaykge1xuICAgIHJldHVybiB0aGlzLnNlYXJjaChxdWVyeSwgWydzaG93J10sIG9wdGlvbnMsIGNhbGxiYWNrKTtcbiAgfSxcblxuICAvKipcbiAgICogU2VhcmNoIGZvciBhbiBlcGlzb2RlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcXVlcnkgVGhlIHNlYXJjaCBxdWVyeS5cbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBUaGUgcG9zc2libGUgb3B0aW9ucywgZS5nLiBsaW1pdCwgb2Zmc2V0LlxuICAgKiBAcGFyYW0ge3JlcXVlc3RDYWxsYmFja30gW2NhbGxiYWNrXSBPcHRpb25hbCBjYWxsYmFjayBtZXRob2QgdG8gYmUgY2FsbGVkIGluc3RlYWQgb2YgdGhlIHByb21pc2UuXG4gICAqIEBleGFtcGxlIHNlYXJjaEVwaXNvZGVzKCdTcGFjZSBPZGRpdHknLCB7IGxpbWl0IDogNSwgb2Zmc2V0IDogMSB9KS50aGVuKC4uLilcbiAgICogQHJldHVybnMge1Byb21pc2V8dW5kZWZpbmVkfSBBIHByb21pc2UgdGhhdCBpZiBzdWNjZXNzZnVsLCByZXR1cm5zIGFuIG9iamVjdCBjb250YWluaW5nIHRoZVxuICAgKiAgICAgICAgICBzZWFyY2ggcmVzdWx0cy4gVGhlIHJlc3VsdCBpcyBwYWdpbmF0ZWQuIElmIHRoZSBwcm9taXNlIGlzIHJlamVjdGVkLFxuICAgKiAgICAgICAgICBpdCBjb250YWlucyBhbiBlcnJvciBvYmplY3QuIE5vdCByZXR1cm5lZCBpZiBhIGNhbGxiYWNrIGlzIGdpdmVuLlxuICAgKi9cbiAgc2VhcmNoRXBpc29kZXM6IGZ1bmN0aW9uKHF1ZXJ5LCBvcHRpb25zLCBjYWxsYmFjaykge1xuICAgIHJldHVybiB0aGlzLnNlYXJjaChxdWVyeSwgWydlcGlzb2RlJ10sIG9wdGlvbnMsIGNhbGxiYWNrKTtcbiAgfSxcblxuIC8qKlxuICAgKiBMb29rIHVwIGFuIGVwaXNvZGUuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBlcGlzb2RlSWQgVGhlIGVwaXNvZGUncyBJRC5cbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBUaGUgcG9zc2libGUgb3B0aW9ucywgY3VycmVudGx5IG9ubHkgbWFya2V0LlxuICAgKiBAcGFyYW0ge3JlcXVlc3RDYWxsYmFja30gW2NhbGxiYWNrXSBPcHRpb25hbCBjYWxsYmFjayBtZXRob2QgdG8gYmUgY2FsbGVkIGluc3RlYWQgb2YgdGhlIHByb21pc2UuXG4gICAqIEBleGFtcGxlIGdldEVwaXNvZGUoJzNRbTg2WExmbG1JWFZtMXdjd2tnREsnKS50aGVuKC4uLilcbiAgICogQHJldHVybnMge1Byb21pc2V8dW5kZWZpbmVkfSBBIHByb21pc2UgdGhhdCBpZiBzdWNjZXNzZnVsLCByZXR1cm5zIGFuIG9iamVjdCBjb250YWluaW5nIGluZm9ybWF0aW9uXG4gICAqICAgICAgICAgIGFib3V0IHRoZSBlcGlzb2RlLiBOb3QgcmV0dXJuZWQgaWYgYSBjYWxsYmFjayBpcyBnaXZlbi5cbiAgICovXG4gIGdldEVwaXNvZGU6IGZ1bmN0aW9uKGVwaXNvZGVJZCwgb3B0aW9ucywgY2FsbGJhY2spIHtcbiAgICByZXR1cm4gV2ViQXBpUmVxdWVzdC5idWlsZGVyKHRoaXMuZ2V0QWNjZXNzVG9rZW4oKSlcbiAgICAgIC53aXRoUGF0aCgnL3YxL2VwaXNvZGVzLycgKyBlcGlzb2RlSWQpXG4gICAgICAud2l0aFF1ZXJ5UGFyYW1ldGVycyhvcHRpb25zKVxuICAgICAgLmJ1aWxkKClcbiAgICAgIC5leGVjdXRlKEh0dHBNYW5hZ2VyLmdldCwgY2FsbGJhY2spO1xuICB9LFxuXG4gIC8qKlxuICAgKiBMb29rIHVwIHNldmVyYWwgZXBpc29kZXMuXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IGVwaXNvZGVJZHMgVGhlIElEcyBvZiB0aGUgZXBpc29kZXMuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gVGhlIHBvc3NpYmxlIG9wdGlvbnMsIGN1cnJlbnRseSBvbmx5IG1hcmtldC5cbiAgICogQHBhcmFtIHtyZXF1ZXN0Q2FsbGJhY2t9IFtjYWxsYmFja10gT3B0aW9uYWwgY2FsbGJhY2sgbWV0aG9kIHRvIGJlIGNhbGxlZCBpbnN0ZWFkIG9mIHRoZSBwcm9taXNlLlxuICAgKiBAZXhhbXBsZSBnZXRFcGlzb2RlcyhbJzBvU0d4ZldTbm5PWGhEMmZLdXoyR3knLCAnM2RCVnlKN0p1T010NEdFOTYwN1FpbiddKS50aGVuKC4uLilcbiAgICogQHJldHVybnMge1Byb21pc2V8dW5kZWZpbmVkfSBBIHByb21pc2UgdGhhdCBpZiBzdWNjZXNzZnVsLCByZXR1cm5zIGFuIG9iamVjdCBjb250YWluaW5nIGluZm9ybWF0aW9uXG4gICAqICAgICAgICAgIGFib3V0IHRoZSBlcGlzb2Rlcy4gTm90IHJldHVybmVkIGlmIGEgY2FsbGJhY2sgaXMgZ2l2ZW4uXG4gICAqL1xuICBnZXRFcGlzb2RlczogZnVuY3Rpb24oZXBpc29kZUlkcywgb3B0aW9ucywgY2FsbGJhY2spIHtcbiAgICByZXR1cm4gV2ViQXBpUmVxdWVzdC5idWlsZGVyKHRoaXMuZ2V0QWNjZXNzVG9rZW4oKSlcbiAgICAgIC53aXRoUGF0aCgnL3YxL2VwaXNvZGVzJylcbiAgICAgIC53aXRoUXVlcnlQYXJhbWV0ZXJzKFxuICAgICAgICB7XG4gICAgICAgICAgaWRzOiBlcGlzb2RlSWRzLmpvaW4oJywnKVxuICAgICAgICB9LFxuICAgICAgICBvcHRpb25zXG4gICAgICApXG4gICAgICAuYnVpbGQoKVxuICAgICAgLmV4ZWN1dGUoSHR0cE1hbmFnZXIuZ2V0LCBjYWxsYmFjayk7XG4gIH0sXG59O1xuXG5TcG90aWZ5V2ViQXBpLl9hZGRNZXRob2RzID0gZnVuY3Rpb24obWV0aG9kcykge1xuICBmb3IgKHZhciBpIGluIG1ldGhvZHMpIHtcbiAgICBpZiAobWV0aG9kcy5oYXNPd25Qcm9wZXJ0eShpKSkge1xuICAgICAgdGhpcy5wcm90b3R5cGVbaV0gPSBtZXRob2RzW2ldO1xuICAgIH1cbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBTcG90aWZ5V2ViQXBpO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/spotify-web-api-node/src/spotify-web-api.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/spotify-web-api-node/src/webapi-request.js":
/*!*****************************************************************!*\
  !*** ./node_modules/spotify-web-api-node/src/webapi-request.js ***!
  \*****************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\n\nvar Request = __webpack_require__(/*! ./base-request */ \"(rsc)/./node_modules/spotify-web-api-node/src/base-request.js\");\n\nvar DEFAULT_HOST = 'api.spotify.com',\n  DEFAULT_PORT = 443,\n  DEFAULT_SCHEME = 'https';\n\nmodule.exports.builder = function(accessToken) {\n  return Request.builder()\n    .withHost(DEFAULT_HOST)\n    .withPort(DEFAULT_PORT)\n    .withScheme(DEFAULT_SCHEME)\n    .withAuth(accessToken);\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvc3BvdGlmeS13ZWItYXBpLW5vZGUvc3JjL3dlYmFwaS1yZXF1ZXN0LmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViLGNBQWMsbUJBQU8sQ0FBQyxxRkFBZ0I7O0FBRXRDO0FBQ0E7QUFDQTs7QUFFQSxzQkFBc0I7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc29uZy1ndWVzc2VyLy4vbm9kZV9tb2R1bGVzL3Nwb3RpZnktd2ViLWFwaS1ub2RlL3NyYy93ZWJhcGktcmVxdWVzdC5qcz81YmExIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxudmFyIFJlcXVlc3QgPSByZXF1aXJlKCcuL2Jhc2UtcmVxdWVzdCcpO1xuXG52YXIgREVGQVVMVF9IT1NUID0gJ2FwaS5zcG90aWZ5LmNvbScsXG4gIERFRkFVTFRfUE9SVCA9IDQ0MyxcbiAgREVGQVVMVF9TQ0hFTUUgPSAnaHR0cHMnO1xuXG5tb2R1bGUuZXhwb3J0cy5idWlsZGVyID0gZnVuY3Rpb24oYWNjZXNzVG9rZW4pIHtcbiAgcmV0dXJuIFJlcXVlc3QuYnVpbGRlcigpXG4gICAgLndpdGhIb3N0KERFRkFVTFRfSE9TVClcbiAgICAud2l0aFBvcnQoREVGQVVMVF9QT1JUKVxuICAgIC53aXRoU2NoZW1lKERFRkFVTFRfU0NIRU1FKVxuICAgIC53aXRoQXV0aChhY2Nlc3NUb2tlbik7XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/spotify-web-api-node/src/webapi-request.js\n");

/***/ })

};
;